Ext.define("Ext.chart.plugin.ItemEvents",{extend:"Ext.plugin.Abstract",alias:"plugin.chartitemevents",moveEvents:!1,mouseMoveEvents:{mousemove:!0,mouseover:!0,mouseout:!0},itemMouseMoveEvents:{itemmousemove:!0,itemmouseover:!0,itemmouseout:!0},init:function(t){var e="handleEvent";this.chart=t,t.addElementListener({click:e,dblclick:e,mousedown:e,mousemove:e,mouseup:e,mouseover:e,mouseout:e,priority:1001,scope:this})},hasItemMouseMoveListeners:function(){var t,e=this.chart.hasListeners;for(t in this.itemMouseMoveEvents)if(t in e)return!0;return!1},handleEvent:function(t){var e,r,i=this,n=i.chart,a=t.type in i.mouseMoveEvents,s=i.lastItem;(!a||i.hasItemMouseMoveListeners()||i.moveEvents)&&(e=n.getEventXY(t),r=n.getItemForPoint(e[0],e[1]),a&&!Ext.Object.equals(r,s)&&(s&&(n.fireEvent("itemmouseout",n,s,t),s.series.fireEvent("itemmouseout",s.series,s,t)),r&&(n.fireEvent("itemmouseover",n,r,t),r.series.fireEvent("itemmouseover",r.series,r,t))),r&&(n.fireEvent("item"+t.type,n,r,t),r.series.fireEvent("item"+t.type,r.series,r,t)),i.lastItem=r)}}),Ext.define("Ext.draw.ContainerBase",{extend:"Ext.panel.Panel",requires:["Ext.window.Window"],previewTitleText:"Chart Preview",previewAltText:"Chart preview",layout:"container",addElementListener:function(){var t=this,e=arguments;t.rendered?t.el.on.apply(t.el,e):t.on("render",function(){t.el.on.apply(t.el,e)})},removeElementListener:function(){var t=this,e=arguments;t.rendered&&t.el.un.apply(t.el,e)},afterRender:function(){this.callParent(arguments),this.initAnimator()},getItems:function(){var t=this,e=t.items;return e&&e.isMixedCollection||t.initItems(),t.items},onRender:function(){this.callParent(arguments),this.element=this.el,this.innerElement=this.body},setItems:function(t){return this.items=t,t},setSurfaceSize:function(t,e){this.resizeHandler({width:t,height:e}),this.renderFrame()},onResize:function(t,e,r,i){var n=this;n.callParent([t,e,r,i]),n.handleResize({width:t,height:e})},preview:function(){var t,e=this.getImage();return Ext.isIE8?!1:(t="svg-markup"===e.type?{xtype:"container",html:e.data}:{xtype:"image",mode:"img",cls:Ext.baseCSSPrefix+"chart-image",alt:this.previewAltText,src:e.data,listeners:{afterrender:function(){var t,r=this,i=r.imgEl.dom,n="svg"===e.type?1:window.devicePixelRatio||1;i.naturalWidth&&i.naturalHeight?(t=r.getSize(),r.setWidth(Math.floor(t.width/n)),r.setHeight(Math.floor(t.height/n))):i.onload=function(){var t=i.naturalWidth,e=i.naturalHeight;r.setWidth(Math.floor(t/n)),r.setHeight(Math.floor(e/n))}}}},void new Ext.window.Window({title:this.previewTitleText,closeable:!0,renderTo:Ext.getBody(),autoShow:!0,maximizeable:!0,maximized:!0,border:!0,layout:{type:"hbox",pack:"center",align:"middle"},items:{xtype:"container",items:t}}))},privates:{getTargetEl:function(){return this.innerElement},reattachToBody:function(){var t=this;t.pendingDetachSize&&t.handleResize(),t.pendingDetachSize=!1,t.callParent()}}}),Ext.define("Ext.draw.SurfaceBase",{extend:"Ext.Widget",getOwnerBody:function(){return this.ownerCt.body}}),Ext.define("Ext.draw.sprite.AnimationParser",function(){function t(t,e,r){return t+(e-t)*r}return{singleton:!0,attributeRe:/^url\(#([a-zA-Z\-]+)\)$/,requires:["Ext.draw.Color"],color:{parseInitial:function(t,e){return Ext.isString(t)&&(t=Ext.util.Color.create(t)),Ext.isString(e)&&(e=Ext.util.Color.create(e)),t&&t.isColor&&e&&e.isColor?[[t.r,t.g,t.b,t.a],[e.r,e.g,e.b,e.a]]:[t||e,e||t]},compute:function(e,r,i){return Ext.isArray(e)&&Ext.isArray(r)?[t(e[0],r[0],i),t(e[1],r[1],i),t(e[2],r[2],i),t(e[3],r[3],i)]:r||e},serve:function(t){var e=Ext.util.Color.fly(t[0],t[1],t[2],t[3]);return e.toString()}},number:{parse:function(t){return null===t?null:+t},compute:function(e,r,i){return Ext.isNumber(e)&&Ext.isNumber(r)?t(e,r,i):r||e}},angle:{parseInitial:function(t,e){return e-t>Math.PI?e-=2*Math.PI:e-t<-Math.PI&&(e+=2*Math.PI),[t,e]},compute:function(e,r,i){return Ext.isNumber(e)&&Ext.isNumber(r)?t(e,r,i):r||e}},path:{parseInitial:function(t,e){var r,i,n,a,s,o=t.toStripes(),l=e.toStripes(),h=o.length,c=l.length,u=l[c-1],d=[u[u.length-2],u[u.length-1]];for(r=h;c>r;r++)o.push(o[h-1].slice(0));for(r=c;h>r;r++)l.push(d.slice(0));for(s=o.length,l.path=e,l.temp=new Ext.draw.Path,r=0;s>r;r++){for(n=o[r],a=l[r],h=n.length,c=a.length,l.temp.commands.push("M"),i=c;h>i;i+=6)a.push(d[0],d[1],d[0],d[1],d[0],d[1]);for(u=l[l.length-1],d=[u[u.length-2],u[u.length-1]],i=h;c>i;i+=6)n.push(d[0],d[1],d[0],d[1],d[0],d[1]);for(r=0;r<a.length;r++)a[r]-=n[r];for(r=2;r<a.length;r+=6)l.temp.commands.push("C")}return[o,l]},compute:function(t,e,r){if(r>=1)return e.path;for(var i,n,a,s=0,o=t.length,l=0,h=e.temp.params,c=0;o>s;s++)for(n=t[s],a=e[s],i=n.length,l=0;i>l;l++)h[c++]=a[l]*r+n[l];return e.temp}},data:{compute:function(t,e,r,i){var n,a,s,o=t.length-1,l=e.length-1,h=Math.max(o,l);for(i&&i!==t||(i=[]),i.length=h+1,s=0;h>=s;s++)n=t[Math.min(s,o)],a=e[Math.min(s,l)],Ext.isNumber(n)?(Ext.isNumber(a)||(a=0),i[s]=(a-n)*r+n):i[s]=a;return i}},text:{compute:function(t,e,r){return t.substr(0,Math.round(t.length*(1-r)))+e.substr(Math.round(e.length*(1-r)))}},limited:"number",limited01:"number"}}),function(){if(!Ext.global.Float32Array){var t=function(t){if("number"==typeof t)this.length=t;else if("length"in t){this.length=t.length;for(var e=0,r=t.length;r>e;e++)this[e]=+t[e]}};t.prototype=[],Ext.global.Float32Array=t}}(),Ext.define("Ext.draw.Draw",{singleton:!0,radian:Math.PI/180,pi2:2*Math.PI,reflectFn:function(t){return t},rad:function(t){return t%360*this.radian},degrees:function(t){return t/this.radian%360},isBBoxIntersect:function(t,e,r){return r=r||0,Math.max(t.x,e.x)-r>Math.min(t.x+t.width,e.x+e.width)||Math.max(t.y,e.y)-r>Math.min(t.y+t.height,e.y+e.height)},isPointInBBox:function(t,e,r){return!!r&&t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},spline:function(t){var e,r,i,n,a,s,o=t.length,l=0,h=new Float32Array(t.length),c=new Float32Array(3*t.length-2);for(h[0]=0,h[o-1]=0,e=1;o-1>e;e++)h[e]=t[e+1]+t[e-1]-2*t[e]-h[e-1],l=1/(4-l),h[e]*=l;for(e=o-2;e>0;e--)l=3.732050807568877+48.248711305964385/(-13.928203230275537+Math.pow(.07179676972449123,e)),h[e]-=h[e+1]*l;for(s=t[0],i=s-h[0],e=0,r=0;o-1>e;r+=3)a=s,n=i,e++,s=t[e],i=s-h[e],c[r]=a,c[r+1]=(i+2*n)/3,c[r+2]=(2*i+n)/3;return c[r]=s,c},getAnchors:function(t,e,r,i,n,a,s){s=s||4;var o,l,h,c,u,d,g,f,p,m=Math.PI,x=m/2,y=Math.abs,b=Math.sin,v=Math.cos,E=Math.atan;return o=(r-t)/s,l=(n-r)/s,i>=e&&i>=a||e>=i&&a>=i?h=c=x:(h=E((r-t)/y(i-e)),i>e&&(h=m-h),c=E((n-r)/y(i-a)),i>a&&(c=m-c)),p=x-(h+c)%(2*m)/2,p>x&&(p-=m),h+=p,c+=p,u=r-o*b(h),d=i+o*v(h),g=r+l*b(c),f=i+l*v(c),(i>e&&e>d||e>i&&d>e)&&(u+=y(e-d)*(u-r)/(d-i),d=e),(i>a&&a>f||a>i&&f>a)&&(g-=y(a-f)*(g-r)/(f-i),f=a),{x1:u,y1:d,x2:g,y2:f}},smooth:function(t,e,r){var i,n,a,s,o,l,h,c,u,d,g=t.length,f=[],p=[];for(u=0;g-1>u&&(i=t[u],n=e[u],0!==u||(h=i,c=n,f.push(h),p.push(c),1!==g));u++){if(a=t[u+1],s=e[u+1],o=t[u+2],l=e[u+2],!Ext.isNumber(o)||!Ext.isNumber(l)){f.push(h,a,a),p.push(c,s,s);break}d=this.getAnchors(i,n,a,s,o,l,r),f.push(h,d.x1,a),p.push(c,d.y1,s),h=d.x2,c=d.y2}return{smoothX:f,smoothY:p}},beginUpdateIOS:Ext.os.is.iOS?function(){this.iosUpdateEl=Ext.getBody().createChild({"data-sticky":!0,style:"position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0,0,0,0.001); z-index: 100000"})}:Ext.emptyFn,endUpdateIOS:function(){this.iosUpdateEl=Ext.destroy(this.iosUpdateEl)}}),Ext.define("Ext.draw.gradient.Gradient",{requires:["Ext.draw.Color"],isGradient:!0,config:{stops:[]},applyStops:function(t){var e,r,i,n=[],a=t.length;for(e=0;a>e;e++)r=t[e],i=r.color,i&&i.isColor||(i=Ext.util.Color.fly(i||Ext.util.Color.NONE)),n.push({offset:Math.min(1,Math.max(0,"offset"in r?r.offset:r.position||0)),color:i.toString()});return n.sort(function(t,e){return t.offset-e.offset}),n},onClassExtended:function(t,e){!e.alias&&e.type&&(e.alias="gradient."+e.type)},constructor:function(t){this.initConfig(t)},generateGradient:Ext.emptyFn}),Ext.define("Ext.draw.gradient.GradientDefinition",{singleton:!0,urlStringRe:/^url\(#([\w\-]+)\)$/,gradients:{},add:function(t){var e,r,i,n=this.gradients;for(e=0,r=t.length;r>e;e++)i=t[e],Ext.isString(i.id)&&(n[i.id]=i)},get:function(t){var e,r=this.gradients,i=t.match(this.urlStringRe);return i&&i[1]&&(e=r[i[1]])?e||t:t}}),Ext.define("Ext.draw.sprite.AttributeParser",{singleton:!0,attributeRe:/^url\(#([a-zA-Z\-]+)\)$/,requires:["Ext.draw.Color","Ext.draw.gradient.GradientDefinition"],"default":Ext.identityFn,string:function(t){return String(t)},number:function(t){return Ext.isNumber(+t)?t:void 0},angle:function(t){return Ext.isNumber(t)?(t%=2*Math.PI,t<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t):void 0},data:function(t){return Ext.isArray(t)?t.slice():t instanceof Float32Array?new Float32Array(t):void 0},bool:function(t){return!!t},color:function(t){if(t&&t.isColor)return t.toString();if(t&&t.isGradient)return t;if(!t)return Ext.util.Color.NONE;if(Ext.isString(t)){if("url"!==t.substr(0,3))return Ext.util.Color.fly(t).toString();if(t=Ext.draw.gradient.GradientDefinition.get(t),Ext.isString(t))return t}return"linear"===t.type?Ext.create("Ext.draw.gradient.Linear",t):"radial"===t.type?Ext.create("Ext.draw.gradient.Radial",t):"pattern"===t.type?Ext.create("Ext.draw.gradient.Pattern",t):Ext.util.Color.NONE},limited:function(t,e){return function(r){return r=+r,Ext.isNumber(r)?Math.min(Math.max(r,t),e):void 0}},limited01:function(t){return t=+t,Ext.isNumber(t)?Math.min(Math.max(t,0),1):void 0},enums:function(){var t,e,r={},i=Array.prototype.slice.call(arguments,0);for(t=0,e=i.length;e>t;t++)r[i[t]]=!0;return function(t){return t in r?t:void 0}}}),Ext.define("Ext.draw.sprite.AttributeDefinition",{requires:["Ext.draw.sprite.AttributeParser","Ext.draw.sprite.AnimationParser"],config:{defaults:{$value:{},lazy:!0},aliases:{},animationProcessors:{},processors:{$value:{},lazy:!0},dirtyTriggers:{},triggers:{},updaters:{}},inheritableStatics:{processorFactoryRe:/^(\w+)\(([\w\-,]*)\)$/},spriteClass:null,constructor:function(t){var e=this;e.initConfig(t)},applyDefaults:function(t,e){return e=Ext.apply(e||{},this.normalize(t))},applyAliases:function(t,e){return Ext.apply(e||{},t)},applyProcessors:function(t,e){this.getAnimationProcessors();var r,i,n,a,s=e||{},o=Ext.draw.sprite.AttributeParser,l=this.self.processorFactoryRe,h={};for(i in t)a=t[i],"string"==typeof a&&(n=a.match(l),n?a=o[n[1]].apply(o,n[2].split(",")):o[a]&&(h[i]=a,r=!0,a=o[a])),Ext.isFunction(a)||Ext.raise(this.spriteClass.$className+": processor '"+i+"' has not been found."),s[i]=a;return r&&this.setAnimationProcessors(h),s},applyAnimationProcessors:function(t,e){var r,i,n=Ext.draw.sprite.AnimationParser;e||(e={});for(r in t)if(i=t[r],"none"===i)e[r]=null;else if(!Ext.isString(i)||r in e)Ext.isObject(i)&&(e[r]=i);else if(i in n){for(;Ext.isString(n[i]);)i=n[i];e[r]=n[i]}return e},updateDirtyTriggers:function(t){this.setTriggers(t)},applyTriggers:function(t,e){e||(e={});for(var r in t)e[r]=t[r].split(",");return e},applyUpdaters:function(t,e){return Ext.apply(e||{},t)},batchedNormalize:function(t,e){if(!t)return{};var r,i,n,a,s,o,l,h,c,u=this.getProcessors(),d=this.getAliases(),g=t.translation||t.translate,f={};s="rotation"in t?t.rotation:"rotate"in t?t.rotate:void 0,o="scaling"in t?t.scaling:"scale"in t?t.scale:void 0,"undefined"!=typeof o&&(Ext.isNumber(o)?(f.scalingX=o,f.scalingY=o):("x"in o&&(f.scalingX=o.x),"y"in o&&(f.scalingY=o.y),"centerX"in o&&(f.scalingCenterX=o.centerX),"centerY"in o&&(f.scalingCenterY=o.centerY))),"undefined"!=typeof s&&(Ext.isNumber(s)?(s=Ext.draw.Draw.rad(s),f.rotationRads=s):("rads"in s?f.rotationRads=s.rads:"degrees"in s&&(f.rotationRads=Ext.isArray(s.degrees)?Ext.Array.map(s.degrees,function(t){return Ext.draw.Draw.rad(t)}):Ext.draw.Draw.rad(s.degrees)),"centerX"in s&&(f.rotationCenterX=s.centerX),"centerY"in s&&(f.rotationCenterY=s.centerY))),"undefined"!=typeof g&&("x"in g&&(f.translationX=g.x),"y"in g&&(f.translationY=g.y)),"matrix"in t&&(l=Ext.draw.Matrix.create(t.matrix),c=l.split(),f.matrix=l,f.rotationRads=c.rotation,f.rotationCenterX=0,f.rotationCenterY=0,f.scalingX=c.scaleX,f.scalingY=c.scaleY,f.scalingCenterX=0,f.scalingCenterY=0,f.translationX=c.translateX,f.translationY=c.translateY);for(n in t)if(a=t[n],"undefined"!=typeof a)if(Ext.isArray(a))if(n in d&&(n=d[n]),n in u)for(f[n]=[],r=0,i=a.length;i>r;r++)h=u[n].call(this,a[r]),"undefined"!=typeof h&&(f[n][r]=h);else e&&(f[n]=a);else n in d&&(n=d[n]),n in u?(a=u[n].call(this,a),"undefined"!=typeof a&&(f[n]=a)):e&&(f[n]=a);return f},normalize:function(t,e){if(!t)return{};var r,i,n,a,s,o,l=this.getProcessors(),h=this.getAliases(),c=t.translation||t.translate,u={};n="rotation"in t?t.rotation:"rotate"in t?t.rotate:void 0,a="scaling"in t?t.scaling:"scale"in t?t.scale:void 0,c&&("x"in c&&(u.translationX=c.x),"y"in c&&(u.translationY=c.y)),"undefined"!=typeof a&&(Ext.isNumber(a)?(u.scalingX=a,u.scalingY=a):("x"in a&&(u.scalingX=a.x),"y"in a&&(u.scalingY=a.y),"centerX"in a&&(u.scalingCenterX=a.centerX),"centerY"in a&&(u.scalingCenterY=a.centerY))),"undefined"!=typeof n&&(Ext.isNumber(n)?(n=Ext.draw.Draw.rad(n),u.rotationRads=n):("rads"in n?u.rotationRads=n.rads:"degrees"in n&&(u.rotationRads=Ext.draw.Draw.rad(n.degrees)),"centerX"in n&&(u.rotationCenterX=n.centerX),"centerY"in n&&(u.rotationCenterY=n.centerY))),"matrix"in t&&(s=Ext.draw.Matrix.create(t.matrix),o=s.split(),u.matrix=s,u.rotationRads=o.rotation,u.rotationCenterX=0,u.rotationCenterY=0,u.scalingX=o.scaleX,u.scalingY=o.scaleY,u.scalingCenterX=0,u.scalingCenterY=0,u.translationX=o.translateX,u.translationY=o.translateY);for(r in t)i=t[r],"undefined"!=typeof i&&(r in h&&(r=h[r]),r in l?(i=l[r].call(this,i),"undefined"!=typeof i&&(u[r]=i)):e&&(u[r]=i));return u},setBypassingNormalization:function(t,e,r){return e.pushDown(t,r)},set:function(t,e,r){return r=this.normalize(r),this.setBypassingNormalization(t,e,r)}}),Ext.define("Ext.draw.Matrix",{isMatrix:!0,statics:{createAffineMatrixFromTwoPair:function(t,e,r,i,n,a,s,o){var l=r-t,h=i-e,c=s-n,u=o-a,d=1/(l*l+h*h),g=l*c+h*u,f=c*h-l*u,p=-g*t-f*e,m=f*t-g*e;return new this(g*d,-f*d,f*d,g*d,p*d+n,m*d+a)},createPanZoomFromTwoPair:function(t,e,r,i,n,a,s,o){if(2===arguments.length)return this.createPanZoomFromTwoPair.apply(this,t.concat(e));var l=r-t,h=i-e,c=.5*(t+r),u=.5*(e+i),d=s-n,g=o-a,f=.5*(n+s),p=.5*(a+o),m=l*l+h*h,x=d*d+g*g,y=Math.sqrt(x/m);return new this(y,0,0,y,f-y*c,p-y*u)},fly:function(){var t=null,e=function(e){return t.elements=e,t};return function(r){return t||(t=new Ext.draw.Matrix),t.elements=r,Ext.draw.Matrix.fly=e,t}}(),create:function(t){return t instanceof this?t:new this(t)}},constructor:function(t,e,r,i,n,a){this.elements=t&&6===t.length?t.slice():void 0!==t?[t,e,r,i,n,a]:[1,0,0,1,0,0]},prepend:function(t,e,r,i,n,a){var s=this.elements,o=s[0],l=s[1],h=s[2],c=s[3],u=s[4],d=s[5];return s[0]=t*o+r*l,s[1]=e*o+i*l,s[2]=t*h+r*c,s[3]=e*h+i*c,s[4]=t*u+r*d+n,s[5]=e*u+i*d+a,this},prependMatrix:function(t){return this.prepend.apply(this,t.elements)},append:function(t,e,r,i,n,a){var s=this.elements,o=s[0],l=s[1],h=s[2],c=s[3],u=s[4],d=s[5];return s[0]=t*o+e*h,s[1]=t*l+e*c,s[2]=r*o+i*h,s[3]=r*l+i*c,s[4]=n*o+a*h+u,s[5]=n*l+a*c+d,this},appendMatrix:function(t){return this.append.apply(this,t.elements)},set:function(t,e,r,i,n,a){var s=this.elements;return s[0]=t,s[1]=e,s[2]=r,s[3]=i,s[4]=n,s[5]=a,this},inverse:function(t){var e=this.elements,r=e[0],i=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=1/(r*a-i*n);return r*=l,i*=l,n*=l,a*=l,t?(t.set(a,-i,-n,r,n*o-a*s,i*s-r*o),t):new Ext.draw.Matrix(a,-i,-n,r,n*o-a*s,i*s-r*o)},translate:function(t,e,r){return r?this.prepend(1,0,0,1,t,e):this.append(1,0,0,1,t,e)},scale:function(t,e,r,i,n){var a=this;return null==e&&(e=t),void 0===r&&(r=0),void 0===i&&(i=0),n?a.prepend(t,0,0,e,r-r*t,i-i*e):a.append(t,0,0,e,r-r*t,i-i*e)},rotate:function(t,e,r,i){var n=this,a=Math.cos(t),s=Math.sin(t);return e=e||0,r=r||0,i?n.prepend(a,s,-s,a,e-a*e+r*s,r-a*r-e*s):n.append(a,s,-s,a,e-a*e+r*s,r-a*r-e*s)},rotateFromVector:function(t,e,r){var i=this,n=Math.sqrt(t*t+e*e),a=t/n,s=e/n;return r?i.prepend(a,s,-s,a,0,0):i.append(a,s,-s,a,0,0)},clone:function(){return new Ext.draw.Matrix(this.elements)},flipX:function(){return this.append(-1,0,0,1,0,0)},flipY:function(){return this.append(1,0,0,-1,0,0)},skewX:function(t){return this.append(1,0,Math.tan(t),1,0,0)},skewY:function(t){return this.append(1,Math.tan(t),0,1,0,0)},shearX:function(t){return this.append(1,0,t,1,0,0)},shearY:function(t){return this.append(1,t,0,1,0,0)},reset:function(){return this.set(1,0,0,1,0,0)},precisionCompensate:function(t,e){var r=this.elements,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],l=r[5],h=n*a-i*s;e.b=t*n/i,e.c=t*a/s,e.d=t,e.xx=i/t,e.yy=s/t,e.dx=(l*i*a-o*i*s)/h/t,e.dy=(o*n*s-l*i*s)/h/t},precisionCompensateRect:function(t,e){var r=this.elements,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],l=r[5],h=a/i;e.b=t*n/i,e.c=t*h,e.d=t*s/i,e.xx=i/t,e.yy=i/t,e.dx=(l*a-o*s)/(n*h-s)/t,e.dy=-(l*i-o*n)/(n*h-s)/t},x:function(t,e){var r=this.elements;return t*r[0]+e*r[2]+r[4]},y:function(t,e){var r=this.elements;return t*r[1]+e*r[3]+r[5]},get:function(t,e){return+this.elements[t+2*e].toFixed(4)},transformPoint:function(t){var e,r,i=this.elements;return t.isPoint?(e=t.x,r=t.y):(e=t[0],r=t[1]),[e*i[0]+r*i[2]+i[4],e*i[1]+r*i[3]+i[5]]},transformBBox:function(t,e,r){var i,n,a,s=this.elements,o=t.x,l=t.y,h=.5*t.width,c=.5*t.height,u=s[0],d=s[1],g=s[2],f=s[3],p=o+h,m=l+c;return e?(h-=e,c-=e,a=[Math.sqrt(s[0]*s[0]+s[2]*s[2]),Math.sqrt(s[1]*s[1]+s[3]*s[3])],i=Math.abs(h*u)+Math.abs(c*g)+Math.abs(a[0]*e),n=Math.abs(h*d)+Math.abs(c*f)+Math.abs(a[1]*e)):(i=Math.abs(h*u)+Math.abs(c*g),n=Math.abs(h*d)+Math.abs(c*f)),r||(r={}),r.x=p*u+m*g+s[4]-i,r.y=p*d+m*f+s[5]-n,r.width=i+i,r.height=n+n,r},transformList:function(t){var e,r,i=this.elements,n=i[0],a=i[2],s=i[4],o=i[1],l=i[3],h=i[5],c=t.length;for(r=0;c>r;r++)e=t[r],t[r]=[e[0]*n+e[1]*a+s,e[0]*o+e[1]*l+h];return t},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},isEqual:function(t){var e=t&&t.isMatrix?t.elements:t,r=this.elements;return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]},equals:function(t){return this.isEqual(t)},toArray:function(){var t=this.elements;return[t[0],t[2],t[4],t[1],t[3],t[5]]},toVerticalArray:function(){return this.elements.slice()},toString:function(){var t=this;return[t.get(0,0),t.get(0,1),t.get(1,0),t.get(1,1),t.get(2,0),t.get(2,1)].join(",")},toContext:function(t){return t.transform.apply(t,this.elements),this},toSvg:function(){var t=this.elements;return"matrix("+t[0].toFixed(9)+","+t[1].toFixed(9)+","+t[2].toFixed(9)+","+t[3].toFixed(9)+","+t[4].toFixed(9)+","+t[5].toFixed(9)+")"},getScaleX:function(){var t=this.elements;return Math.sqrt(t[0]*t[0]+t[2]*t[2])},getScaleY:function(){var t=this.elements;return Math.sqrt(t[1]*t[1]+t[3]*t[3])},getXX:function(){return this.elements[0]},getXY:function(){return this.elements[1]},getYX:function(){return this.elements[2]},getYY:function(){return this.elements[3]},getDX:function(){return this.elements[4]},getDY:function(){return this.elements[5]},split:function(){var t=this.elements,e=t[0],r=t[1],i=t[3],n={translateX:t[4],translateY:t[5]};return n.rotate=n.rotation=Math.atan2(r,e),n.scaleX=e/Math.cos(n.rotate),n.scaleY=i/e*n.scaleX,n}},function(){function t(t,e,r){t[e]={get:function(){return this.elements[r]},set:function(t){this.elements[r]=t}}}if(Object.defineProperties){var e={};t(e,"a",0),t(e,"b",1),t(e,"c",2),t(e,"d",3),t(e,"e",4),t(e,"f",5),Object.defineProperties(this.prototype,e)}this.prototype.multiply=this.prototype.appendMatrix}),Ext.define("Ext.draw.modifier.Modifier",{mixins:{observable:"Ext.mixin.Observable"},config:{lower:null,upper:null,sprite:null},constructor:function(t){this.mixins.observable.constructor.call(this,t)},updateUpper:function(t){t&&t.setLower(this)},updateLower:function(t){t&&t.setUpper(this)},prepareAttributes:function(t){this._lower&&this._lower.prepareAttributes(t)},popUp:function(t,e){this._upper?this._upper.popUp(t,e):Ext.apply(t,e)},pushDown:function(t,e){if(this._lower)return this._lower.pushDown(t,e);for(var r in e)e[r]===t[r]&&delete e[r];return e}}),Ext.define("Ext.draw.modifier.Target",{requires:["Ext.draw.Matrix"],extend:"Ext.draw.modifier.Modifier",alias:"modifier.target",statics:{uniqueId:0},prepareAttributes:function(t){this._lower&&this._lower.prepareAttributes(t),t.attributeId="attribute-"+Ext.draw.modifier.Target.uniqueId++,t.hasOwnProperty("canvasAttributes")||(t.bbox={plain:{dirty:!0},transform:{dirty:!0}},t.dirty=!0,t.pendingUpdaters={},t.canvasAttributes={},t.matrix=new Ext.draw.Matrix,t.inverseMatrix=new Ext.draw.Matrix)},applyChanges:function(t,e){Ext.apply(t,e);var r,i,n,a,s,o,l,h,c,u=this.getSprite(),d=t.pendingUpdaters,g=u.self.def.getTriggers();for(a in e)s=!0,(r=g[a])&&u.scheduleUpdaters(t,r,[a]),t.template&&e.removeFromInstance&&e.removeFromInstance[a]&&delete t[a];if(s){if(d.canvas)for(o=d.canvas,delete d.canvas,l=0,c=o.length;c>l;l++)a=o[l],t.canvasAttributes[a]=t[a];if(t.hasOwnProperty("children"))for(i=t.children,l=0,c=i.length;c>l;l++){if(n=i[l],Ext.apply(n.pendingUpdaters,d),o)for(h=0;h<o.length;h++)a=o[h],n.canvasAttributes[a]=n[a];u.callUpdaters(n)}u.setDirty(!0),u.callUpdaters(t)}},popUp:function(t,e){this.applyChanges(t,e)},pushDown:function(t,e){return this._lower&&(e=this._lower.pushDown(t,e)),this.applyChanges(t,e),e}}),Ext.define("Ext.draw.TimingFunctions",function(){function t(t){return function(e){return a(e,t)}}function e(t,e){d[t+"In"]=function(t){return e(t)},d[t+"Out"]=function(t){return 1-e(1-t)},d[t+"InOut"]=function(t){return.5>=t?e(2*t)/2:(2-e(2*(1-t)))/2}}var r,i,n,a=Math.pow,s=Math.sin,o=Math.cos,l=Math.sqrt,h=Math.PI,c=["quad","cube","quart","quint"],u={pow:function(t,e){return a(t,e||6)},expo:function(t){return a(2,8*(t-1))},circ:function(t){return 1-l(1-t*t)},sine:function(t){return 1-s((1-t)*h/2)},back:function(t,e){return e=e||1.616,t*t*((e+1)*t-e)},bounce:function(t){for(var e=0,r=1;1;e+=r,r/=2)if(t>=(7-4*e)/11)return r*r-a((11-6*e-11*t)/4,2)},elastic:function(t,e){return a(2,10*--t)*o(20*t*h*(e||1)/3)}},d={};for(n=0,i=c.length;i>n;++n)u[c[n]]=t(n+2);for(r in u)e(r,u[r]);return d.linear=Ext.identityFn,d.easeIn=d.quadIn,d.easeOut=d.quadOut,d.easeInOut=d.quadInOut,{singleton:!0,easingMap:d}},function(t){Ext.apply(t,t.easingMap)}),Ext.define("Ext.draw.Animator",{uses:["Ext.draw.Draw"],singleton:!0,frameCallbacks:{},frameCallbackId:0,scheduled:0,frameStartTimeOffset:Ext.now(),animations:[],running:!1,animationTime:function(){return Ext.AnimationQueue.frameStartTime-this.frameStartTimeOffset},add:function(t){var e=this;e.contains(t)||(e.animations.push(t),e.ignite(),"fireEvent"in t&&t.fireEvent("animationstart",t))},remove:function(t){for(var e=this,r=e.animations,i=0,n=r.length;n>i;++i)if(r[i]===t)return r.splice(i,1),void("fireEvent"in t&&t.fireEvent("animationend",t))},contains:function(t){return Ext.Array.indexOf(this.animations,t)>-1},empty:function(){return 0===this.animations.length},step:function(t){for(var e,r=this,i=r.animations,n=0,a=i.length;a>n;n++)e=i[n],e.step(t),e.animating||(i.splice(n,1),n--,a--,e.fireEvent&&e.fireEvent("animationend",e))},schedule:function(t,e){e=e||this;var r="frameCallback"+this.frameCallbackId++;return Ext.isString(t)&&(t=e[t]),Ext.draw.Animator.frameCallbacks[r]={fn:t,scope:e,once:!0},this.scheduled++,Ext.draw.Animator.ignite(),r},scheduleIf:function(t,e){e=e||this;var r,i,n=Ext.draw.Animator.frameCallbacks;Ext.isString(t)&&(t=e[t]);for(i in n)if(r=n[i],r.once&&r.fn===t&&r.scope===e)return null;return this.schedule(t,e)},cancel:function(t){Ext.draw.Animator.frameCallbacks[t]&&Ext.draw.Animator.frameCallbacks[t].once&&(this.scheduled--,delete Ext.draw.Animator.frameCallbacks[t],Ext.draw.Draw.endUpdateIOS())},clear:function(){this.animations.length=0,this.running=!1,Ext.draw.Animator.frameCallbacks={},Ext.draw.Draw.endUpdateIOS()},addFrameCallback:function(t,e){e=e||this,Ext.isString(t)&&(t=e[t]);var r="frameCallback"+this.frameCallbackId++;return Ext.draw.Animator.frameCallbacks[r]={fn:t,scope:e},r},removeFrameCallback:function(t){delete Ext.draw.Animator.frameCallbacks[t]},fireFrameCallbacks:function(){var t,e,r,i=this.frameCallbacks;for(t in i)r=i[t],e=r.fn,Ext.isString(e)&&(e=r.scope[e]),e.call(r.scope),i[t]&&r.once&&(this.scheduled--,delete i[t])},handleFrame:function(){var t=this;t.step(t.animationTime()),t.fireFrameCallbacks(),!t.scheduled&&t.empty()&&(Ext.AnimationQueue.stop(t.handleFrame,t),t.running=!1,Ext.draw.Draw.endUpdateIOS())},ignite:function(){this.running||(this.running=!0,Ext.AnimationQueue.start(this.handleFrame,this),Ext.draw.Draw.beginUpdateIOS())}}),Ext.define("Ext.draw.modifier.Animation",{requires:["Ext.draw.TimingFunctions","Ext.draw.Animator"],extend:"Ext.draw.modifier.Modifier",alias:"modifier.animation",config:{easing:Ext.identityFn,duration:0,customEasings:{},customDurations:{}},constructor:function(t){var e=this;e.anyAnimation=e.anySpecialAnimations=!1,e.animating=0,e.animatingPool=[],e.callParent([t])},prepareAttributes:function(t){t.hasOwnProperty("timers")||(t.animating=!1,t.timers={},t.animationOriginal=Ext.Object.chain(t),t.animationOriginal.prototype=t),this._lower&&this._lower.prepareAttributes(t.animationOriginal)},updateSprite:function(t){this.setConfig(t.config.fx)},updateDuration:function(t){this.anyAnimation=t>0},applyEasing:function(t){return"string"==typeof t&&(t=Ext.draw.TimingFunctions.easingMap[t]),t},applyCustomEasings:function(t,e){e=e||{};var r,i,n,a,s,o;for(i in t)for(r=!0,a=t[i],n=i.split(","),"string"==typeof a&&(a=Ext.draw.TimingFunctions.easingMap[a]),s=0,o=n.length;o>s;s++)e[n[s]]=a;return r&&(this.anySpecialAnimations=r),e},setEasingOn:function(t,e){t=Ext.Array.from(t).slice();for(var r={},i=t.length,n=0;i>n;n++)r[t[n]]=e;this.setCustomEasings(r)},clearEasingOn:function(t){t=Ext.Array.from(t,!0);for(var e=0,r=t.length;r>e;e++)delete this._customEasings[t[e]]},applyCustomDurations:function(t,e){e=e||{};var r,i,n,a,s,o;for(i in t)for(r=!0,n=t[i],a=i.split(","),s=0,o=a.length;o>s;s++)e[a[s]]=n;return r&&(this.anySpecialAnimations=r),e},setDurationOn:function(t,e){t=Ext.Array.from(t).slice();for(var r={},i=0,n=t.length;n>i;i++)r[t[i]]=e;this.setCustomDurations(r)},clearDurationOn:function(t){t=Ext.Array.from(t,!0);for(var e=0,r=t.length;r>e;e++)delete this._customDurations[t[e]]},setAnimating:function(t,e){var r=this,i=r.animatingPool;if(t.animating!==e)if(t.animating=e,e)i.push(t),0===r.animating&&Ext.draw.Animator.add(r),r.animating++;else{for(var n=i.length;n--;)i[n]===t&&i.splice(n,1);r.animating=i.length}},setAttrs:function(t,e){var r,i,n,a,s,o,l,h=this,c=t.timers,u=h._sprite.self.def._animationProcessors,d=h._easing,g=h._duration,f=h._customDurations,p=h._customEasings,m=h.anySpecialAnimations,x=h.anyAnimation||m,y=t.animationOriginal,b=!1;if(!x){for(i in e)t[i]===e[i]?delete e[i]:t[i]=e[i],delete y[i],delete c[i];return e}for(i in e){if(n=e[i],a=t[i],n!==a&&void 0!==a&&null!==a&&(s=u[i])){if(o=d,l=g,m&&(i in p&&(o=p[i]),i in f&&(l=f[i])),(a&&a.isGradient||n&&n.isGradient)&&(l=0),l){if(c[i]||(c[i]={}),r=c[i],r.start=0,r.easing=o,r.duration=l,r.compute=s.compute,r.serve=s.serve||Ext.identityFn,r.remove=e.removeFromInstance&&e.removeFromInstance[i],s.parseInitial){var v=s.parseInitial(a,n);r.source=v[0],r.target=v[1]}else s.parse?(r.source=s.parse(a),r.target=s.parse(n)):(r.source=a,r.target=n);y[i]=n,delete e[i],b=!0;continue}delete y[i]}else delete y[i];delete c[i]}return b&&!t.animating&&h.setAnimating(t,!0),e},updateAttributes:function(t){if(!t.animating)return{};var e,r,i,n={},a=!1,s=t.timers,o=t.animationOriginal,l=Ext.draw.Animator.animationTime();if(t.lastUpdate===l)return null;for(e in s)r=s[e],r.start?i=(l-r.start)/r.duration:(r.start=l,i=0),i>=1?(n[e]=o[e],delete o[e],s[e].remove&&(n.removeFromInstance=n.removeFromInstance||{},n.removeFromInstance[e]=!0),delete s[e]):(n[e]=r.serve(r.compute(r.source,r.target,r.easing(i),t[e])),a=!0);return t.lastUpdate=l,this.setAnimating(t,a),n},pushDown:function(t,e){return e=this.callParent([t.animationOriginal,e]),this.setAttrs(t,e)},popUp:function(t,e){return t=t.prototype,e=this.setAttrs(t,e),this._upper?this._upper.popUp(t,e):Ext.apply(t,e)},step:function(t){for(var e,r,i=this,n=i.animatingPool.slice(),a=n.length,s=0;a>s;s++)e=n[s],r=i.updateAttributes(e),r&&i._upper&&i._upper.popUp(e,r)},stop:function(){this.step();var t,e,r=this,i=r.animatingPool;for(t=0,e=i.length;e>t;t++)i[t].animating=!1;r.animatingPool.length=0,r.animating=0,Ext.draw.Animator.remove(r)},destroy:function(){Ext.draw.Animator.remove(this),this.callParent()}}),Ext.define("Ext.draw.modifier.Highlight",{extend:"Ext.draw.modifier.Modifier",alias:"modifier.highlight",config:{enabled:!1,highlightStyle:null},preFx:!0,applyHighlightStyle:function(t,e){return e=e||{},this.getSprite()?Ext.apply(e,this.getSprite().self.def.normalize(t)):Ext.apply(e,t),e},prepareAttributes:function(t){t.hasOwnProperty("highlightOriginal")||(t.highlighted=!1,t.highlightOriginal=Ext.Object.chain(t),t.highlightOriginal.prototype=t,t.highlightOriginal.removeFromInstance={}),this._lower&&this._lower.prepareAttributes(t.highlightOriginal)},updateSprite:function(t,e){t&&(this.getHighlightStyle()&&(this._highlightStyle=t.self.def.normalize(this.getHighlightStyle())),this.setHighlightStyle(t.config.highlight)),t.self.def.setConfig({defaults:{highlighted:!1},processors:{highlighted:"bool"}}),this.setSprite(t)},filterChanges:function(t,e){var r,i=this,n=t.highlightOriginal,a=i.getHighlightStyle();if(t.highlighted)for(r in e)a.hasOwnProperty(r)&&(n[r]=e[r],delete e[r]);for(r in e)"highlighted"!==r&&n[r]===e[r]&&delete e[r];return e},pushDown:function(t,e){var r,i,n,a,s=this.getHighlightStyle(),o=t.highlightOriginal,l=o.removeFromInstance;if(e.hasOwnProperty("highlighted")){if(r=e.highlighted,delete e.highlighted,this._lower&&(e=this._lower.pushDown(o,e)),e=this.filterChanges(t,e),r!==t.highlighted){if(r)for(i in s)i in e?o[i]=e[i]:(n=t.template&&t.template.ownAttr,n&&!t.prototype.hasOwnProperty(i)?(l[i]=!0,o[i]=n.animationOriginal[i]):(a=o.timers[i],a&&a.remove&&(l[i]=!0),o[i]=t[i])),o[i]!==s[i]&&(e[i]=s[i]);else{for(i in s)i in e||(e[i]=o[i]),delete o[i];e.removeFromInstance=e.removeFromInstance||{},Ext.apply(e.removeFromInstance,l),o.removeFromInstance={}}e.highlighted=r}}else this._lower&&(e=this._lower.pushDown(o,e)),e=this.filterChanges(t,e);return e},popUp:function(t,e){e=this.filterChanges(t,e),Ext.draw.modifier.Modifier.prototype.popUp.call(this,t,e)}}),Ext.define("Ext.draw.sprite.Sprite",{alias:"sprite.sprite",mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.draw.Draw","Ext.draw.gradient.Gradient","Ext.draw.sprite.AttributeDefinition","Ext.draw.modifier.Target","Ext.draw.modifier.Animation","Ext.draw.modifier.Highlight"],isSprite:!0,statics:{defaultHitTestOptions:{fill:!0,stroke:!0},debug:!1},inheritableStatics:{def:{processors:{debug:"default",strokeStyle:"color",fillStyle:"color",strokeOpacity:"limited01",fillOpacity:"limited01",lineWidth:"number",lineCap:"enums(butt,round,square)",lineJoin:"enums(round,bevel,miter)",lineDash:"data",lineDashOffset:"number",miterLimit:"number",shadowColor:"color",shadowOffsetX:"number",shadowOffsetY:"number",shadowBlur:"number",globalAlpha:"limited01",globalCompositeOperation:"enums(source-over,destination-over,source-in,destination-in,source-out,destination-out,source-atop,destination-atop,lighter,xor,copy)",hidden:"bool",transformFillStroke:"bool",zIndex:"number",translationX:"number",translationY:"number",rotationRads:"number",rotationCenterX:"number",rotationCenterY:"number",scalingX:"number",scalingY:"number",scalingCenterX:"number",scalingCenterY:"number",constrainGradients:"bool"},aliases:{stroke:"strokeStyle",fill:"fillStyle",color:"fillStyle","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","text-anchor":"textAlign",opacity:"globalAlpha",translateX:"translationX",translateY:"translationY",rotateRads:"rotationRads",rotateCenterX:"rotationCenterX",
rotateCenterY:"rotationCenterY",scaleX:"scalingX",scaleY:"scalingY",scaleCenterX:"scalingCenterX",scaleCenterY:"scalingCenterY"},defaults:{hidden:!1,zIndex:0,strokeStyle:"none",fillStyle:"none",lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,strokeOpacity:1,fillOpacity:1,transformFillStroke:!1,translationX:0,translationY:0,rotationRads:0,rotationCenterX:null,rotationCenterY:null,scalingX:1,scalingY:1,scalingCenterX:null,scalingCenterY:null,constrainGradients:!1},triggers:{zIndex:"zIndex",globalAlpha:"canvas",globalCompositeOperation:"canvas",transformFillStroke:"canvas",strokeStyle:"canvas",fillStyle:"canvas",strokeOpacity:"canvas",fillOpacity:"canvas",lineWidth:"canvas",lineCap:"canvas",lineJoin:"canvas",lineDash:"canvas",lineDashOffset:"canvas",miterLimit:"canvas",shadowColor:"canvas",shadowOffsetX:"canvas",shadowOffsetY:"canvas",shadowBlur:"canvas",translationX:"transform",translationY:"transform",rotationRads:"transform",rotationCenterX:"transform",rotationCenterY:"transform",scalingX:"transform",scalingY:"transform",scalingCenterX:"transform",scalingCenterY:"transform",constrainGradients:"canvas"},updaters:{bbox:"bboxUpdater",zIndex:function(t){t.dirtyZIndex=!0},transform:function(t){t.dirtyTransform=!0,t.bbox.transform.dirty=!0}}}},config:{parent:null,surface:null},onClassExtended:function(t,e){var r,i=t.superclass.self.def.initialConfig,n=e.inheritableStatics&&e.inheritableStatics.def;n?(r=Ext.Object.merge({},i,n),t.def=new Ext.draw.sprite.AttributeDefinition(r),delete e.inheritableStatics.def):t.def=new Ext.draw.sprite.AttributeDefinition(i),t.def.spriteClass=t},constructor:function(t){if("Ext.draw.sprite.Sprite"===Ext.getClassName(this))throw"Ext.draw.sprite.Sprite is an abstract class";var e,r=this,i=r.self.def,n=i.getDefaults();t=Ext.isObject(t)?t:{},r.id=t.id||Ext.id(null,"ext-sprite-"),r.attr={},r.mixins.observable.constructor.apply(r,arguments),e=Ext.Array.from(t.modifiers,!0),r.prepareModifiers(e),r.initializeAttributes(),r.setAttributes(n,!0);var a=i.getProcessors();for(var s in t)s in a&&r["get"+s.charAt(0).toUpperCase()+s.substr(1)]&&Ext.raise("The "+r.$className+" sprite has both a config and an attribute with the same name: "+s+".");r.setAttributes(t)},getDirty:function(){return this.attr.dirty},setDirty:function(t){if(this.attr.dirty=t,t){var e=this.getParent();e&&e.setDirty(!0)}},addModifier:function(t,e){var r=this;return t instanceof Ext.draw.modifier.Modifier||(t=Ext.factory(t,null,null,"modifier")),t.setSprite(r),t.preFx||t.config&&t.config.preFx?(r.fx._lower&&r.fx._lower.setUpper(t),t.setUpper(r.fx)):(r.topModifier._lower.setUpper(t),t.setUpper(r.topModifier)),e&&r.initializeAttributes(),t},prepareModifiers:function(t){var e,r,i=this;for(i.topModifier=new Ext.draw.modifier.Target({sprite:i}),i.fx=new Ext.draw.modifier.Animation({sprite:i}),i.fx.setUpper(i.topModifier),e=0,r=t.length;r>e;e++)i.addModifier(t[e],!1)},getAnimation:function(){return this.fx},setAnimation:function(t){this.fx.setConfig(t)},initializeAttributes:function(){this.topModifier.prepareAttributes(this.attr)},callUpdaters:function(t){t=t||this.attr;var e,r,i,n=this,a=t.pendingUpdaters,s=n.self.def.getUpdaters(),o=!1,l=!1;n.callUpdaters=Ext.emptyFn;do{o=!1;for(r in a)o=!0,e=a[r],delete a[r],i=s[r],"string"==typeof i&&(i=n[i]),i&&i.call(n,t,e);l=l||o}while(o);delete n.callUpdaters,l&&n.setDirty(!0)},callUpdater:function(t,e,r){this.scheduleUpdater(t,e,r),this.callUpdaters(t)},scheduleUpdaters:function(t,e,r){var i;if(t=t||this.attr,r)for(var n=0,a=e.length;a>n;n++)i=e[n],this.scheduleUpdater(t,i,r);else for(i in e)r=e[i],this.scheduleUpdater(t,i,r)},scheduleUpdater:function(t,e,r){r=r||[],t=t||this.attr;var i=t.pendingUpdaters;e in i?r.length&&(i[e]=Ext.Array.merge(i[e],r)):i[e]=r},setAttributes:function(t,e,r){var i,n,a,s,o=this,l=o.attr;if(o.isDestroyed&&Ext.Error.raise("Setting attributes of a destroyed sprite."),e)if(r)o.topModifier.pushDown(l,t);else{s={};for(n in t)a=t[n],a!==l[n]&&(s[n]=a);o.topModifier.pushDown(l,s)}else i=o.self.def.normalize(t),o.topModifier.pushDown(l,i)},setAttributesBypassingNormalization:function(t,e){return this.setAttributes(t,!0,e)},bboxUpdater:function(t){var e=0!==t.rotationRads,r=1!==t.scalingX||1!==t.scalingY,i=null===t.rotationCenterX||null===t.rotationCenterY,n=null===t.scalingCenterX||null===t.scalingCenterY;t.bbox.plain.dirty=!0,t.bbox.transform.dirty=!0,(e&&i||r&&n)&&this.scheduleUpdater(t,"transform")},getBBox:function(t){var e=this,r=e.attr,i=r.bbox,n=i.plain,a=i.transform;return n.dirty&&(e.updatePlainBBox(n),n.dirty=!1),t?n:(e.applyTransformations(),a.dirty&&(e.updateTransformedBBox(a,n),a.dirty=!1),a)},updatePlainBBox:Ext.emptyFn,updateTransformedBBox:function(t,e){this.attr.matrix.transformBBox(e,0,t)},getBBoxCenter:function(t){var e=this.getBBox(t);return e?[e.x+.5*e.width,e.y+.5*e.height]:[0,0]},hide:function(){return this.attr.hidden=!0,this.setDirty(!0),this},show:function(){return this.attr.hidden=!1,this.setDirty(!0),this},useAttributes:function(t,e){this.applyTransformations();var r,i=this.attr,n=i.canvasAttributes,a=n.strokeStyle,s=n.fillStyle,o=n.lineDash,l=n.lineDashOffset;a&&(a.isGradient?(t.strokeStyle="black",t.strokeGradient=a):t.strokeGradient=!1),s&&(s.isGradient?(t.fillStyle="black",t.fillGradient=s):t.fillGradient=!1),o&&t.setLineDash(o),Ext.isNumber(l)&&Ext.isNumber(t.lineDashOffset)&&(t.lineDashOffset=l);for(r in n)void 0!==n[r]&&n[r]!==t[r]&&(t[r]=n[r]);this.setGradientBBox(t,e)},setGradientBBox:function(t,e){var r=this.attr;t.setGradientBBox(r.constrainGradients?{x:e[0],y:e[1],width:e[2],height:e[3]}:this.getBBox(r.transformFillStroke))},applyTransformations:function(t){if(t||this.attr.dirtyTransform){var e,r,i=this,n=i.attr,a=i.getBBoxCenter(!0),s=a[0],o=a[1],l=n.translationX,h=n.translationY,c=n.scalingX,u=null===n.scalingY?n.scalingX:n.scalingY,d=null===n.scalingCenterX?s:n.scalingCenterX,g=null===n.scalingCenterY?o:n.scalingCenterY,f=n.rotationRads,p=null===n.rotationCenterX?s:n.rotationCenterX,m=null===n.rotationCenterY?o:n.rotationCenterY,x=Math.cos(f),y=Math.sin(f);1===c&&1===u&&(d=0,g=0),0===f&&(p=0,m=0),e=d*(1-c)-p,r=g*(1-u)-m,n.matrix.elements=[x*c,y*c,-y*u,x*u,x*e-y*r+p+l,y*e+x*r+m+h],n.matrix.inverse(n.inverseMatrix),n.dirtyTransform=!1,n.bbox.transform.dirty=!0}},transform:function(t,e){var r,i=this.attr,n=i.matrix;return r=t&&t.isMatrix?t.elements:t,Ext.isArray(r)&&6===r.length||Ext.raise("An instance of Ext.draw.Matrix or an array of 6 numbers is expected."),n.prepend.apply(n,r.slice()),n.inverse(i.inverseMatrix),e&&this.updateTransformAttributes(),i.dirtyTransform=!1,i.bbox.transform.dirty=!0,this.setDirty(!0),this},updateTransformAttributes:function(){var t=this.attr,e=t.matrix.split();t.rotationRads=e.rotate,t.rotationCenterX=0,t.rotationCenterY=0,t.scalingX=e.scaleX,t.scalingY=e.scaleY,t.scalingCenterX=0,t.scalingCenterY=0,t.translationX=e.translateX,t.translationY=e.translateY},resetTransform:function(t){var e=this.attr;return e.matrix.reset(),e.inverseMatrix.reset(),t||this.updateTransformAttributes(),e.dirtyTransform=!1,e.bbox.transform.dirty=!0,this.setDirty(!0),this},setTransform:function(t,e){return this.resetTransform(!0),this.transform.call(this,t,e),this},preRender:Ext.emptyFn,render:Ext.emptyFn,renderBBox:function(t,e){var r=this.getBBox();e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(r.x+r.width,r.y),e.lineTo(r.x+r.width,r.y+r.height),e.lineTo(r.x,r.y+r.height),e.closePath(),e.strokeStyle="red",e.strokeOpacity=1,e.lineWidth=.5,e.stroke()},hitTest:function(t,e){if(this.isVisible()){var r=t[0],i=t[1],n=this.getBBox(),a=n&&r>=n.x&&r<=n.x+n.width&&i>=n.y&&i<=n.y+n.height;if(a)return{sprite:this}}return null},isVisible:function(){var t=this.attr,e=this.getParent(),r=e&&(e.isSurface||e.isVisible()),i=r&&!t.hidden&&t.globalAlpha,n=Ext.util.Color.NONE,a=Ext.util.Color.RGBA_NONE,s=t.fillOpacity&&t.fillStyle!==n&&t.fillStyle!==a,o=t.strokeOpacity&&t.strokeStyle!==n&&t.strokeStyle!==a,l=i&&(s||o);return!!l},repaint:function(){var t=this.getSurface();t&&t.renderFrame()},remove:function(){var t=this.getSurface();return t&&t.isSurface?t.remove(this):null},destroy:function(){for(var t,e=this,r=e.topModifier;r;)t=r,r=r._lower,t.destroy();delete e.attr,e.remove(),e.fireEvent("beforedestroy",e)!==!1&&e.fireEvent("destroy",e),e.callParent()}},function(){this.def=new Ext.draw.sprite.AttributeDefinition(this.def),this.def.spriteClass=this}),Ext.define("Ext.draw.Path",{requires:["Ext.draw.Draw"],statics:{pathRe:/,?([achlmqrstvxz]),?/gi,pathRe2:/-/gi,pathSplitRe:/\s|,/g},svgString:"",constructor:function(t){var e=this;e.commands=[],e.params=[],e.cursor=null,e.startX=0,e.startY=0,t&&e.fromSvgString(t)},clear:function(){var t=this;t.params.length=0,t.commands.length=0,t.cursor=null,t.startX=0,t.startY=0,t.dirt()},dirt:function(){this.svgString=""},moveTo:function(t,e){var r=this;r.cursor||(r.cursor=[t,e]),r.params.push(t,e),r.commands.push("M"),r.startX=t,r.startY=e,r.cursor[0]=t,r.cursor[1]=e,r.dirt()},lineTo:function(t,e){var r=this;r.cursor?(r.params.push(t,e),r.commands.push("L")):(r.cursor=[t,e],r.params.push(t,e),r.commands.push("M")),r.cursor[0]=t,r.cursor[1]=e,r.dirt()},bezierCurveTo:function(t,e,r,i,n,a){var s=this;s.cursor||s.moveTo(t,e),s.params.push(t,e,r,i,n,a),s.commands.push("C"),s.cursor[0]=n,s.cursor[1]=a,s.dirt()},quadraticCurveTo:function(t,e,r,i){var n=this;n.cursor||n.moveTo(t,e),n.bezierCurveTo((2*t+n.cursor[0])/3,(2*e+n.cursor[1])/3,(2*t+r)/3,(2*e+i)/3,r,i)},closePath:function(){var t=this;t.cursor&&(t.cursor=null,t.commands.push("Z"),t.dirt())},arcTo:function(t,e,r,i,n,a,s){var o=this;if(void 0===a&&(a=n),void 0===s&&(s=0),!o.cursor)return void o.moveTo(t,e);if(0===n||0===a)return void o.lineTo(t,e);r-=t,i-=e;var l,h,c,u,d,g,f,p,m,x=o.cursor[0]-t,y=o.cursor[1]-e,b=r*y-i*x,v=Math.sqrt(x*x+y*y),E=Math.sqrt(r*r+i*i);if(0===b)return void o.lineTo(t,e);if(a!==n){l=Math.cos(s),h=Math.sin(s),c=l/n,u=h/a,d=-h/n,g=l/a;var S=c*x+u*y;y=d*x+g*y,x=S,S=c*r+u*i,i=d*r+g*i,r=S}else x/=n,y/=a,r/=n,i/=a;p=x*E+r*v,m=y*E+i*v,f=1/(Math.sin(.5*Math.asin(Math.abs(b)/(v*E)))*Math.sqrt(p*p+m*m)),p*=f,m*=f;var M=(p*x+m*y)/(x*x+y*y),C=(p*r+m*i)/(r*r+i*i),w=x*M-p,A=y*M-m,k=r*C-p,P=i*C-m,T=Math.atan2(A,w),I=Math.atan2(P,k);b>0?T>I&&(I+=2*Math.PI):I>T&&(T+=2*Math.PI),a!==n?(p=l*p*n-h*m*a+t,m=h*m*a+l*m*a+e,o.lineTo(l*n*w-h*a*A+p,h*n*w+l*a*A+m),o.ellipse(p,m,n,a,s,T,I,0>b)):(p=p*n+t,m=m*a+e,o.lineTo(n*w+p,a*A+m),o.ellipse(p,m,n,a,s,T,I,0>b))},ellipse:function(t,e,r,i,n,a,s,o){var l,h,c,u=this,d=u.params,g=d.length;if(s-a>=2*Math.PI)return u.ellipse(t,e,r,i,n,a,a+Math.PI,o),void u.ellipse(t,e,r,i,n,a+Math.PI,s,o);if(o)for(s>a&&(a+=2*Math.PI),l=u.approximateArc(d,t,e,r,i,n,s,a),h=g,c=d.length-2;c>h;h+=2,c-=2){var f=d[h];d[h]=d[c],d[c]=f,f=d[h+1],d[h+1]=d[c+1],d[c+1]=f}else a>s&&(s+=2*Math.PI),l=u.approximateArc(d,t,e,r,i,n,a,s);for(u.cursor?(u.cursor[0]=d[d.length-2],u.cursor[1]=d[d.length-1],u.commands.push("L")):(u.cursor=[d[d.length-2],d[d.length-1]],u.commands.push("M")),h=2;l>h;h+=6)u.commands.push("C");u.dirt()},arc:function(t,e,r,i,n,a){this.ellipse(t,e,r,r,0,i,n,a)},rect:function(t,e,r,i){if(0!=r&&0!=i){var n=this;n.moveTo(t,e),n.lineTo(t+r,e),n.lineTo(t+r,e+i),n.lineTo(t,e+i),n.closePath()}},approximateArc:function(t,e,r,i,n,a,s,o){var l,h,c,u,d,g,f=Math.cos(a),p=Math.sin(a),m=Math.cos(s),x=Math.sin(s),y=f*m*i-p*x*n,b=-f*x*i-p*m*n,v=p*m*i+f*x*n,E=-p*x*i+f*m*n,S=Math.PI/2,M=2,C=y,w=b,A=v,k=E,P=.547443256150549;for(o-=s,0>o&&(o+=2*Math.PI),t.push(y+e,v+r);o>=S;)t.push(C+w*P+e,A+k*P+r,C*P+w+e,A*P+k+r,w+e,k+r),M+=6,o-=S,l=C,C=w,w=-l,l=A,A=k,k=-l;return o&&(h=(.3294738052815987+.012120855841304373*o)*o,c=Math.cos(o),u=Math.sin(o),d=c+h*u,g=u-h*c,t.push(C+w*h+e,A+k*h+r,C*d+w*g+e,A*d+k*g+r,C*c+w*u+e,A*c+k*u+r),M+=6),M},arcSvg:function(t,e,r,i,n,a,s){0>t&&(t=-t),0>e&&(e=-e);var o=this,l=o.cursor[0],h=o.cursor[1],c=(l-a)/2,u=(h-s)/2,d=Math.cos(r),g=Math.sin(r),f=c*d+u*g,p=-c*g+u*d,m=f/t,x=p/e,y=m*m+x*x,b=.5*(l+a),v=.5*(h+s),E=0,S=0;y>=1?(y=Math.sqrt(y),t*=y,e*=y):(y=Math.sqrt(1/y-1),i===n&&(y=-y),E=y*t*x,S=-y*e*m,b+=d*E-g*S,v+=g*E+d*S);var M=Math.atan2((p-S)/e,(f-E)/t),C=Math.atan2((-p-S)/e,(-f-E)/t)-M;n?0>=C&&(C+=2*Math.PI):C>=0&&(C-=2*Math.PI),o.ellipse(b,v,t,e,r,M,M+C,1-n)},fromSvgString:function(t){if(t){var e,r,i,n,a,s,o=this,l={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0,A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},h="",c=0,u=0,d=!1;for(Ext.isString(t)?e=t.replace(Ext.draw.Path.pathRe," $1 ").replace(Ext.draw.Path.pathRe2," -").split(Ext.draw.Path.pathSplitRe):Ext.isArray(t)&&(e=t.join(",").split(Ext.draw.Path.pathSplitRe)),n=0,a=0;n<e.length;n++)""!==e[n]&&(e[a++]=e[n]);for(e.length=a,o.clear(),n=0;n<e.length;)switch(h=d,d=e[n],s=d.toUpperCase()!==d,n++,d){case"M":for(o.moveTo(c=+e[n],u=+e[n+1]),n+=2;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c=+e[n],u=+e[n+1]),n+=2;break;case"L":for(o.lineTo(c=+e[n],u=+e[n+1]),n+=2;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c=+e[n],u=+e[n+1]),n+=2;break;case"A":for(;a>n&&!l.hasOwnProperty(e[n]);)o.arcSvg(+e[n],+e[n+1],+e[n+2]*Math.PI/180,+e[n+3],+e[n+4],c=+e[n+5],u=+e[n+6]),n+=7;break;case"C":for(;a>n&&!l.hasOwnProperty(e[n]);)o.bezierCurveTo(+e[n],+e[n+1],r=+e[n+2],i=+e[n+3],c=+e[n+4],u=+e[n+5]),n+=6;break;case"Z":o.closePath();break;case"m":for(o.moveTo(c+=+e[n],u+=+e[n+1]),n+=2;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c+=+e[n],u+=+e[n+1]),n+=2;break;case"l":for(o.lineTo(c+=+e[n],u+=+e[n+1]),n+=2;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c+=+e[n],u+=+e[n+1]),n+=2;break;case"a":for(;a>n&&!l.hasOwnProperty(e[n]);)o.arcSvg(+e[n],+e[n+1],+e[n+2]*Math.PI/180,+e[n+3],+e[n+4],c+=+e[n+5],u+=+e[n+6]),n+=7;break;case"c":for(;a>n&&!l.hasOwnProperty(e[n]);)o.bezierCurveTo(c+ +e[n],u+ +e[n+1],r=c+ +e[n+2],i=u+ +e[n+3],c+=+e[n+4],u+=+e[n+5]),n+=6;break;case"z":o.closePath();break;case"s":for("c"!==h&&"C"!==h&&"s"!==h&&"S"!==h&&(r=c,i=u);a>n&&!l.hasOwnProperty(e[n]);)o.bezierCurveTo(c+c-r,u+u-i,r=c+ +e[n],i=u+ +e[n+1],c+=+e[n+2],u+=+e[n+3]),n+=4;break;case"S":for("c"!==h&&"C"!==h&&"s"!==h&&"S"!==h&&(r=c,i=u);a>n&&!l.hasOwnProperty(e[n]);)o.bezierCurveTo(c+c-r,u+u-i,r=+e[n],i=+e[n+1],c=+e[n+2],u=+e[n+3]),n+=4;break;case"q":for(;a>n&&!l.hasOwnProperty(e[n]);)o.quadraticCurveTo(r=c+ +e[n],i=u+ +e[n+1],c+=+e[n+2],u+=+e[n+3]),n+=4;break;case"Q":for(;a>n&&!l.hasOwnProperty(e[n]);)o.quadraticCurveTo(r=+e[n],i=+e[n+1],c=+e[n+2],u=+e[n+3]),n+=4;break;case"t":for("q"!==h&&"Q"!==h&&"t"!==h&&"T"!==h&&(r=c,i=u);a>n&&!l.hasOwnProperty(e[n]);)o.quadraticCurveTo(r=c+c-r,i=u+u-i,c+=+e[n+1],u+=+e[n+2]),n+=2;break;case"T":for("q"!==h&&"Q"!==h&&"t"!==h&&"T"!==h&&(r=c,i=u);a>n&&!l.hasOwnProperty(e[n]);)o.quadraticCurveTo(r=c+c-r,i=u+u-i,c=+e[n+1],u=+e[n+2]),n+=2;break;case"h":for(;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c+=+e[n],u),n++;break;case"H":for(;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c=+e[n],u),n++;break;case"v":for(;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c,u+=+e[n]),n++;break;case"V":for(;a>n&&!l.hasOwnProperty(e[n]);)o.lineTo(c,u=+e[n]),n++}}},clone:function(){var t=this,e=new Ext.draw.Path;return e.params=t.params.slice(0),e.commands=t.commands.slice(0),e.cursor=t.cursor?t.cursor.slice(0):null,e.startX=t.startX,e.startY=t.startY,e.svgString=t.svgString,e},transform:function(t){if(!t.isIdentity()){for(var e,r,i=t.getXX(),n=t.getYX(),a=t.getDX(),s=t.getXY(),o=t.getYY(),l=t.getDY(),h=this.params,c=0,u=h.length;u>c;c+=2)e=h[c],r=h[c+1],h[c]=e*i+r*n+a,h[c+1]=e*s+r*o+l;this.dirt()}},getDimension:function(t){if(t||(t={}),!this.commands||!this.commands.length)return t.x=0,t.y=0,t.width=0,t.height=0,t;t.left=1/0,t.top=1/0,t.right=-(1/0),t.bottom=-(1/0);for(var e,r,i=0,n=0,a=this.commands,s=this.params,o=a.length;o>i;i++)switch(a[i]){case"M":case"L":e=s[n],r=s[n+1],t.left=Math.min(e,t.left),t.top=Math.min(r,t.top),t.right=Math.max(e,t.right),t.bottom=Math.max(r,t.bottom),n+=2;break;case"C":this.expandDimension(t,e,r,s[n],s[n+1],s[n+2],s[n+3],e=s[n+4],r=s[n+5]),n+=6}return t.x=t.left,t.y=t.top,t.width=t.right-t.left,t.height=t.bottom-t.top,t},getDimensionWithTransform:function(t,e){if(!this.commands||!this.commands.length)return e||(e={}),e.x=0,e.y=0,e.width=0,e.height=0,e;e.left=1/0,e.top=1/0,e.right=-(1/0),e.bottom=-(1/0);for(var r,i,n=t.getXX(),a=t.getYX(),s=t.getDX(),o=t.getXY(),l=t.getYY(),h=t.getDY(),c=0,u=0,d=this.commands,g=this.params,f=d.length;f>c;c++)switch(d[c]){case"M":case"L":r=g[u]*n+g[u+1]*a+s,i=g[u]*o+g[u+1]*l+h,e.left=Math.min(r,e.left),e.top=Math.min(i,e.top),e.right=Math.max(r,e.right),e.bottom=Math.max(i,e.bottom),u+=2;break;case"C":this.expandDimension(e,r,i,g[u]*n+g[u+1]*a+s,g[u]*o+g[u+1]*l+h,g[u+2]*n+g[u+3]*a+s,g[u+2]*o+g[u+3]*l+h,r=g[u+4]*n+g[u+5]*a+s,i=g[u+4]*o+g[u+5]*l+h),u+=6}return e||(e={}),e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},expandDimension:function(t,e,r,i,n,a,s,o,l){var h=this,c=t.left,u=t.right,d=t.top,g=t.bottom,f=h.dim||(h.dim=[]);h.curveDimension(e,i,a,o,f),c=Math.min(c,f[0]),u=Math.max(u,f[1]),h.curveDimension(r,n,s,l,f),d=Math.min(d,f[0]),g=Math.max(g,f[1]),t.left=c,t.right=u,t.top=d,t.bottom=g},curveDimension:function(t,e,r,i,n){var a,s,o,l=3*(-t+3*(e-r)+i),h=6*(t-2*e+r),c=-3*(t-e),u=Math.min(t,i),d=Math.max(t,i);if(0===l){if(0===h)return n[0]=u,void(n[1]=d);a=-c/h,a>0&&1>a&&(s=this.interpolate(t,e,r,i,a),u=Math.min(u,s),d=Math.max(d,s))}else o=h*h-4*l*c,o>=0&&(o=Math.sqrt(o),a=(o-h)/2/l,a>0&&1>a&&(s=this.interpolate(t,e,r,i,a),u=Math.min(u,s),d=Math.max(d,s)),o>0&&(a-=o/l,a>0&&1>a&&(s=this.interpolate(t,e,r,i,a),u=Math.min(u,s),d=Math.max(d,s))));n[0]=u,n[1]=d},interpolate:function(t,e,r,i,n){if(0===n)return t;if(1===n)return i;var a=(1-n)/n;return n*n*n*(i+a*(3*r+a*(3*e+a*t)))},fromStripes:function(t){var e,r,i,n=this,a=0,s=t.length;for(n.clear();s>a;a++)for(i=t[a],n.params.push.apply(n.params,i),n.commands.push("M"),e=2,r=i.length;r>e;e+=6)n.commands.push("C");n.cursor||(n.cursor=[]),n.cursor[0]=n.params[n.params.length-2],n.cursor[1]=n.params[n.params.length-1],n.dirt()},toStripes:function(t){var e,r,i,n,a,s,o,l,h,c=t||[],u=this.commands,d=this.params,g=u.length;for(l=0,h=0;g>l;l++)switch(u[l]){case"M":e=[s=n=d[h++],o=a=d[h++]],c.push(e);break;case"L":r=d[h++],i=d[h++],e.push((n+n+r)/3,(a+a+i)/3,(n+r+r)/3,(a+i+i)/3,n=r,a=i);break;case"C":e.push(d[h++],d[h++],d[h++],d[h++],n=d[h++],a=d[h++]);break;case"Z":r=s,i=o,e.push((n+n+r)/3,(a+a+i)/3,(n+r+r)/3,(a+i+i)/3,n=r,a=i)}return c},updateSvgString:function(){for(var t=[],e=this.commands,r=this.params,i=e.length,n=0,a=0;i>n;n++)switch(e[n]){case"M":t.push("M"+r[a]+","+r[a+1]),a+=2;break;case"L":t.push("L"+r[a]+","+r[a+1]),a+=2;break;case"C":t.push("C"+r[a]+","+r[a+1]+" "+r[a+2]+","+r[a+3]+" "+r[a+4]+","+r[a+5]),a+=6;break;case"Z":t.push("Z")}this.svgString=t.join("")},toString:function(){return this.svgString||this.updateSvgString(),this.svgString}}),Ext.define("Ext.draw.overrides.hittest.Path",{override:"Ext.draw.Path",rayOrigin:{x:-1e4,y:-1e4},isPointInPath:function(t,e){var r,i,n=this,a=n.commands,s=Ext.draw.PathUtil,o=n.rayOrigin,l=n.params,h=a.length,c=null,u=null,d=0,g=0,f=0;for(r=0,i=0;h>r;r++)switch(a[r]){case"M":null!==c&&s.linesIntersection(c,u,d,g,o.x,o.y,t,e)&&(f+=1),c=d=l[i],u=g=l[i+1],i+=2;break;case"L":s.linesIntersection(d,g,l[i],l[i+1],o.x,o.y,t,e)&&(f+=1),d=l[i],g=l[i+1],i+=2;break;case"C":f+=s.cubicLineIntersections(d,l[i],l[i+2],l[i+4],g,l[i+1],l[i+3],l[i+5],o.x,o.y,t,e).length,d=l[i+4],g=l[i+5],i+=6;break;case"Z":null!==c&&s.linesIntersection(c,u,d,g,o.x,o.y,t,e)&&(f+=1)}return f%2===1},isPointOnPath:function(t,e){var r,i,n=this,a=n.commands,s=Ext.draw.PathUtil,o=n.params,l=a.length,h=null,c=null,u=0,d=0;for(r=0,i=0;l>r;r++)switch(a[r]){case"M":if(null!==h&&s.pointOnLine(h,c,u,d,t,e))return!0;h=u=o[i],c=d=o[i+1],i+=2;break;case"L":if(s.pointOnLine(u,d,o[i],o[i+1],t,e))return!0;u=o[i],d=o[i+1],i+=2;break;case"C":if(s.pointOnCubic(u,o[i],o[i+2],o[i+4],d,o[i+1],o[i+3],o[i+5],t,e))return!0;u=o[i+4],d=o[i+5],i+=6;break;case"Z":if(null!==h&&s.pointOnLine(h,c,u,d,t,e))return!0}return!1},getSegmentIntersections:function(t,e,r,i,n,a,s,o){var l,h,c,u=this,d=arguments.length,g=Ext.draw.PathUtil,f=u.commands,p=u.params,m=f.length,x=null,y=null,b=0,v=0,E=[];for(l=0,h=0;m>l;l++)switch(f[l]){case"M":if(null!==x)switch(d){case 4:c=g.linesIntersection(x,y,b,v,t,e,r,i),c&&E.push(c);break;case 8:c=g.cubicLineIntersections(t,r,n,s,e,i,a,o,x,y,b,v),E.push.apply(E,c)}x=b=p[h],y=v=p[h+1],h+=2;break;case"L":switch(d){case 4:c=g.linesIntersection(b,v,p[h],p[h+1],t,e,r,i),c&&E.push(c);break;case 8:c=g.cubicLineIntersections(t,r,n,s,e,i,a,o,b,v,p[h],p[h+1]),E.push.apply(E,c)}b=p[h],v=p[h+1],h+=2;break;case"C":switch(d){case 4:c=g.cubicLineIntersections(b,p[h],p[h+2],p[h+4],v,p[h+1],p[h+3],p[h+5],t,e,r,i),E.push.apply(E,c);break;case 8:c=g.cubicsIntersections(b,p[h],p[h+2],p[h+4],v,p[h+1],p[h+3],p[h+5],t,r,n,s,e,i,a,o),E.push.apply(E,c)}b=p[h+4],v=p[h+5],h+=6;break;case"Z":if(null!==x)switch(d){case 4:c=g.linesIntersection(x,y,b,v,t,e,r,i),c&&E.push(c);break;case 8:c=g.cubicLineIntersections(t,r,n,s,e,i,a,o,x,y,b,v),E.push.apply(E,c)}}return E},getIntersections:function(t){var e,r,i,n=this,a=n.commands,s=n.params,o=a.length,l=null,h=null,c=0,u=0,d=[];for(e=0,r=0;o>e;e++)switch(a[e]){case"M":null!==l&&(i=t.getSegmentIntersections.call(t,l,h,c,u),d.push.apply(d,i)),l=c=s[r],h=u=s[r+1],r+=2;break;case"L":i=t.getSegmentIntersections.call(t,c,u,s[r],s[r+1]),d.push.apply(d,i),c=s[r],u=s[r+1],r+=2;break;case"C":i=t.getSegmentIntersections.call(t,c,u,s[r],s[r+1],s[r+2],s[r+3],s[r+4],s[r+5]),d.push.apply(d,i),c=s[r+4],u=s[r+5],r+=6;break;case"Z":null!==l&&(i=t.getSegmentIntersections.call(t,l,h,c,u),d.push.apply(d,i))}return d}}),Ext.define("Ext.draw.sprite.Path",{extend:"Ext.draw.sprite.Sprite",requires:["Ext.draw.Draw","Ext.draw.Path"],alias:["sprite.path","Ext.draw.Sprite"],type:"path",isPath:!0,inheritableStatics:{def:{processors:{path:function(t,e){return t instanceof Ext.draw.Path||(t=new Ext.draw.Path(t)),t}},aliases:{d:"path"},triggers:{path:"bbox"},updaters:{path:function(t){var e=t.path;e&&e.bindAttr===t||(e=new Ext.draw.Path,e.bindAttr=t,t.path=e),e.clear(),this.updatePath(e,t),this.scheduleUpdater(t,"bbox",["path"])}}}},updatePlainBBox:function(t){this.attr.path&&this.attr.path.getDimension(t)},updateTransformedBBox:function(t){this.attr.path&&this.attr.path.getDimensionWithTransform(this.attr.matrix,t)},render:function(t,e){var r=this.attr.matrix,i=this.attr;if(i.path&&0!==i.path.params.length){r.toContext(e),e.appendPath(i.path),e.fillStroke(i);var n=i.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;n&&(n.bbox&&this.renderBBox(t,e),n.xray&&this.renderXRay(t,e))}},renderXRay:function(t,e){var r,i,n=this.attr,a=n.matrix,s=n.inverseMatrix,o=n.path,l=o.commands,h=o.params,c=l.length,u=2*Math.PI,d=2;for(a.toContext(e),e.beginPath(),r=0,i=0;c>r;r++)switch(l[r]){case"M":e.moveTo(h[i]-d,h[i+1]-d),e.rect(h[i]-d,h[i+1]-d,2*d,2*d),i+=2;break;case"L":e.moveTo(h[i]-d,h[i+1]-d),e.rect(h[i]-d,h[i+1]-d,2*d,2*d),i+=2;break;case"C":e.moveTo(h[i]+d,h[i+1]),e.arc(h[i],h[i+1],d,0,u,!0),i+=2,e.moveTo(h[i]+d,h[i+1]),e.arc(h[i],h[i+1],d,0,u,!0),i+=2,e.moveTo(h[i]+2*d,h[i+1]),e.rect(h[i]-d,h[i+1]-d,2*d,2*d),i+=2}for(s.toContext(e),e.strokeStyle="black",e.strokeOpacity=1,e.lineWidth=1,e.stroke(),a.toContext(e),e.beginPath(),r=0,i=0;c>r;r++)switch(l[r]){case"M":e.moveTo(h[i],h[i+1]),i+=2;break;case"L":e.moveTo(h[i],h[i+1]),i+=2;break;case"C":e.lineTo(h[i],h[i+1]),i+=2,e.moveTo(h[i],h[i+1]),i+=2,e.lineTo(h[i],h[i+1]),i+=2}s.toContext(e),e.lineWidth=.5,e.stroke()},updatePath:function(t,e){}}),Ext.define("Ext.draw.overrides.hittest.sprite.Path",{override:"Ext.draw.sprite.Path",requires:["Ext.draw.Color"],isPointInPath:function(t,e){var r=this.attr;if(r.fillStyle===Ext.util.Color.RGBA_NONE)return this.isPointOnPath(t,e);var i,n,a=r.path,s=r.matrix;return s.isIdentity()||(i=a.params.slice(0),a.transform(r.matrix)),n=a.isPointInPath(t,e),i&&(a.params=i),n},isPointOnPath:function(t,e){var r,i,n=this.attr,a=n.path,s=n.matrix;return s.isIdentity()||(r=a.params.slice(0),a.transform(n.matrix)),i=a.isPointOnPath(t,e),r&&(a.params=r),i},hitTest:function(t,e){var r,i,n=this,a=n.attr,s=a.path,o=a.matrix,l=t[0],h=t[1],c=n.callParent([t,e]),u=null;return c?(e=e||Ext.draw.sprite.Sprite.defaultHitTestOptions,o.isIdentity()||(r=s.params.slice(0),s.transform(a.matrix)),e.fill&&e.stroke?(i=a.fillStyle!==Ext.util.Color.NONE&&a.fillStyle!==Ext.util.Color.RGBA_NONE,i?s.isPointInPath(l,h)&&(u={sprite:n}):(s.isPointInPath(l,h)||s.isPointOnPath(l,h))&&(u={sprite:n})):e.stroke&&!e.fill?s.isPointOnPath(l,h)&&(u={sprite:n}):e.fill&&!e.stroke&&s.isPointInPath(l,h)&&(u={sprite:n}),r&&(s.params=r),u):u},getIntersections:function(t){if(!t.isSprite||!t.isPath)return[];var e,r,i,n=this.attr,a=t.attr,s=n.path,o=a.path,l=n.matrix,h=a.matrix;return l.isIdentity()||(e=s.params.slice(0),s.transform(n.matrix)),h.isIdentity()||(r=o.params.slice(0),o.transform(a.matrix)),i=s.getIntersections(o),e&&(s.params=e),r&&(o.params=r),i}}),Ext.define("Ext.draw.sprite.Circle",{extend:"Ext.draw.sprite.Path",alias:"sprite.circle",type:"circle",inheritableStatics:{def:{processors:{cx:"number",cy:"number",r:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy"},defaults:{cx:0,cy:0,r:4},triggers:{cx:"path",cy:"path",r:"path"}}},updatePlainBBox:function(t){var e=this.attr,r=e.cx,i=e.cy,n=e.r;t.x=r-n,t.y=i-n,t.width=n+n,t.height=n+n},updateTransformedBBox:function(t){var e,r,i=this.attr,n=i.cx,a=i.cy,s=i.r,o=i.matrix,l=o.getScaleX(),h=o.getScaleY();e=l*s,r=h*s,t.x=o.x(n,a)-e,t.y=o.y(n,a)-r,t.width=e+e,t.height=r+r},updatePath:function(t,e){t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.Arc",{extend:"Ext.draw.sprite.Circle",alias:"sprite.arc",type:"arc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(t,e){t.arc(e.cx,e.cy,e.r,e.startAngle,e.endAngle,e.anticlockwise)}}),Ext.define("Ext.draw.sprite.Arrow",{extend:"Ext.draw.sprite.Path",alias:"sprite.arrow",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(t,e){var r=1.5*e.size,i=e.x-e.lineWidth/2,n=e.y;t.fromSvgString("M".concat(i-.7*r,",",n-.4*r,"l",[.6*r,0,0,.4*-r,r,.8*r,-r,.8*r,0,.4*-r,.6*-r,0],"z"))}}),Ext.define("Ext.draw.sprite.Composite",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.composite",type:"composite",isComposite:!0,config:{sprites:[]},constructor:function(t){this.sprites=[],this.map={},this.callParent([t])},add:function(t){if(!t)return null;t.isSprite||(t=Ext.create("sprite."+t.type,t)),t.setParent(this),t.setSurface(this.getSurface());var e=this,r=e.attr,i=t.applyTransformations;return t.applyTransformations=function(e){t.attr.dirtyTransform&&(r.dirtyTransform=!0,r.bbox.plain.dirty=!0,r.bbox.transform.dirty=!0),i.call(t,e)},e.sprites.push(t),e.map[t.id]=t.getId(),r.bbox.plain.dirty=!0,r.bbox.transform.dirty=!0,t},removeSprite:function(t,e){var r,i,n=this;if(t){if(t.charAt&&(t=n.map[t]),!t||!t.isSprite)return null;if(t.isDestroyed||t.isDestroying)return t;if(r=t.getId(),i=n.map[r],delete n.map[r],e&&t.destroy(),!i)return t;t.setParent(null),t.setSurface(null),Ext.Array.remove(n.sprites,t),n.dirtyZIndex=!0,n.setDirty(!0)}return t||null},updateSurface:function(t){for(var e=0,r=this.sprites.length;r>e;e++)this.sprites[e].setSurface(t)},addAll:function(t){if(t.isSprite||t.type)this.add(t);else if(Ext.isArray(t))for(var e=0;e<t.length;)this.add(t[e++])},updatePlainBBox:function(t){var e,r,i,n,a=this,s=1/0,o=-(1/0),l=1/0,h=-(1/0);for(i=0,n=a.sprites.length;n>i;i++)e=a.sprites[i],e.applyTransformations(),r=e.getBBox(),s>r.x&&(s=r.x),o<r.x+r.width&&(o=r.x+r.width),l>r.y&&(l=r.y),h<r.y+r.height&&(h=r.y+r.height);t.x=s,t.y=l,t.width=o-s,t.height=h-l},isVisible:function(){var t=this.attr,e=this.getParent(),r=e&&(e.isSurface||e.isVisible()),i=r&&!t.hidden&&t.globalAlpha;return!!i},render:function(t,e,r){var i=this,n=i.attr,a=i.attr.matrix,s=i.sprites,o=s.length,l=0;for(a.toContext(e);o>l;l++)t.renderSprite(s[l],r);var h=n.debug||i.statics().debug||Ext.draw.sprite.Sprite.debug;h&&(n.inverseMatrix.toContext(e),h.bbox&&i.renderBBox(t,e))},destroy:function(){var t,e=this,r=e.sprites,i=r.length;for(t=0;i>t;t++)r[t].destroy();r.length=0,e.callParent()}}),Ext.define("Ext.draw.sprite.Cross",{extend:"Ext.draw.sprite.Path",alias:"sprite.cross",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(t,e){var r=e.size/1.7,i=e.x-e.lineWidth/2,n=e.y;t.fromSvgString("M".concat(i-r,",",n,"l",[-r,-r,r,-r,r,r,r,-r,r,r,-r,r,r,r,-r,r,-r,-r,-r,r,-r,-r,"z"]))}}),Ext.define("Ext.draw.sprite.Diamond",{extend:"Ext.draw.sprite.Path",alias:"sprite.diamond",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(t,e){var r=1.25*e.size,i=e.x-e.lineWidth/2,n=e.y;t.fromSvgString(["M",i,n-r,"l",r,r,-r,r,-r,-r,r,-r,"z"])}}),Ext.define("Ext.draw.sprite.Ellipse",{extend:"Ext.draw.sprite.Path",alias:"sprite.ellipse",type:"ellipse",inheritableStatics:{def:{processors:{cx:"number",cy:"number",rx:"number",ry:"number",axisRotation:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy",radiusX:"rx",radiusY:"ry"},defaults:{cx:0,cy:0,rx:1,ry:1,axisRotation:0},triggers:{cx:"path",cy:"path",rx:"path",ry:"path",axisRotation:"path"}}},updatePlainBBox:function(t){var e=this.attr,r=e.cx,i=e.cy,n=e.rx,a=e.ry;t.x=r-n,t.y=i-a,t.width=n+n,t.height=a+a},updateTransformedBBox:function(t){var e,r,i,n,a,s,o,l,h=this.attr,c=h.cx,u=h.cy,d=h.rx,g=h.ry,f=g/d,p=h.matrix.clone();p.append(1,0,0,f,0,u*(1-f)),e=p.getXX(),i=p.getYX(),a=p.getDX(),r=p.getXY(),n=p.getYY(),s=p.getDY(),o=Math.sqrt(e*e+i*i)*d,l=Math.sqrt(r*r+n*n)*d,t.x=c*e+u*i+a-o,t.y=c*r+u*n+s-l,t.width=o+o,t.height=l+l},updatePath:function(t,e){t.ellipse(e.cx,e.cy,e.rx,e.ry,e.axisRotation,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.EllipticalArc",{extend:"Ext.draw.sprite.Ellipse",alias:"sprite.ellipticalArc",type:"ellipticalArc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(t,e){t.ellipse(e.cx,e.cy,e.rx,e.ry,e.axisRotation,e.startAngle,e.endAngle,e.anticlockwise)}}),Ext.define("Ext.draw.sprite.Rect",{extend:"Ext.draw.sprite.Path",alias:"sprite.rect",type:"rect",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",radius:"number"},aliases:{},triggers:{x:"path",y:"path",width:"path",height:"path",radius:"path"},defaults:{x:0,y:0,width:8,height:8,radius:0}}},updatePlainBBox:function(t){var e=this.attr;t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},updateTransformedBBox:function(t,e){this.attr.matrix.transformBBox(e,this.attr.radius,t)},updatePath:function(t,e){var r=e.x,i=e.y,n=e.width,a=e.height,s=Math.min(e.radius,.5*Math.abs(a),.5*Math.abs(n));0===s?t.rect(r,i,n,a):(t.moveTo(r+s,i),t.arcTo(r+n,i,r+n,i+a,s),t.arcTo(r+n,i+a,r,i+a,s),t.arcTo(r,i+a,r,i,s),t.arcTo(r,i,r+s,i,s))}}),Ext.define("Ext.draw.sprite.Image",{extend:"Ext.draw.sprite.Rect",alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},triggers:{src:"src"},updaters:{src:"updateSource"},defaults:{src:"",width:null,height:null}}},updateSurface:function(t){t&&this.updateSource(this.attr)},updateSource:function(t){var e,r,i=this,n=t.src,a=i.getSurface(),s=Ext.draw.sprite.Image.imageLoaders[n],o=t.width,l=t.height;a&&(s?(Ext.Array.include(s.pendingSprites,i),Ext.Array.include(s.pendingSurfaces,a)):(e=new Image,
s=Ext.draw.sprite.Image.imageLoaders[n]={image:e,done:!1,pendingSprites:[i],pendingSurfaces:[a]},e.width=o,e.height=l,e.onload=function(){var t;if(!s.done){for(s.done=!0,r=0;r<s.pendingSprites.length;r++)t=s.pendingSprites[r],t.destroyed||t.setDirty(!0);for(r=0;r<s.pendingSurfaces.length;r++)t=s.pendingSurfaces[r],t.destroyed||t.renderFrame()}},e.src=n))},render:function(t,e){var r,i=this,n=i.attr,a=n.matrix,s=n.src,o=n.x,l=n.y,h=n.width,c=n.height,u=Ext.draw.sprite.Image.imageLoaders[s];u&&u.done&&(a.toContext(e),r=u.image,e.drawImage(r,o,l,h||(r.naturalWidth||r.width)/t.devicePixelRatio,c||(r.naturalHeight||r.height)/t.devicePixelRatio));var d=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;d&&d.bbox&&this.renderBBox(t,e)},isVisible:function(){var t=this.attr,e=this.getParent(),r=e&&(e.isSurface||e.isVisible()),i=r&&!t.hidden&&t.globalAlpha;return!!i}}),Ext.define("Ext.draw.sprite.Instancing",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.instancing",type:"instancing",isInstancing:!0,config:{template:null,instances:null},instances:null,applyTemplate:function(t){Ext.isObject(t)?(t.isInstancing||t.isComposite)&&Ext.raise("Can't use an instancing or composite sprite as a template for an instancing sprite."):Ext.raise("A template of an instancing sprite must either be a sprite instance or a valid config object from which a template sprite will be created."),t.isSprite||(t.xclass||t.type||(t.type="circle"),t=Ext.create(t.xclass||"sprite."+t.type,t));var e=t.getSurface();return e&&e.remove(t),t.setParent(this),t},updateTemplate:function(t,e){e&&delete e.ownAttr,t.setSurface(this.getSurface()),t.ownAttr=t.attr,this.clearAll()},updateInstances:function(t){if(this.clearAll(),Ext.isArray(t))for(var e=0,r=t.length;r>e;e++)this.add(t[e])},updateSurface:function(t){var e=this.getTemplate();e&&!e.destroyed&&e.setSurface(t)},get:function(t){return this.instances[t]},getCount:function(){return this.instances.length},clearAll:function(){var t=this.getTemplate();t.attr.children=this.instances=[],this.position=0},createInstance:function(t,e,r){return this.add(t,e,r)},add:function(t,e,r){var i=this.getTemplate(),n=i.attr,a=Ext.Object.chain(n);return i.topModifier.prepareAttributes(a),i.attr=a,i.setAttributes(t,e,r),a.template=i,this.instances.push(a),i.attr=n,this.position++,a},getBBox:function(){return null},getBBoxFor:function(t,e){var r,i=this.getTemplate(),n=i.attr;return i.attr=this.instances[t],r=i.getBBox(e),i.attr=n,r},isVisible:function(){var t,e=this.attr,r=this.getParent();return t=r&&r.isSurface&&!e.hidden&&e.globalAlpha,!!t},isInstanceVisible:function(t){var e=this,r=e.getTemplate(),i=r.attr,n=e.instances,a=!1;return!Ext.isNumber(t)||0>t||t>=n.length||!e.isVisible()?a:(r.attr=n[t],a=r.isVisible(point,options),r.attr=i,a)},render:function(t,e,r){this.getTemplate()||Ext.raise("An instancing sprite must have a template.");var i,n=this,a=n.getTemplate(),s=t.getRect(),o=n.attr.matrix,l=a.attr,h=n.instances,c=n.position;for(o.toContext(e),a.preRender(t,e,r),a.useAttributes(e,s),i=0;c>i;i++)h[i].hidden||(e.save(),a.attr=h[i],a.useAttributes(e,s),a.render(t,e,r),e.restore());a.attr=l},setAttributesFor:function(t,e,r){var i=this.getTemplate(),n=i.attr,a=this.instances[t];a&&(i.attr=a,e=r?Ext.apply({},e):i.self.def.normalize(e),i.topModifier.pushDown(a,e),i.attr=n)},destroy:function(){var t=this,e=t.getTemplate();t.instances=null,e&&e.destroy(),t.callParent()}}),Ext.define("Ext.draw.overrides.hittest.sprite.Instancing",{override:"Ext.draw.sprite.Instancing",hitTest:function(t,e){var r=this,i=r.getTemplate(),n=i.attr,a=r.instances,s=a.length,o=0,l=null;if(!r.isVisible())return l;for(;s>o;o++)if(i.attr=a[o],l=i.hitTest(t,e))return l.isInstance=!0,l.template=l.sprite,l.sprite=this,l.instance=a[o],l.index=o,l;return i.attr=n,l}}),Ext.define("Ext.draw.sprite.Line",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.line",type:"line",inheritableStatics:{def:{processors:{fromX:"number",fromY:"number",toX:"number",toY:"number"},defaults:{fromX:0,fromY:0,toX:1,toY:1,strokeStyle:"black"},aliases:{x1:"fromX",y1:"fromY",x2:"toX",y2:"toY"}}},updateLineBBox:function(t,e,r,i,n,a){var s,o,l,h,c,u,d,g=this.attr,f=g.matrix,p=g.lineWidth/2;e&&(d=f.transformPoint([r,i]),r=d[0],i=d[1],d=f.transformPoint([n,a]),n=d[0],a=d[1]),s=Math.min(r,n),l=Math.max(r,n),o=Math.min(i,a),h=Math.max(i,a);var m=Math.atan2(l-s,h-o),x=Math.sin(m),y=Math.cos(m),c=p*y,u=p*x;s-=c,o-=u,l+=c,h+=u,t.x=s,t.y=o,t.width=l-s,t.height=h-o},updatePlainBBox:function(t){var e=this.attr;this.updateLineBBox(t,!1,e.fromX,e.fromY,e.toX,e.toY)},updateTransformedBBox:function(t,e){var r=this.attr;this.updateLineBBox(t,!0,r.fromX,r.fromY,r.toX,r.toY)},render:function(t,e){var r=this.attr,i=this.attr.matrix;i.toContext(e),e.beginPath(),e.moveTo(r.fromX,r.fromY),e.lineTo(r.toX,r.toY),e.stroke();var n=r.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;n&&(this.attr.inverseMatrix.toContext(e),n.bbox&&this.renderBBox(t,e))}}),Ext.define("Ext.draw.sprite.Plus",{extend:"Ext.draw.sprite.Path",alias:"sprite.plus",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(t,e){var r=e.size/1.3,i=e.x-e.lineWidth/2,n=e.y;t.fromSvgString("M".concat(i-r/2,",",n-r/2,"l",[0,-r,r,0,0,r,r,0,0,r,-r,0,0,r,-r,0,0,-r,-r,0,0,-r,"z"]))}}),Ext.define("Ext.draw.sprite.Sector",{extend:"Ext.draw.sprite.Path",alias:"sprite.sector",type:"sector",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,bbox",endAngle:"path,bbox",startRho:"path,bbox",endRho:"path,bbox",margin:"path,bbox"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,path:"M 0,0"}}},getMidAngle:function(){return this.midAngle||0},updatePath:function(t,e){var r=Math.min(e.startAngle,e.endAngle),i=Math.max(e.startAngle,e.endAngle),n=this.midAngle=.5*(r+i),a=e.margin,s=e.centerX,o=e.centerY,l=Math.min(e.startRho,e.endRho),h=Math.max(e.startRho,e.endRho);a&&(s+=a*Math.cos(n),o+=a*Math.sin(n)),t.moveTo(s+l*Math.cos(r),o+l*Math.sin(r)),t.lineTo(s+h*Math.cos(r),o+h*Math.sin(r)),t.arc(s,o,h,r,i,!1),t.lineTo(s+l*Math.cos(i),o+l*Math.sin(i)),t.arc(s,o,l,i,r,!0)}}),Ext.define("Ext.draw.sprite.Square",{extend:"Ext.draw.sprite.Path",alias:"sprite.square",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"size"}}},updatePath:function(t,e){var r=1.2*e.size,i=2*r,n=e.x-e.lineWidth/2,a=e.y;t.fromSvgString("M".concat(n-r,",",a-r,"l",[i,0,0,i,-i,0,0,-i,"z"]))}}),Ext.define("Ext.draw.TextMeasurer",{singleton:!0,requires:["Ext.util.TextMetrics"],measureDiv:null,measureCache:{},precise:Ext.isIE8,measureDivTpl:{id:"ext-draw-text-measurer",tag:"div",style:{overflow:"hidden",position:"relative","float":"left",width:0,height:0},"data-sticky":!0,children:{tag:"div",style:{display:"block",position:"absolute",x:-1e5,y:-1e5,padding:0,margin:0,"z-index":-1e5,"white-space":"nowrap"}}},actualMeasureText:function(t,e){var r,i=Ext.draw.TextMeasurer,n=i.measureDiv,a=1e5;if(!n){var s=Ext.Element.create({"data-sticky":!0,style:{overflow:"hidden",position:"relative","float":"left",width:0,height:0}});i.measureDiv=n=Ext.Element.create({style:{position:"absolute",x:a,y:a,"z-index":-a,"white-space":"nowrap",display:"block",padding:0,margin:0}}),Ext.getBody().appendChild(s),s.appendChild(n)}return e&&n.setStyle({font:e,lineHeight:"normal"}),n.setText("("+t+")"),r=n.getSize(),n.setText("()"),r.width-=n.getSize().width,r},measureTextSingleLine:function(t,e){if(this.precise)return this.preciseMeasureTextSingleLine(t,e);t=t.toString();var r,i,n,a,s,o=this.measureCache,l=t.split(""),h=0,c=0;if(o[e]||(o[e]={}),o=o[e],o[t])return o[t];for(n=0,a=l.length;a>n;n++)i=l[n],(r=o[i])||(s=this.actualMeasureText(i,e),r=o[i]=s),h+=r.width,c=Math.max(c,r.height);return o[t]={width:h,height:c}},preciseMeasureTextSingleLine:function(t,e){t=t.toString();var r=this.measureDiv||(this.measureDiv=Ext.getBody().createChild(this.measureDivTpl).down("div"));return r.setStyle({font:e||""}),Ext.util.TextMetrics.measure(r,t)},measureText:function(t,e){var r,i,n,a=t.split("\n"),s=a.length,o=0,l=0;if(1===s)return this.measureTextSingleLine(t,e);for(n=[],i=0;s>i;i++)r=this.measureTextSingleLine(a[i],e),n.push(r),o+=r.height,l=Math.max(l,r.width);return{width:l,height:o,sizes:n}}}),Ext.define("Ext.draw.sprite.Text",function(){var t={"xx-small":!0,"x-small":!0,small:!0,medium:!0,large:!0,"x-large":!0,"xx-large":!0},e={normal:!0,bold:!0,bolder:!0,lighter:!0,100:!0,200:!0,300:!0,400:!0,500:!0,600:!0,700:!0,800:!0,900:!0},r={start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},i={top:"top",hanging:"hanging",middle:"middle",center:"middle",alphabetic:"alphabetic",ideographic:"ideographic",bottom:"bottom"};return{extend:"Ext.draw.sprite.Sprite",requires:["Ext.draw.TextMeasurer","Ext.draw.Color"],alias:"sprite.text",type:"text",lineBreakRe:/\r?\n/g,statics:{debug:!1,fontSizes:t,fontWeights:e,textAlignments:r,textBaselines:i},inheritableStatics:{def:{animationProcessors:{text:"text"},processors:{x:"number",y:"number",text:"string",fontSize:function(e){return Ext.isNumber(+e)?e+"px":e.match(Ext.dom.Element.unitRe)?e:e in t?e:void 0},fontStyle:"enums(,italic,oblique)",fontVariant:"enums(,small-caps)",fontWeight:function(t){return t in e?String(t):""},fontFamily:"string",textAlign:function(t){return r[t]||"center"},textBaseline:function(t){return i[t]||"alphabetic"},font:"string",debug:"default"},aliases:{"font-size":"fontSize","font-family":"fontFamily","font-weight":"fontWeight","font-variant":"fontVariant","text-anchor":"textAlign"},defaults:{fontStyle:"",fontVariant:"",fontWeight:"",fontSize:"10px",fontFamily:"sans-serif",font:"10px sans-serif",textBaseline:"alphabetic",textAlign:"start",strokeStyle:"rgba(0, 0, 0, 0)",fillStyle:"#000",x:0,y:0,text:""},triggers:{fontStyle:"fontX,bbox",fontVariant:"fontX,bbox",fontWeight:"fontX,bbox",fontSize:"fontX,bbox",fontFamily:"fontX,bbox",font:"font,bbox,canvas",textBaseline:"bbox",textAlign:"bbox",x:"bbox",y:"bbox",text:"bbox"},updaters:{fontX:"makeFontShorthand",font:"parseFontShorthand"}}},config:{preciseMeasurement:void 0},constructor:function(t){if(t&&t.font){t=Ext.clone(t);for(var e in t)"font"!==e&&0===e.indexOf("font")&&delete t[e]}Ext.draw.sprite.Sprite.prototype.constructor.call(this,t)},fontValuesMap:{italic:"fontStyle",oblique:"fontStyle","small-caps":"fontVariant",bold:"fontWeight",bolder:"fontWeight",lighter:"fontWeight",100:"fontWeight",200:"fontWeight",300:"fontWeight",400:"fontWeight",500:"fontWeight",600:"fontWeight",700:"fontWeight",800:"fontWeight",900:"fontWeight","xx-small":"fontSize","x-small":"fontSize",small:"fontSize",medium:"fontSize",large:"fontSize","x-large":"fontSize","xx-large":"fontSize"},makeFontShorthand:function(t){var e=[];t.fontStyle&&e.push(t.fontStyle),t.fontVariant&&e.push(t.fontVariant),t.fontWeight&&e.push(t.fontWeight),t.fontSize&&e.push(t.fontSize),t.fontFamily&&e.push(t.fontFamily),this.setAttributes({font:e.join(" ")},!0)},parseFontShorthand:function(t){for(var e,r,i,n,a=t.font,s=a.length,o={},l=this.fontValuesMap,h=0;s>h&&-1!==e;){if(e=a.indexOf(" ",h),0>e)i=a.substr(h);else{if(!(e>h))continue;i=a.substr(h,e-h)}if(r=i.indexOf("/"),r>0)i=i.substr(0,r);else if(0===r)continue;if("normal"!==i&&"inherit"!==i)if(n=l[i])o[n]=i;else{if(!i.match(Ext.dom.Element.unitRe)){o.fontFamily=a.substr(h);break}o.fontSize=i}h=e+1}o.fontStyle||(o.fontStyle=""),o.fontVariant||(o.fontVariant=""),o.fontWeight||(o.fontWeight=""),this.setAttributes(o,!0)},fontProperties:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,fontFamily:!0},setAttributes:function(t,e,r){var i,n;if(t&&t.font){n={};for(i in t)i in this.fontProperties||(n[i]=t[i]);t=n}this.callParent([t,e,r])},getBBox:function(t){var e=this,r=e.attr.bbox.plain,i=e.getSurface();return r.dirty&&(e.updatePlainBBox(r),r.dirty=!1),i&&i.getInherited().rtl&&i.getFlipRtlText()&&e.updatePlainBBox(r,!0),e.callParent([t])},rtlAlignments:{start:"end",center:"center",end:"start"},updatePlainBBox:function(t,e){var r,i,n=this,a=n.attr,s=a.x,o=a.y,l=[],h=a.font,c=a.text,u=a.textBaseline,d=a.textAlign,g=n.getPreciseMeasurement();e&&n.oldSize?r=n.oldSize:(i=Ext.draw.TextMeasurer.precise,Ext.isBoolean(g)&&(Ext.draw.TextMeasurer.precise=g),r=n.oldSize=Ext.draw.TextMeasurer.measureText(c,h),Ext.draw.TextMeasurer.precise=i);var f,p,m=n.getSurface(),x=m&&m.getInherited().rtl||!1,y=x&&m.getFlipRtlText(),b=r.sizes,v=r.height,E=r.width,S=b?b.length:0,M=0;switch(u){case"hanging":case"top":break;case"ideographic":case"bottom":o-=v;break;case"alphabetic":o-=.8*v;break;case"middle":o-=.5*v}switch(y&&(p=m.getRect(),s=p[2]-p[0]-s,d=n.rtlAlignments[d]),d){case"start":if(x)for(;S>M;M++)f=b[M].width,l.push(-(E-f));break;case"end":if(s-=E,x)break;for(;S>M;M++)f=b[M].width,l.push(E-f);break;case"center":for(s-=.5*E;S>M;M++)f=b[M].width,l.push((x?-1:1)*(E-f)*.5)}a.textAlignOffsets=l,t.x=s,t.y=o,t.width=E,t.height=v},setText:function(t){this.setAttributes({text:t},!0)},render:function(t,e,r){var i,n,a,s,o,l=this,h=l.attr,c=Ext.draw.Matrix.fly(h.matrix.elements.slice(0)),u=l.getBBox(!0),d=h.textAlignOffsets,g=Ext.util.Color.RGBA_NONE;if(0!==h.text.length){for(s=h.text.split(l.lineBreakRe),o=u.height/s.length,i=h.bbox.plain.x,n=h.bbox.plain.y+.78*o,c.toContext(e),t.getInherited().rtl&&(i+=h.bbox.plain.width),a=0;a<s.length;a++)e.fillStyle!==g&&e.fillText(s[a],i+(d[a]||0),n+o*a),e.strokeStyle!==g&&e.strokeText(s[a],i+(d[a]||0),n+o*a);var f=h.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;f&&(this.attr.inverseMatrix.toContext(e),f.bbox&&l.renderBBox(t,e))}}}}),Ext.define("Ext.draw.sprite.Tick",{extend:"Ext.draw.sprite.Line",alias:"sprite.tick",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"tick",y:"tick",size:"tick"},updaters:{tick:function(t){var e=1.5*t.size,r=t.lineWidth/2,i=t.x,n=t.y;this.setAttributes({fromX:i-r,fromY:n-e,toX:i-r,toY:n+e})}}}}}),Ext.define("Ext.draw.sprite.Triangle",{extend:"Ext.draw.sprite.Path",alias:"sprite.triangle",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(t,e){var r=2.2*e.size,i=e.x,n=e.y;t.fromSvgString("M".concat(i,",",n,"m0-",.48*r,"l",.5*r,",",.87*r,"-",r,",0z"))}}),Ext.define("Ext.draw.gradient.Linear",{extend:"Ext.draw.gradient.Gradient",requires:["Ext.draw.Color"],type:"linear",config:{degrees:0,radians:0},applyRadians:function(t,e){return Ext.isNumber(t)?t:e},applyDegrees:function(t,e){return Ext.isNumber(t)?t:e},updateRadians:function(t){this.setDegrees(Ext.draw.Draw.degrees(t))},updateDegrees:function(t){this.setRadians(Ext.draw.Draw.rad(t))},generateGradient:function(t,e){var r,i,n,a=this.getRadians(),s=Math.cos(a),o=Math.sin(a),l=e.width,h=e.height,c=e.x+.5*l,u=e.y+.5*h,d=this.getStops(),g=d.length;if(Ext.isNumber(c)&&Ext.isNumber(u)&&h>0&&l>0){for(i=Math.sqrt(h*h+l*l)*Math.abs(Math.cos(a-Math.atan(h/l)))/2,r=t.createLinearGradient(c+s*i,u+o*i,c-s*i,u-o*i),n=0;g>n;n++)r.addColorStop(d[n].offset,d[n].color);return r}return Ext.util.Color.NONE}}),Ext.define("Ext.draw.gradient.Radial",{extend:"Ext.draw.gradient.Gradient",type:"radial",config:{start:{x:0,y:0,r:0},end:{x:0,y:0,r:1}},applyStart:function(t,e){if(!e)return t;var r={x:e.x,y:e.y,r:e.r};return"x"in t?r.x=t.x:"centerX"in t&&(r.x=t.centerX),"y"in t?r.y=t.y:"centerY"in t&&(r.y=t.centerY),"r"in t?r.r=t.r:"radius"in t&&(r.r=t.radius),r},applyEnd:function(t,e){if(!e)return t;var r={x:e.x,y:e.y,r:e.r};return"x"in t?r.x=t.x:"centerX"in t&&(r.x=t.centerX),"y"in t?r.y=t.y:"centerY"in t&&(r.y=t.centerY),"r"in t?r.r=t.r:"radius"in t&&(r.r=t.radius),r},generateGradient:function(t,e){var r,i=this.getStart(),n=this.getEnd(),a=.5*e.width,s=.5*e.height,o=e.x+a,l=e.y+s,h=t.createRadialGradient(o+i.x*a,l+i.y*s,i.r*Math.max(a,s),o+n.x*a,l+n.y*s,n.r*Math.max(a,s)),c=this.getStops(),u=c.length;for(r=0;u>r;r++)h.addColorStop(c[r].offset,c[r].color);return h}}),Ext.define("Ext.draw.Surface",{extend:"Ext.draw.SurfaceBase",xtype:"surface",requires:["Ext.draw.sprite.*","Ext.draw.gradient.*","Ext.draw.sprite.AttributeDefinition","Ext.draw.Matrix","Ext.draw.Draw"],uses:["Ext.draw.engine.Canvas"],devicePixelRatio:window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,deprecated:{"5.1.0":{statics:{methods:{stableSort:function(t){return Ext.Array.sort(t,function(t,e){return t.attr.zIndex-e.attr.zIndex})}}}}},cls:Ext.baseCSSPrefix+"surface",config:{rect:null,background:null,items:[],dirty:!1,flipRtlText:!1},isSurface:!0,isPendingRenderFrame:!1,dirtyPredecessorCount:0,constructor:function(t){var e=this;e.predecessors=[],e.successors=[],e.map={},e.callParent([t]),e.matrix=new Ext.draw.Matrix,e.inverseMatrix=e.matrix.inverse()},roundPixel:function(t){return Math.round(this.devicePixelRatio*t)/this.devicePixelRatio},waitFor:function(t){var e=this,r=e.predecessors;Ext.Array.contains(r,t)||(r.push(t),t.successors.push(e),t.getDirty()&&e.dirtyPredecessorCount++)},updateDirty:function(t){for(var e,r=this.successors,i=r.length,n=0;i>n;n++)e=r[n],t?(e.dirtyPredecessorCount++,e.setDirty(!0)):(e.dirtyPredecessorCount--,0===e.dirtyPredecessorCount&&e.isPendingRenderFrame&&e.renderFrame())},applyBackground:function(t,e){return this.setDirty(!0),Ext.isString(t)&&(t={fillStyle:t}),Ext.factory(t,Ext.draw.sprite.Rect,e)},applyRect:function(t,e){return e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]?void 0:Ext.isArray(t)?[t[0],t[1],t[2],t[3]]:Ext.isObject(t)?[t.x||t.left,t.y||t.top,t.width||t.right-t.left,t.height||t.bottom-t.top]:void 0},updateRect:function(t){var e=this,r=t[0],i=t[1],n=r+t[2],a=i+t[3],s=e.getBackground(),o=e.element;o.setLocalXY(Math.floor(r),Math.floor(i)),o.setSize(Math.ceil(n-Math.floor(r)),Math.ceil(a-Math.floor(i))),s&&s.setAttributes({x:0,y:0,width:Math.ceil(n-Math.floor(r)),height:Math.ceil(a-Math.floor(i))}),e.setDirty(!0)},resetTransform:function(){this.matrix.set(1,0,0,1,0,0),this.inverseMatrix.set(1,0,0,1,0,0),this.setDirty(!0)},get:function(t){return this.map[t]||this.getItems()[t]},add:function(){var t,e,r,i,n,a,s=this,o=Array.prototype.slice.call(arguments),l=Ext.isArray(o[0]),h=s.map,c=[];if(t=Ext.Array.clean(l?o[0]:o),!t.length)return c;for(n=0,a=t.length;a>n;n++)e=t[n],e&&!e.destroyed&&(r=null,e.isSprite&&!h[e.getId()]?r=e:h[e.id]||(r=this.createItem(e)),r&&(h[r.getId()]=r,c.push(r),i=r.getSurface(),i&&i.isSurface&&i.remove(r),r.setParent(s),r.setSurface(s),s.onAdd(r)));return t=s.getItems(),t&&t.push.apply(t,c),s.dirtyZIndex=!0,s.setDirty(!0),l||1!==c.length?c:c[0]},onAdd:Ext.emptyFn,remove:function(t,e){var r,i,n=this,a=n.clearing;if(t){if(t.charAt&&(t=n.map[t]),!t||!t.isSprite)return null;if(r=t.id,i=n.map[r],delete n.map[r],t.destroyed||t.destroying)return i&&!a&&Ext.Array.remove(n.getItems(),t),t;if(!i)return e&&t.destroy(),t;t.setParent(null),t.setSurface(null),e&&t.destroy(),a||(Ext.Array.remove(n.getItems(),t),n.dirtyZIndex=!0,n.setDirty(!0))}return t||null},removeAll:function(t){var e,r,i=this,n=i.getItems();for(i.clearing=!!t,r=n.length-1;r>=0;r--)e=n[r],t?e.destroy():(e.setParent(null),e.setSurface(null));i.clearing=!1,n.length=0,i.map={},i.dirtyZIndex=!0,i.destroying||i.setDirty(!0)},applyItems:function(t){return this.getItems()&&this.removeAll(!0),Ext.Array.from(this.add(t))},createItem:function(t){return Ext.create(t.xclass||"sprite."+t.type,t)},getBBox:function(t,e){t=Ext.Array.from(t);var r,i,n,a=1/0,s=-(1/0),o=1/0,l=-(1/0),h=t.length;for(n=0;h>n;n++)r=t[n],i=r.getBBox(e),a>i.x&&(a=i.x),s<i.x+i.width&&(s=i.x+i.width),o>i.y&&(o=i.y),l<i.y+i.height&&(l=i.y+i.height);return{x:a,y:o,width:s-a,height:l-o}},emptyRect:[0,0,0,0],getEventXY:function(t){var e,r=this,i=r.getInherited().rtl,n=t.getXY(),a=r.getOwnerBody(),s=a.getXY(),o=r.getRect()||r.emptyRect,l=[];return i?(e=a.getWidth(),l[0]=s[0]-n[0]-o[0]+e):l[0]=n[0]-s[0]-o[0],l[1]=n[1]-s[1]-o[1],l},clear:Ext.emptyFn,orderByZIndex:function(){var t,e,r=this,i=r.getItems(),n=!1;if(r.getDirty()){for(t=0,e=i.length;e>t;t++)if(i[t].attr.dirtyZIndex){n=!0;break}for(n&&(Ext.Array.sort(i,function(t,e){return t.attr.zIndex-e.attr.zIndex}),this.setDirty(!0)),t=0,e=i.length;e>t;t++)i[t].attr.dirtyZIndex=!1}},repaint:function(){var t=this;t.repaint=Ext.emptyFn,Ext.defer(function(){delete t.repaint,t.element.repaint()},1)},renderFrame:function(){var t=this;if(t.element&&t.getDirty()&&t.getRect()){if(t.dirtyPredecessorCount>0)return void(t.isPendingRenderFrame=!0);var e,r,i,n=t.getBackground(),a=t.getItems();if(t.orderByZIndex(),t.getDirty()){for(t.clear(),t.clearTransform(),n&&t.renderSprite(n),r=0,i=a.length;i>r;r++){if(e=a[r],t.renderSprite(e)===!1)return;e.attr.textPositionCount=t.textPosition}t.setDirty(!1)}}},renderSprite:Ext.emptyFn,clearTransform:Ext.emptyFn,destroy:function(){var t=this;t.destroying=!0,t.removeAll(!0),t.destroying=!1,t.predecessors=t.successors=null,t.hasListeners.destroy&&t.fireEvent("destroy",t),t.callParent()}}),Ext.define("Ext.draw.overrides.hittest.Surface",{override:"Ext.draw.Surface",hitTest:function(t,e){var r,i,n,a=this,s=a.getItems();for(e=e||Ext.draw.sprite.Sprite.defaultHitTestOptions,r=s.length-1;r>=0;r--)if(i=s[r],i.hitTest&&(n=i.hitTest(t,e)))return n;return null},hitTestEvent:function(t,e){var r=this.getEventXY(t);return this.hitTest(r,e)}}),Ext.define("Ext.draw.engine.SvgContext",{requires:["Ext.draw.Color"],toSave:["strokeOpacity","strokeStyle","fillOpacity","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","position","fillGradient","strokeGradient"],strokeOpacity:1,strokeStyle:"none",fillOpacity:1,fillStyle:"none",lineDas:[],lineDashOffset:0,globalAlpha:1,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"none",globalCompositeOperation:"src",urlStringRe:/^url\(#([\w\-]+)\)$/,constructor:function(t){var e=this;e.surface=t,e.state=[],e.matrix=new Ext.draw.Matrix,e.path=null,e.clear()},clear:function(){this.group=this.surface.mainGroup,this.position=0,this.path=null},getElement:function(t){return this.surface.getSvgElement(this.group,t,this.position++)},save:function(){var t,e,r=this.toSave,i={},n=this.getElement("g");for(e=0;e<r.length;e++)t=r[e],t in this&&(i[t]=this[t]);return this.position=0,i.matrix=this.matrix.clone(),this.state.push(i),this.group=n,n},restore:function(){for(var t,e,r=this.toSave,i=this.state.pop(),n=this.group,a=n.dom.childNodes;a.length>this.position;)n.last().destroy();for(e=0;e<r.length;e++)t=r[e],t in i?this[t]=i[t]:delete this[t];this.setTransform.apply(this,i.matrix.elements),this.group=n.getParent()},transform:function(t,e,r,i,n,a){if(this.path){var s=Ext.draw.Matrix.fly([t,e,r,i,n,a]).inverse();this.path.transform(s)}this.matrix.append(t,e,r,i,n,a)},setTransform:function(t,e,r,i,n,a){this.path&&this.path.transform(this.matrix),this.matrix.reset(),this.transform(t,e,r,i,n,a)},scale:function(t,e){this.transform(t,0,0,e,0,0)},rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=-Math.sin(t),n=Math.cos(t);this.transform(e,r,i,n,0,0)},translate:function(t,e){this.transform(1,0,0,1,t,e)},setGradientBBox:function(t){this.bbox=t},beginPath:function(){this.path=new Ext.draw.Path},moveTo:function(t,e){this.path||this.beginPath(),this.path.moveTo(t,e),this.path.element=null},lineTo:function(t,e){this.path||this.beginPath(),this.path.lineTo(t,e),this.path.element=null},rect:function(t,e,r,i){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+i),this.lineTo(t,e+i),this.closePath()},strokeRect:function(t,e,r,i){this.beginPath(),this.rect(t,e,r,i),this.stroke()},fillRect:function(t,e,r,i){this.beginPath(),this.rect(t,e,r,i),this.fill()},closePath:function(){this.path||this.beginPath(),this.path.closePath(),this.path.element=null},arcSvg:function(t,e,r,i,n,a,s){this.path||this.beginPath(),this.path.arcSvg(t,e,r,i,n,a,s),this.path.element=null},arc:function(t,e,r,i,n,a){this.path||this.beginPath(),this.path.arc(t,e,r,i,n,a),this.path.element=null},ellipse:function(t,e,r,i,n,a,s,o){this.path||this.beginPath(),this.path.ellipse(t,e,r,i,n,a,s,o),this.path.element=null},arcTo:function(t,e,r,i,n,a,s){this.path||this.beginPath(),this.path.arcTo(t,e,r,i,n,a,s),this.path.element=null},bezierCurveTo:function(t,e,r,i,n,a){this.path||this.beginPath(),this.path.bezierCurveTo(t,e,r,i,n,a),this.path.element=null},strokeText:function(t,e,r){if(t=String(t),this.strokeStyle){var i=this.getElement("text"),n=this.surface.getSvgElement(i,"tspan",0);this.surface.setElementAttributes(i,{x:e,y:r,transform:this.matrix.toSvg(),stroke:this.strokeStyle,fill:"none",opacity:this.globalAlpha,"stroke-opacity":this.strokeOpacity,style:"font: "+this.font,"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),this.lineDash.length&&this.surface.setElementAttributes(i,{"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),n.dom.firstChild&&n.dom.removeChild(n.dom.firstChild),this.surface.setElementAttributes(n,{"alignment-baseline":"alphabetic"}),n.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(t)))}},fillText:function(t,e,r){if(t=String(t),this.fillStyle){var i=this.getElement("text"),n=this.surface.getSvgElement(i,"tspan",0);this.surface.setElementAttributes(i,{x:e,y:r,transform:this.matrix.toSvg(),fill:this.fillStyle,opacity:this.globalAlpha,"fill-opacity":this.fillOpacity,style:"font: "+this.font}),n.dom.firstChild&&n.dom.removeChild(n.dom.firstChild),this.surface.setElementAttributes(n,{"alignment-baseline":"alphabetic"}),n.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(t)))}},drawImage:function(t,e,r,i,n,a,s,o,l){var h=this,c=h.getElement("image"),u=e,d=r,g="undefined"==typeof i?t.width:i,f="undefined"==typeof n?t.height:n,p=null;"undefined"!=typeof l&&(p=e+" "+r+" "+i+" "+n,u=a,d=s,g=o,f=l),c.dom.setAttributeNS("http://www.w3.org/1999/xlink","href",t.src),h.surface.setElementAttributes(c,{viewBox:p,x:u,y:d,width:g,height:f,opacity:h.globalAlpha,transform:h.matrix.toSvg()})},fill:function(){var t=this;if(t.path&&t.fillStyle){var e,r,i=t.fillGradient,n=t.path.element,a=t.bbox;n||(e=t.path.toString(),n=t.path.element=t.getElement("path"),t.surface.setElementAttributes(n,{d:e,transform:t.matrix.toSvg()})),r=i&&a?i.generateGradient(t,a):t.fillStyle,t.surface.setElementAttributes(n,{fill:r,"fill-opacity":t.fillOpacity*t.globalAlpha})}},stroke:function(){var t=this;if(t.path&&t.strokeStyle){var e,r,i=t.strokeGradient,n=t.path.element,a=t.bbox;if(!n||!t.path.svgString){if(e=t.path.toString(),!e)return;n=t.path.element=t.getElement("path"),t.surface.setElementAttributes(n,{fill:"none",d:e,transform:t.matrix.toSvg()})}r=i&&a?i.generateGradient(t,a):t.strokeStyle,t.surface.setElementAttributes(n,{stroke:r,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,"stroke-width":t.lineWidth,"stroke-opacity":t.strokeOpacity*t.globalAlpha,"stroke-dasharray":t.lineDash.join(","),"stroke-dashoffset":t.lineDashOffset}),t.lineDash.length&&t.surface.setElementAttributes(n,{"stroke-dasharray":t.lineDash.join(","),"stroke-dashoffset":t.lineDashOffset})}},fillStroke:function(t,e){var r=this,i=r.fillStyle,n=r.strokeStyle,a=r.fillOpacity,s=r.strokeOpacity;void 0===e&&(e=t.transformFillStroke),e||t.inverseMatrix.toContext(r),i&&0!==a&&r.fill(),n&&0!==s&&r.stroke()},appendPath:function(t){this.path=t.clone()},setLineDash:function(t){this.lineDash=t},getLineDash:function(){return this.lineDash},createLinearGradient:function(t,e,r,i){var n,a=this,s=a.surface.getNextDef("linearGradient");return a.surface.setElementAttributes(s,{x1:t,y1:e,x2:r,y2:i,gradientUnits:"userSpaceOnUse"}),n=new Ext.draw.engine.SvgContext.Gradient(a,a.surface,s)},createRadialGradient:function(t,e,r,i,n,a){var s,o=this,l=o.surface.getNextDef("radialGradient");return o.surface.setElementAttributes(l,{fx:t,fy:e,cx:i,cy:n,r:a,gradientUnits:"userSpaceOnUse"}),s=new Ext.draw.engine.SvgContext.Gradient(o,o.surface,l,r/a)}}),Ext.define("Ext.draw.engine.SvgContext.Gradient",{isGradient:!0,constructor:function(t,e,r,i){var n=this;n.ctx=t,n.surface=e,n.element=r,n.position=0,n.compression=i||0},addColorStop:function(t,e){var r=this,i=r.surface.getSvgElement(r.element,"stop",r.position++),n=r.compression;r.surface.setElementAttributes(i,{offset:(100*((1-n)*t+n)).toFixed(2)+"%","stop-color":e,"stop-opacity":Ext.util.Color.fly(e).a.toFixed(15)})},toString:function(){for(var t=this.element.dom.childNodes;t.length>this.position;)Ext.fly(t[t.length-1]).destroy();return"url(#"+this.element.getId()+")"}}),Ext.define("Ext.draw.engine.Svg",{extend:"Ext.draw.Surface",requires:["Ext.draw.engine.SvgContext"],isSVG:!0,config:{highPrecision:!1},getElementConfig:function(){return{reference:"element",style:{position:"absolute"},children:[{reference:"innerElement",style:{width:"100%",height:"100%",position:"relative"},children:[{tag:"svg",reference:"svgElement",namespace:"http://www.w3.org/2000/svg",width:"100%",height:"100%",version:1.1}]}]}},constructor:function(t){var e=this;e.callParent([t]),e.mainGroup=e.createSvgNode("g"),e.defsElement=e.createSvgNode("defs"),e.svgElement.appendChild(e.mainGroup),e.svgElement.appendChild(e.defsElement),e.ctx=new Ext.draw.engine.SvgContext(e)},createSvgNode:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return Ext.get(e)},getSvgElement:function(t,e,r){var i,n=t.dom.childNodes,a=n.length;if(a>r){if(i=n[r],i.tagName===e)return Ext.get(i);Ext.destroy(i)}else r>a&&Ext.raise("Invalid position.");return i=Ext.get(this.createSvgNode(e)),0===r?t.insertFirst(i):i.insertAfter(Ext.fly(n[r-1])),i.cache={},i},setElementAttributes:function(t,e){var r,i,n=t.dom,a=t.cache;for(r in e)i=e[r],a[r]!==i&&(a[r]=i,n.setAttribute(r,i))},getNextDef:function(t){return this.getSvgElement(this.defsElement,t,this.defsPosition++)},clearTransform:function(){var t=this;t.mainGroup.set({transform:t.matrix.toSvg()})},clear:function(){this.ctx.clear(),this.removeSurplusDefs(),this.defsPosition=0},removeSurplusDefs:function(){var t,e=this.defsElement,r=e.dom.childNodes,i=r.length;for(t=i-1;t>this.defsPosition;t--)e.removeChild(r[t])},renderSprite:function(t){var e=this,r=e.getRect(),i=e.ctx;return t.attr.hidden||0===t.attr.globalAlpha?(i.save(),void i.restore()):(t.element=i.save(),t.preRender(this),t.useAttributes(i,r),!1===t.render(this,i,[0,0,r[2],r[3]])?!1:(t.setDirty(!1),void i.restore()))},toSVG:function(t,e){var r,i,n,a,s=Ext.getClassName(this);for(r='<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="'+t.width+'" height="'+t.height+'">',a=0;a<e.length;a++)i=e[a],Ext.getClassName(i)===s&&(n=i.getRect(),r+='<g transform="translate('+n[0]+","+n[1]+')">',r+=this.serializeNode(i.svgElement.dom),r+="</g>");return r+="</svg>"},flatten:function(t,e){var r='<?xml version="1.0" standalone="yes"?>';return r+=this.toSVG(t,e),{data:"data:image/svg+xml;utf8,"+encodeURIComponent(r),type:"svg"}},serializeNode:function(t){var e,r,i,n,a="";if(t.nodeType===document.TEXT_NODE)return t.nodeValue;if(a+="<"+t.nodeName,t.attributes.length)for(e=0,r=t.attributes.length;r>e;e++)i=t.attributes[e],a+=" "+i.name+'="'+i.value+'"';if(a+=">",t.childNodes&&t.childNodes.length)for(e=0,r=t.childNodes.length;r>e;e++)n=t.childNodes[e],a+=this.serializeNode(n);return a+="</"+t.nodeName+">"},destroy:function(){var t=this;t.ctx.destroy(),t.mainGroup.destroy(),t.defsElement.destroy(),delete t.mainGroup,delete t.defsElement,delete t.ctx,t.callParent()},remove:function(t,e){t&&t.element&&(t.element.destroy(),t.element=null),this.callParent(arguments)}}),Ext.draw||(Ext.draw={}),Ext.draw.engine||(Ext.draw.engine={}),Ext.draw.engine.excanvas=!0,document.createElement("canvas").getContext||!function(){
function t(){return this.context_||(this.context_=new v(this))}function e(t,e,r){var i=G.call(arguments,2);return function(){return t.apply(e,i.concat(G.call(arguments)))}}function r(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(t,e,r){Ext.onReady(function(){t.namespaces[e]||t.namespaces.add(e,r,"#default#VML")})}function n(t){if(i(t,"g_vml_","urn:schemas-microsoft-com:vml"),i(t,"g_o_","urn:schemas-microsoft-com:office:office"),!t.styleSheets.ex_canvas_){var e=t.createStyleSheet();e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function a(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function s(t){var e=t.srcElement;e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}function o(){return[[1,0,0],[0,1,0],[0,0,1]]}function l(t,e){for(var r=o(),i=0;3>i;i++)for(var n=0;3>n;n++){for(var a=0,s=0;3>s;s++)a+=t[i][s]*e[s][n];r[i][n]=a}return r}function h(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineDash=t.lineDash,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function c(t){var e=t.indexOf("(",3),r=t.indexOf(")",e+1),i=t.substring(e+1,r).split(",");return(4!=i.length||"a"!=t.charAt(3))&&(i[3]=1),i}function u(t){return parseFloat(t)/100}function d(t,e,r){return Math.min(r,Math.max(e,t))}function g(t){var e,r,i,n,a,s;if(n=parseFloat(t[0])/360%360,0>n&&n++,a=d(u(t[1]),0,1),s=d(u(t[2]),0,1),0==a)e=r=i=s;else{var o=.5>s?s*(1+a):s+a-s*a,l=2*s-o;e=f(l,o,n+1/3),r=f(l,o,n),i=f(l,o,n-1/3)}return"#"+N[Math.floor(255*e)]+N[Math.floor(255*r)]+N[Math.floor(255*i)]}function f(t,e,r){return 0>r&&r++,r>1&&r--,1>6*r?t+6*(e-t)*r:1>2*r?e:2>3*r?t+(e-t)*(2/3-r)*6:t}function p(t){if(t in q)return q[t];var e,r=1;if(t=String(t),"#"==t.charAt(0))e=t;else if(/^rgb/.test(t)){for(var i,n=c(t),e="#",a=0;3>a;a++)i=-1!=n[a].indexOf("%")?Math.floor(255*u(n[a])):+n[a],e+=N[d(i,0,255)];r=+n[3]}else if(/^hsl/.test(t)){var n=c(t);e=g(n),r=n[3]}else e=W[t]||t;return q[t]={color:e,alpha:r}}function m(t){if(V[t])return V[t];var e=document.createElement("div"),r=e.style;try{r.font=t}catch(i){}return V[t]={style:r.fontStyle||j.style,variant:r.fontVariant||j.variant,weight:r.fontWeight||j.weight,size:r.fontSize||j.size,family:r.fontFamily||j.family}}function x(t,e){var r={};for(var i in t)r[i]=t[i];var n=parseFloat(e.currentStyle.fontSize),a=parseFloat(t.size);return r.size="number"==typeof t.size?t.size:-1!=t.size.indexOf("px")?a:-1!=t.size.indexOf("em")?n*a:-1!=t.size.indexOf("%")?n/100*a:-1!=t.size.indexOf("pt")?a/.75:n,r.size*=.981,r}function y(t){return t.style+" "+t.variant+" "+t.weight+" "+t.size+"px "+t.family}function b(t){return Z[t]||"square"}function v(t){this.m_=o(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineDash=[],this.lineCap="butt",this.miterLimit=1*O,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",r=t.ownerDocument.createElement("div");r.style.cssText=e,t.appendChild(r);var i=r.cloneNode(!1);i.style.backgroundColor="red",i.style.filter="alpha(opacity=0)",t.appendChild(i),this.element_=r,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function E(t,e,r,i){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:r.x,cp2y:r.y,x:i.x,y:i.y}),t.currentX_=i.x,t.currentY_=i.y}function S(t,e){var r=p(t.strokeStyle),i=r.color,n=r.alpha*t.globalAlpha,a=t.lineScale_*t.lineWidth;1>a&&(n*=a),e.push("<g_vml_:stroke",' opacity="',n,'"',' joinstyle="',t.lineJoin,'"',' dashstyle="',t.lineDash.join(" "),'"',' miterlimit="',t.miterLimit,'"',' endcap="',b(t.lineCap),'"',' weight="',a,'px"',' color="',i,'" />')}function M(t,e,r,i){var n=t.fillStyle,a=t.arcScaleX_,s=t.arcScaleY_,o=i.x-r.x,l=i.y-r.y;if(n instanceof k){var h=0,c={x:0,y:0},u=0,d=1;if("gradient"==n.type_){var g=n.x0_/a,f=n.y0_/s,m=n.x1_/a,x=n.y1_/s,y=C(t,g,f),b=C(t,m,x),v=b.x-y.x,E=b.y-y.y;h=180*Math.atan2(v,E)/Math.PI,0>h&&(h+=360),1e-6>h&&(h=0)}else{var y=C(t,n.x0_,n.y0_);c={x:(y.x-r.x)/o,y:(y.y-r.y)/l},o/=a*O,l/=s*O;var S=D.max(o,l);u=2*n.r0_/S,d=2*n.r1_/S-u}var M=n.colors_;M.sort(function(t,e){return t.offset-e.offset});for(var w=M.length,A=M[0].color,T=M[w-1].color,I=M[0].alpha*t.globalAlpha,R=M[w-1].alpha*t.globalAlpha,F=[],Y=0;w>Y;Y++){var X=M[Y];F.push(X.offset*d+u+" "+X.color)}e.push('<g_vml_:fill type="',n.type_,'"',' method="none" focus="100%"',' color="',A,'"',' color2="',T,'"',' colors="',F.join(","),'"',' opacity="',R,'"',' g_o_:opacity2="',I,'"',' angle="',h,'"',' focusposition="',c.x,",",c.y,'" />')}else if(n instanceof P){if(o&&l){var B=-r.x,L=-r.y;e.push("<g_vml_:fill",' position="',B/o*a*a,",",L/l*s*s,'"',' type="tile"',' src="',n.src_,'" />')}}else{var z=p(t.fillStyle),G=z.color,_=z.alpha*t.globalAlpha;e.push('<g_vml_:fill color="',G,'" opacity="',_,'" />')}}function C(t,e,r){var i=t.m_;return{x:O*(e*i[0][0]+r*i[1][0]+i[2][0])-z,y:O*(e*i[0][1]+r*i[1][1]+i[2][1])-z}}function w(t){return isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])}function A(t,e,r){if(w(e)&&(t.m_=e,r)){var i=e[0][0]*e[1][1]-e[0][1]*e[1][0];t.lineScale_=L(B(i))}}function k(t){this.type_=t,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function P(t,e){switch(I(t),e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:T("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function T(t){throw new R(t)}function I(t){t&&1==t.nodeType&&"IMG"==t.tagName||T("TYPE_MISMATCH_ERR"),"complete"!=t.readyState&&T("INVALID_STATE_ERR")}function R(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var D=Math,F=D.round,Y=D.sin,X=D.cos,B=D.abs,L=D.sqrt,O=10,z=O/2,G=(+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],Array.prototype.slice);n(document);var _={init:function(t){var r=t||document;r.createElement("canvas"),r.attachEvent("onreadystatechange",e(this.init_,this,r))},init_:function(t){for(var e=t.getElementsByTagName("canvas"),r=0;r<e.length;r++)this.initElement(e[r])},initElement:function(e){if(!e.getContext){e.getContext=t,n(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",a),e.attachEvent("onresize",s);var r=e.attributes;r.width&&r.width.specified?e.style.width=r.width.nodeValue+"px":e.width=e.clientWidth,r.height&&r.height.specified?e.style.height=r.height.nodeValue+"px":e.height=e.clientHeight}return e}};_.init();for(var N=[],H=0;16>H;H++)for(var U=0;16>U;U++)N[16*H+U]=H.toString(16)+U.toString(16);var W={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},q={},j={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"},V={},Z={butt:"flat",round:"round"},$=v.prototype;$.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},$.beginPath=function(){this.currentPath_=[]},$.moveTo=function(t,e){var r=C(this,t,e);this.currentPath_.push({type:"moveTo",x:r.x,y:r.y}),this.currentX_=r.x,this.currentY_=r.y},$.lineTo=function(t,e){var r=C(this,t,e);this.currentPath_.push({type:"lineTo",x:r.x,y:r.y}),this.currentX_=r.x,this.currentY_=r.y},$.bezierCurveTo=function(t,e,r,i,n,a){var s=C(this,n,a),o=C(this,t,e),l=C(this,r,i);E(this,o,l,s)},$.quadraticCurveTo=function(t,e,r,i){var n=C(this,t,e),a=C(this,r,i),s={x:this.currentX_+2/3*(n.x-this.currentX_),y:this.currentY_+2/3*(n.y-this.currentY_)},o={x:s.x+(a.x-this.currentX_)/3,y:s.y+(a.y-this.currentY_)/3};E(this,s,o,a)},$.arc=function(t,e,r,i,n,a){r*=O;var s=a?"at":"wa",o=t+X(i)*r-z,l=e+Y(i)*r-z,h=t+X(n)*r-z,c=e+Y(n)*r-z;o!=h||a||(o+=.125);var u=C(this,t,e),d=C(this,o,l),g=C(this,h,c);this.currentPath_.push({type:s,x:u.x,y:u.y,radius:r,xStart:d.x,yStart:d.y,xEnd:g.x,yEnd:g.y})},$.rect=function(t,e,r,i){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+i),this.lineTo(t,e+i),this.closePath()},$.strokeRect=function(t,e,r,i){var n=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+i),this.lineTo(t,e+i),this.closePath(),this.stroke(),this.currentPath_=n},$.fillRect=function(t,e,r,i){var n=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+i),this.lineTo(t,e+i),this.closePath(),this.fill(),this.currentPath_=n},$.createLinearGradient=function(t,e,r,i){var n=new k("gradient");return n.x0_=t,n.y0_=e,n.x1_=r,n.y1_=i,n},$.createRadialGradient=function(t,e,r,i,n,a){var s=new k("gradientradial");return s.x0_=t,s.y0_=e,s.r0_=r,s.x1_=i,s.y1_=n,s.r1_=a,s},$.drawImage=function(t,e){var r,i,n,a,s,o,l,h,c=t.runtimeStyle.width,u=t.runtimeStyle.height;t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var d=t.width,g=t.height;if(t.runtimeStyle.width=c,t.runtimeStyle.height=u,3==arguments.length)r=arguments[1],i=arguments[2],s=o=0,l=n=d,h=a=g;else if(5==arguments.length)r=arguments[1],i=arguments[2],n=arguments[3],a=arguments[4],s=o=0,l=d,h=g;else{if(9!=arguments.length)throw Error("Invalid number of arguments");s=arguments[1],o=arguments[2],l=arguments[3],h=arguments[4],r=arguments[5],i=arguments[6],n=arguments[7],a=arguments[8]}var f=C(this,r,i),p=[],m=10,x=10,y=this.m_;p.push(" <g_vml_:group",' coordsize="',O*m,",",O*x,'"',' coordorigin="0,0"',' style="width:',F(m*y[0][0]),"px;height:",F(x*y[1][1]),"px;position:absolute;","top:",F(f.y/O),"px;left:",F(f.x/O),"px; rotation:",F(180*Math.atan(y[0][1]/y[1][1])/Math.PI),";"),p.push('" >','<g_vml_:image src="',t.src,'"',' style="width:',O*n,"px;"," height:",O*a,'px"',' cropleft="',s/d,'"',' croptop="',o/g,'"',' cropright="',(d-s-l)/d,'"',' cropbottom="',(g-o-h)/g,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},$.setLineDash=function(t){1===t.length&&(t=t.slice(),t[1]=t[0]),this.lineDash=t},$.getLineDash=function(){return this.lineDash},$.stroke=function(t){var e=[],r=10,i=10;e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',r,"px;height:",i,'px;left:0px;top:0px;"',' coordorigin="0,0"',' coordsize="',O*r,",",O*i,'"',' stroked="',!t,'"',' path="');for(var n={x:null,y:null},a={x:null,y:null},s=0;s<this.currentPath_.length;s++){var o,l=this.currentPath_[s];switch(l.type){case"moveTo":o=l,e.push(" m ",F(l.x),",",F(l.y));break;case"lineTo":e.push(" l ",F(l.x),",",F(l.y));break;case"close":e.push(" x "),l=null;break;case"bezierCurveTo":e.push(" c ",F(l.cp1x),",",F(l.cp1y),",",F(l.cp2x),",",F(l.cp2y),",",F(l.x),",",F(l.y));break;case"at":case"wa":e.push(" ",l.type," ",F(l.x-this.arcScaleX_*l.radius),",",F(l.y-this.arcScaleY_*l.radius)," ",F(l.x+this.arcScaleX_*l.radius),",",F(l.y+this.arcScaleY_*l.radius)," ",F(l.xStart),",",F(l.yStart)," ",F(l.xEnd),",",F(l.yEnd))}l&&((null==n.x||l.x<n.x)&&(n.x=l.x),(null==a.x||l.x>a.x)&&(a.x=l.x),(null==n.y||l.y<n.y)&&(n.y=l.y),(null==a.y||l.y>a.y)&&(a.y=l.y))}e.push(' ">'),t?M(this,e,n,a):S(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},$.fill=function(){this.$stroke(!0)},$.closePath=function(){this.currentPath_.push({type:"close"})},$.save=function(){var t={};h(this,t),this.aStack_.push(t),this.mStack_.push(this.m_)},$.restore=function(){this.aStack_.length&&(h(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},$.translate=function(t,e){var r=[[1,0,0],[0,1,0],[t,e,1]];A(this,l(r,this.m_),!1)},$.rotate=function(t){var e=X(t),r=Y(t),i=[[e,r,0],[-r,e,0],[0,0,1]];A(this,l(i,this.m_),!1)},$.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e;var r=[[t,0,0],[0,e,0],[0,0,1]];A(this,l(r,this.m_),!0)},$.transform=function(t,e,r,i,n,a){var s=[[t,e,0],[r,i,0],[n,a,1]];A(this,l(s,this.m_),!0)},$.setTransform=function(t,e,r,i,n,a){var s=[[t,e,0],[r,i,0],[n,a,1]];A(this,s,!0)},$.drawText_=function(t,e,i,n,a){var s=this.m_,o=1e3,l=0,h=o,c={x:0,y:0},u=[],d=x(m(this.font),this.element_),g=y(d),f=this.element_.currentStyle,p=this.textAlign.toLowerCase();switch(p){case"left":case"center":case"right":break;case"end":p="ltr"==f.direction?"right":"left";break;case"start":p="rtl"==f.direction?"right":"left";break;default:p="left"}switch(this.textBaseline){case"hanging":case"top":c.y=d.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":c.y=-d.size/3}switch(p){case"right":l=o,h=.05;break;case"center":l=h=o/2}var b=C(this,e+c.x,i+c.y);u.push('<g_vml_:line from="',-l,' 0" to="',h,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!a,'" stroked="',!!a,'" style="position:absolute;width:1px;height:1px;left:0px;top:0px;">'),a?S(this,u):M(this,u,{x:-l,y:0},{x:h,y:d.size});var v=s[0][0].toFixed(3)+","+s[1][0].toFixed(3)+","+s[0][1].toFixed(3)+","+s[1][1].toFixed(3)+",0,0",E=F(b.x/O)+","+F(b.y/O);u.push('<g_vml_:skew on="t" matrix="',v,'" ',' offset="',E,'" origin="',l,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',r(t),'" style="v-text-align:',p,";font:",r(g),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",u.join(""))},$.fillText=function(t,e,r,i){this.drawText_(t,e,r,i,!1)},$.strokeText=function(t,e,r,i){this.drawText_(t,e,r,i,!0)},$.measureText=function(t){if(!this.textMeasureEl_){var e='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",e),this.textMeasureEl_=this.element_.lastChild}var r=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(r.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},$.clip=function(){},$.arcTo=function(){},$.createPattern=function(t,e){return new P(t,e)},k.prototype.addColorStop=function(t,e){e=p(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})};var J=R.prototype=new Error;J.INDEX_SIZE_ERR=1,J.DOMSTRING_SIZE_ERR=2,J.HIERARCHY_REQUEST_ERR=3,J.WRONG_DOCUMENT_ERR=4,J.INVALID_CHARACTER_ERR=5,J.NO_DATA_ALLOWED_ERR=6,J.NO_MODIFICATION_ALLOWED_ERR=7,J.NOT_FOUND_ERR=8,J.NOT_SUPPORTED_ERR=9,J.INUSE_ATTRIBUTE_ERR=10,J.INVALID_STATE_ERR=11,J.SYNTAX_ERR=12,J.INVALID_MODIFICATION_ERR=13,J.NAMESPACE_ERR=14,J.INVALID_ACCESS_ERR=15,J.VALIDATION_ERR=16,J.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=_,CanvasRenderingContext2D=v,CanvasGradient=k,CanvasPattern=P,DOMException=R}(),Ext.define("Ext.draw.engine.Canvas",{extend:"Ext.draw.Surface",isCanvas:!0,requires:["Ext.draw.engine.excanvas","Ext.draw.Animator","Ext.draw.Color"],config:{highPrecision:!1},statics:{contextOverrides:{setGradientBBox:function(t){this.bbox=t},fill:function(){var t=this.fillStyle,e=this.fillGradient,r=this.fillOpacity,i=this.globalAlpha,n=this.bbox;t!==Ext.util.Color.RGBA_NONE&&0!==r&&(e&&n&&(this.fillStyle=e.generateGradient(this,n)),1!==r&&(this.globalAlpha=i*r),this.$fill(),1!==r&&(this.globalAlpha=i),e&&n&&(this.fillStyle=t))},stroke:function(){var t=this.strokeStyle,e=this.strokeGradient,r=this.strokeOpacity,i=this.globalAlpha,n=this.bbox;t!==Ext.util.Color.RGBA_NONE&&0!==r&&(e&&n&&(this.strokeStyle=e.generateGradient(this,n)),1!==r&&(this.globalAlpha=i*r),this.$stroke(),1!==r&&(this.globalAlpha=i),e&&n&&(this.strokeStyle=t))},fillStroke:function(t,e){var r=this,i=this.fillStyle,n=this.fillOpacity,a=this.strokeStyle,s=this.strokeOpacity,o=r.shadowColor,l=r.shadowBlur,h=Ext.util.Color.RGBA_NONE;void 0===e&&(e=t.transformFillStroke),e||t.inverseMatrix.toContext(r),i!==h&&0!==n&&(r.fill(),r.shadowColor=h,r.shadowBlur=0),a!==h&&0!==s&&r.stroke(),r.shadowColor=o,r.shadowBlur=l},setLineDash:function(t){this.$setLineDash&&this.$setLineDash(t)},getLineDash:function(){return this.$getLineDash?this.$getLineDash():void 0},ellipse:function(t,e,r,i,n,a,s,o){var l=Math.cos(n),h=Math.sin(n);this.transform(l*r,h*r,-h*i,l*i,t,e),this.arc(0,0,1,a,s,o),this.transform(l/r,-h/i,h/r,l/i,-(l*t+h*e)/r,(h*t-l*e)/i)},appendPath:function(t){var e=this,r=0,i=0,n=t.commands,a=t.params,s=n.length;for(e.beginPath();s>r;r++)switch(n[r]){case"M":e.moveTo(a[i],a[i+1]),i+=2;break;case"L":e.lineTo(a[i],a[i+1]),i+=2;break;case"C":e.bezierCurveTo(a[i],a[i+1],a[i+2],a[i+3],a[i+4],a[i+5]),i+=6;break;case"Z":e.closePath()}},save:function(){for(var t,e=this.toSave,r=e.length,i=r&&{},n=0;r>n;n++)t=e[n],t in this&&(i[t]=this[t]);this.state.push(i),this.$save()},restore:function(){var t,e=this.state.pop();if(e)for(t in e)this[t]=e[t];this.$restore()}}},splitThreshold:3e3,toSave:["fillGradient","strokeGradient"],element:{reference:"element",children:[{reference:"innerElement",style:{width:"100%",height:"100%",position:"relative"}}]},createCanvas:function(){var t=Ext.Element.create({tag:"canvas",cls:Ext.baseCSSPrefix+"surface-canvas"});window.G_vmlCanvasManager&&(G_vmlCanvasManager.initElement(t.dom),this.isVML=!0);var e,r=Ext.draw.engine.Canvas.contextOverrides,i=t.dom.getContext("2d");i.ellipse&&delete r.ellipse,i.state=[],i.toSave=this.toSave;for(e in r)i["$"+e]=i[e];Ext.apply(i,r),this.getHighPrecision()?this.enablePrecisionCompensation(i):this.disablePrecisionCompensation(i),this.innerElement.appendChild(t),this.canvases.push(t),this.contexts.push(i)},updateHighPrecision:function(t){var e,r,i=this.contexts,n=i.length;for(e=0;n>e;e++)r=i[e],t?this.enablePrecisionCompensation(r):this.disablePrecisionCompensation(r)},precisionNames:["rect","fillRect","strokeRect","clearRect","moveTo","lineTo","arc","arcTo","save","restore","updatePrecisionCompensate","setTransform","transform","scale","translate","rotate","quadraticCurveTo","bezierCurveTo","createLinearGradient","createRadialGradient","fillText","strokeText","drawImage"],disablePrecisionCompensation:function(t){var e,r,i=Ext.draw.engine.Canvas.contextOverrides,n=this.precisionNames,a=n.length;for(e=0;a>e;e++)r=n[e],r in i||delete t[r];this.setDirty(!0)},enablePrecisionCompensation:function(t){var e=this,r=1,i=1,n=0,a=0,s=new Ext.draw.Matrix,o=[],l={},h=Ext.draw.engine.Canvas.contextOverrides,c=t.constructor.prototype,u={toSave:e.toSave,rect:function(t,e,s,o){return c.rect.call(this,t*r+n,e*i+a,s*r,o*i)},fillRect:function(t,e,s,o){this.updatePrecisionCompensateRect(),c.fillRect.call(this,t*r+n,e*i+a,s*r,o*i),this.updatePrecisionCompensate()},strokeRect:function(t,e,s,o){this.updatePrecisionCompensateRect(),c.strokeRect.call(this,t*r+n,e*i+a,s*r,o*i),this.updatePrecisionCompensate()},clearRect:function(t,e,s,o){return c.clearRect.call(this,t*r+n,e*i+a,s*r,o*i)},moveTo:function(t,e){return c.moveTo.call(this,t*r+n,e*i+a)},lineTo:function(t,e){return c.lineTo.call(this,t*r+n,e*i+a)},arc:function(t,e,i,s,o,l){this.updatePrecisionCompensateRect(),c.arc.call(this,t*r+n,e*r+a,i*r,s,o,l),this.updatePrecisionCompensate()},arcTo:function(t,e,s,o,l){this.updatePrecisionCompensateRect(),c.arcTo.call(this,t*r+n,e*i+a,s*r+n,o*i+a,l*r),this.updatePrecisionCompensate()},save:function(){o.push(s),s=s.clone(),h.save.call(this),c.save.call(this)},restore:function(){s=o.pop(),h.restore.call(this),c.restore.call(this),this.updatePrecisionCompensate()},updatePrecisionCompensate:function(){s.precisionCompensate(e.devicePixelRatio,l),r=l.xx,i=l.yy,n=l.dx,a=l.dy,c.setTransform.call(this,e.devicePixelRatio,l.b,l.c,l.d,0,0)},updatePrecisionCompensateRect:function(){s.precisionCompensateRect(e.devicePixelRatio,l),r=l.xx,i=l.yy,n=l.dx,a=l.dy,c.setTransform.call(this,e.devicePixelRatio,l.b,l.c,l.d,0,0)},setTransform:function(t,e,r,i,n,a){s.set(t,e,r,i,n,a),this.updatePrecisionCompensate()},transform:function(t,e,r,i,n,a){s.append(t,e,r,i,n,a),this.updatePrecisionCompensate()},scale:function(t,e){this.transform(t,0,0,e,0,0)},translate:function(t,e){this.transform(1,0,0,1,t,e)},rotate:function(t){var e=Math.cos(t),r=Math.sin(t);this.transform(e,r,-r,e,0,0)},quadraticCurveTo:function(t,e,s,o){c.quadraticCurveTo.call(this,t*r+n,e*i+a,s*r+n,o*i+a)},bezierCurveTo:function(t,e,s,o,l,h){c.bezierCurveTo.call(this,t*r+n,e*i+a,s*r+n,o*i+a,l*r+n,h*i+a)},createLinearGradient:function(t,e,s,o){this.updatePrecisionCompensateRect();var l=c.createLinearGradient.call(this,t*r+n,e*i+a,s*r+n,o*i+a);return this.updatePrecisionCompensate(),l},createRadialGradient:function(t,e,i,s,o,l){this.updatePrecisionCompensateRect();var h=c.createLinearGradient.call(this,t*r+n,e*r+a,i*r,s*r+n,o*r+a,l*r);return this.updatePrecisionCompensate(),h},fillText:function(t,e,r,i){c.setTransform.apply(this,s.elements),"undefined"==typeof i?c.fillText.call(this,t,e,r):c.fillText.call(this,t,e,r,i),this.updatePrecisionCompensate()},strokeText:function(t,e,r,i){c.setTransform.apply(this,s.elements),"undefined"==typeof i?c.strokeText.call(this,t,e,r):c.strokeText.call(this,t,e,r,i),this.updatePrecisionCompensate()},fill:function(){var t=this.fillGradient,e=this.bbox;this.updatePrecisionCompensateRect(),t&&e&&(this.fillStyle=t.generateGradient(this,e)),c.fill.call(this),this.updatePrecisionCompensate()},stroke:function(){var t=this.strokeGradient,e=this.bbox;this.updatePrecisionCompensateRect(),t&&e&&(this.strokeStyle=t.generateGradient(this,e)),c.stroke.call(this),this.updatePrecisionCompensate()},drawImage:function(t,e,s,o,l,h,u,d,g){switch(arguments.length){case 3:return c.drawImage.call(this,t,e*r+n,s*i+a);case 5:return c.drawImage.call(this,t,e*r+n,s*i+a,o*r,l*i);case 9:return c.drawImage.call(this,t,e,s,o,l,h*r+n,u*i*a,d*r,g*i)}}};Ext.apply(t,u),this.setDirty(!0)},updateRect:function(t){this.callParent([t]);var e,r,i,n,a,s,o,l,h=this,c=Math.floor(t[0]),u=Math.floor(t[1]),d=Math.ceil(t[0]+t[2]),g=Math.ceil(t[1]+t[3]),f=h.devicePixelRatio,p=h.canvases,m=d-c,x=g-u,y=Math.round(h.splitThreshold/f),b=h.xSplits=Math.ceil(m/y),v=h.ySplits=Math.ceil(x/y);for(r=0,a=0;v>r;r++,a+=y)for(e=0,n=0;b>e;e++,n+=y)i=r*b+e,i>=p.length&&h.createCanvas(),s=p[i].dom,s.style.left=n+"px",s.style.top=a+"px",l=Math.min(y,x-a),l*f!==s.height&&(s.height=l*f,s.style.height=l+"px"),o=Math.min(y,m-n),o*f!==s.width&&(s.width=o*f,s.style.width=o+"px"),h.applyDefaults(h.contexts[i]);for(h.activeCanvases=i=b*v;p.length>i;)p.pop().destroy();h.clear()},clearTransform:function(){var t,e,r,i,n=this,a=n.xSplits,s=n.ySplits,o=n.contexts,l=n.splitThreshold,h=n.devicePixelRatio;for(t=0;a>t;t++)for(e=0;s>e;e++)r=e*a+t,i=o[r],i.translate(-l*t,-l*e),i.scale(h,h),n.matrix.toContext(i)},renderSprite:function(t){for(var e,r,i,n,a,s,o,l,h,c,u,d=this,g=d.getRect(),f=d.matrix,p=t.getParent(),m=Ext.draw.Matrix.fly([1,0,0,1,0,0]),x=d.splitThreshold/d.devicePixelRatio,y=d.xSplits,b=d.ySplits,v=0,E=0,S=g[2],M=g[3];p&&p.isSprite;)m.prependMatrix(p.matrix||p.attr&&p.attr.matrix),p=p.getParent();if(m.prependMatrix(f),n=t.getBBox(),n&&(n=m.transformBBox(n)),t.preRender(d),t.attr.hidden||0===t.attr.globalAlpha)return void t.setDirty(!1);for(c=0,r=0;b>c;c++,r+=x)for(h=0,e=0;y>h;h++,e+=x)if(u=c*y+h,i=d.contexts[u],a=Math.min(x,S-e),s=Math.min(x,M-r),v=e,o=v+a,E=r,l=E+s,!n||!(n.x>o||n.x+n.width<v||n.y>l||n.y+n.height<E)){if(i.save(),t.useAttributes(i,g),!1===t.render(d,i,[v,E,a,s]))return!1;i.restore()}t.setDirty(!1)},flatten:function(t,e){var r,i,n,a,s,o,l=document.createElement("canvas"),h=Ext.getClassName(this),c=this.devicePixelRatio,u=l.getContext("2d");for(l.width=Math.ceil(t.width*c),l.height=Math.ceil(t.height*c),a=0;a<e.length;a++)if(r=e[a],Ext.getClassName(r)===h)for(n=r.getRect(),s=0;s<r.canvases.length;s++)i=r.canvases[s],o=i.getOffsetsTo(i.getParent()),u.drawImage(i.dom,(n[0]+o[0])*c,(n[1]+o[1])*c);return{data:l.toDataURL(),type:"png"}},applyDefaults:function(t){var e=Ext.util.Color.RGBA_NONE;t.strokeStyle=e,t.fillStyle=e,t.textAlign="start",t.textBaseline="alphabetic",t.miterLimit=1},clear:function(){var t,e,r,i=this,n=i.activeCanvases;for(t=0;n>t;t++)e=i.canvases[t].dom,r=i.contexts[t],r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,e.width,e.height);i.setDirty(!0)},destroy:function(){var t,e=this,r=e.canvases,i=r.length;for(t=0;i>t;t++)e.contexts[t]=null,r[t].destroy(),r[t]=null;e.contexts=e.canvases=null,e.callParent()},privates:{initElement:function(){var t=this;t.callParent(),t.canvases=[],t.contexts=[],t.activeCanvases=t.xSplits=t.ySplits=0}}},function(){var t=this,e=t.prototype,r=1e10;Ext.os.is.Android4&&Ext.browser.is.Chrome?r=3e3:Ext.is.iOS&&(r=2200),e.splitThreshold=r}),Ext.define("Ext.draw.Container",{extend:"Ext.draw.ContainerBase",alternateClassName:"Ext.draw.Component",xtype:"draw",defaultType:"surface",isDrawContainer:!0,requires:["Ext.draw.Surface","Ext.draw.engine.Svg","Ext.draw.engine.Canvas","Ext.draw.gradient.GradientDefinition"],engine:"Ext.draw.engine.Canvas",config:{cls:[Ext.baseCSSPrefix+"draw-container",Ext.baseCSSPrefix+"unselectable"],resizeHandler:null,sprites:null,gradients:[],touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1}},defaultDownloadServerUrl:"http://svg.sencha.io",supportedFormats:["png","pdf","jpeg","gif"],supportedOptions:{version:Ext.isNumber,data:Ext.isString,format:function(t){return Ext.Array.indexOf(this.supportedFormats,t)>=0},filename:Ext.isString,width:Ext.isNumber,height:Ext.isNumber,scale:Ext.isNumber,pdf:Ext.isObject,jpeg:Ext.isObject},initAnimator:function(){this.frameCallbackId=Ext.draw.Animator.addFrameCallback("renderFrame",this)},applyGradients:function(t){var e,r,i,n,a=[];if(!Ext.isArray(t))return a;for(e=0,r=t.length;r>e;e++)i=t[e],Ext.isObject(i)&&("string"!=typeof i.type&&(i.type="linear"),i.angle&&(i.degrees=i.angle,delete i.angle),Ext.isObject(i.stops)&&(i.stops=function(t){var e,r=[];for(n in t)e=t[n],e.offset=n/100,r.push(e);return r}(i.stops)),a.push(i));return Ext.draw.gradient.GradientDefinition.add(a),a},applySprites:function(t){if(t){t=Ext.Array.from(t);var e,r,i,n=t.length,a=[];for(e=0;n>e;e++)i=t[e],r=i.surface,r&&r.isSurface||(Ext.isString(r)?(r=this.getSurface(r),delete i.surface):r=this.getSurface("main")),i=r.add(i),a.push(i);return a}},resizeDelay:500,resizeTimerId:0,handleResize:function(t,e){var r,i=this,n=i.element,a=i.getResizeHandler()||i.defaultResizeHandler;if(n&&(t=t||n.getSize(),t.width&&t.height)){if(clearTimeout(i.resizeTimerId),!e)return void(i.resizeTimerId=Ext.defer(i.handleResize,i.resizeDelay,i,[t,!0]));i.resizeTimerId=0,i.fireEvent("bodyresize",i,t),r=a.call(i,t),r!==!1&&i.renderFrame()}},defaultResizeHandler:function(t){this.getItems().each(function(e){e.setRect([0,0,t.width,t.height])})},getSurface:function(t){var e,r=this,i=r.getItems(),n=i.getCount();return e=r.createSurface(t),i.getCount()>n&&r.handleResize(null,!0),e},createSurface:function(t){t=this.getId()+"-"+(t||"main");var e=this,r=e.getItems(),i=r.get(t);return i||(i=e.add({xclass:e.engine,id:t})),i},renderFrame:function(){var t,e,r,i=this,n=i.getItems();for(t=0,e=n.length;e>t;t++)r=n.items[t],r.isSurface&&r.renderFrame()},getImage:function(t){var e,r,i,n,a,s,o=this.innerElement.getSize(),l=Array.prototype.slice.call(this.items.items),h=this.surfaceZIndexes;for(n=1;n<l.length;n++){for(a=l[n],s=h[a.type],i=n-1;i>=0&&h[l[i].type]>s;)l[i+1]=l[i],i--;l[i+1]=a}if(a=l[0],(Ext.isIE||Ext.isEdge)&&a.isSVG)e={data:a.toSVG(o,l),type:"svg-markup"};else{if(e=a.flatten(o,l),"image"===t)return r=new Image,r.src=e.data,e.data=r,e;if("stream"===t)return e.data=e.data.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),e}return e},download:function(t){var e,r,i,n=this,a=[];if(Ext.isIE8)return!1;t=Ext.apply({version:2,data:n.getImage().data},t);for(r in t)t.hasOwnProperty(r)&&(i=t[r],r in n.supportedOptions?n.supportedOptions[r].call(n,i)?a.push({tag:"input",type:"hidden",name:r,value:Ext.String.htmlEncode(Ext.isObject(i)?Ext.JSON.encode(i):i)}):Ext.log.error('Invalid value for image download option "'+r+'": '+i):Ext.log.error('Invalid image download option: "'+r+'"'));e=Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"form",method:"POST",action:t.url||n.defaultDownloadServerUrl,children:a},{tag:"script",type:"text/javascript",children:'document.getElementsByTagName("form")[0].submit();'}]}]}),window.open("","ImageDownload_"+Date.now()).document.write(e)},destroy:function(){var t=this,e=t.frameCallbackId;e&&Ext.draw.Animator.removeFrameCallback(e),clearTimeout(t.resizeTimerId),t.resizeTimerId=0,t.callParent()}},function(){location.search.match("svg")?Ext.draw.Container.prototype.engine="Ext.draw.engine.Svg":(Ext.os.is.BlackBerry&&10===Ext.os.version.getMajor()||Ext.browser.is.AndroidStock4&&(1===Ext.os.version.getMinor()||2===Ext.os.version.getMinor()||3===Ext.os.version.getMinor()))&&(Ext.draw.Container.prototype.engine="Ext.draw.engine.Svg")}),Ext.define("Ext.chart.theme.Base",{mixins:{factoryable:"Ext.mixin.Factoryable"},requires:["Ext.draw.Color"],factoryConfig:{type:"chart.theme"},isTheme:!0,config:{baseColor:null,colors:void 0,gradients:null,chart:{defaults:{background:"white"}},axis:{defaults:{label:{x:0,y:0,
textBaseline:"middle",textAlign:"center",fontSize:"default",fontFamily:"default",fontWeight:"default",fillStyle:"black"},title:{fillStyle:"black",fontSize:"default*1.23",fontFamily:"default",fontWeight:"default"},style:{strokeStyle:"black"},grid:{strokeStyle:"rgb(221, 221, 221)"}},top:{style:{textPadding:5}},bottom:{style:{textPadding:5}}},series:{defaults:{label:{fillStyle:"black",strokeStyle:"none",fontFamily:"default",fontWeight:"default",fontSize:"default*1.077",textBaseline:"middle",textAlign:"center"},labelOverflowPadding:5}},sprites:{text:{fontSize:"default",fontWeight:"default",fontFamily:"default",fillStyle:"black"}},legend:{label:{fontSize:14,fontWeight:"default",fontFamily:"default",fillStyle:"black"},border:{lineWidth:1,radius:4,fillStyle:"none",strokeStyle:"gray"},background:"white"},seriesThemes:void 0,markerThemes:{type:["circle","cross","plus","square","triangle","diamond"]},useGradients:!1,background:null},colorDefaults:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],constructor:function(t){this.initConfig(t),this.resolveDefaults()},defaultRegEx:/^default([+\-/\*]\d+(?:\.\d+)?)?$/,defaultOperators:{"*":function(t,e){return t*e},"+":function(t,e){return t+e},"-":function(t,e){return t-e}},resolveDefaults:function(){var t=this;Ext.onReady(function(){var e,r,i,n=Ext.clone(t.getSprites()),a=Ext.clone(t.getLegend()),s=Ext.clone(t.getAxis()),o=Ext.clone(t.getSeries());t.superclass.defaults||(e=Ext.getBody().createChild({tag:"div",cls:"x-component"}),t.superclass.defaults={fontFamily:e.getStyle("fontFamily"),fontWeight:e.getStyle("fontWeight"),fontSize:parseFloat(e.getStyle("fontSize")),fontVariant:e.getStyle("fontVariant"),fontStyle:e.getStyle("fontStyle")},e.destroy()),t.replaceDefaults(n.text),t.setSprites(n),t.replaceDefaults(a.label),t.setLegend(a);for(r in s)i=s[r],t.replaceDefaults(i.label),t.replaceDefaults(i.title);t.setAxis(s);for(r in o)i=o[r],t.replaceDefaults(i.label);t.setSeries(o)})},replaceDefaults:function(t){var e,r,i,n,a=this,s=a.superclass.defaults,o=a.defaultRegEx;if(Ext.isObject(t))for(e in s)i=o.exec(t[e]),i&&(r=s[e],i=i[1],i&&(n=a.defaultOperators[i.charAt(0)],r=Math.round(n(r,parseFloat(i.substr(1))))),t[e]=r)},applyBaseColor:function(t){var e,r;return t&&(e=t.isColor?t:Ext.util.Color.fromString(t),r=e.getHSL()[2],.15>r?e=e.createLighter(.3):.3>r?e=e.createLighter(.15):r>.85?e=e.createDarker(.3):r>.7&&(e=e.createDarker(.15)),this.setColors([e.createDarker(.3).toString(),e.createDarker(.15).toString(),e.toString(),e.createLighter(.12).toString(),e.createLighter(.24).toString(),e.createLighter(.31).toString()])),t},applyColors:function(t){return t||this.colorDefaults},updateUseGradients:function(t){t&&this.updateGradients({type:"linear",degrees:90})},updateBackground:function(t){if(t){var e=this.getChart();e.defaults.background=t,this.setChart(e)}},updateGradients:function(t){var e,r,i,n,a,s=this.getColors(),o=[];if(Ext.isObject(t)){for(n=0,a=s&&s.length||0;a>n;n++)r=Ext.util.Color.fromString(s[n]),r&&(i=r.createLighter(.15).toString(),e=Ext.apply(Ext.Object.chain(t),{stops:[{offset:1,color:r.toString()},{offset:0,color:i.toString()}]}),o.push(e));this.setColors(o)}},applySeriesThemes:function(t){this.getBaseColor(),this.getUseGradients(),this.getGradients();var e=this.getColors();return t||(t={fillStyle:Ext.Array.clone(e),strokeStyle:Ext.Array.map(e,function(t){var e=Ext.util.Color.fromString(t.stops?t.stops[0].color:t);return e.createDarker(.15).toString()})}),t}}),Ext.define("Ext.chart.theme.Default",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.default","chart.theme.Base"]}),Ext.define("Ext.chart.Markers",{extend:"Ext.draw.sprite.Instancing",isMarkers:!0,defaultCategory:"default",constructor:function(){this.callParent(arguments),this.categories={},this.revisions={}},destroy:function(){this.categories=null,this.revisions=null,this.callParent()},getMarkerFor:function(t,e){if(t in this.categories){var r=this.categories[t];if(e in r)return this.get(r[e])}},clear:function(t){t=t||this.defaultCategory,t in this.revisions?this.revisions[t]++:this.revisions[t]=1},putMarkerFor:function(t,e,r,i,n){t=t||this.defaultCategory;var a,s=this,o=s.categories[t]||(s.categories[t]={});r in o?s.setAttributesFor(o[r],e,i):(o[r]=s.getCount(),s.add(e,i)),a=s.get(o[r]),a&&(a.category=t,n||(a.revision=s.revisions[t]||(s.revisions[t]=1)))},getMarkerBBoxFor:function(t,e,r){if(t in this.categories){var i=this.categories[t];if(e in i)return this.getBBoxFor(i[e],r)}},getBBox:function(){return null},render:function(t,e,r){var i,n,a=this,s=t.getRect(),o=a.revisions,l=a.attr.matrix,h=a.getTemplate(),c=h.attr,u=a.instances.length;for(l.toContext(e),h.preRender(t,e,r),h.useAttributes(e,s),n=0;u>n;n++)i=a.get(n),i.hidden||i.revision!==o[i.category]||(e.save(),h.attr=i,h.useAttributes(e,s),h.render(t,e,r),e.restore());h.attr=c}}),Ext.define("Ext.chart.modifier.Callout",{extend:"Ext.draw.modifier.Modifier",alternateClassName:"Ext.chart.label.Callout",prepareAttributes:function(t){t.hasOwnProperty("calloutOriginal")||(t.calloutOriginal=Ext.Object.chain(t),t.calloutOriginal.prototype=t),this._lower&&this._lower.prepareAttributes(t.calloutOriginal)},setAttrs:function(t,e){var r,i,n=t.callout,a=t.calloutOriginal,s=t.bbox.plain,o=(s.width||0)+t.labelOverflowPadding,l=(s.height||0)+t.labelOverflowPadding;if("callout"in e&&(n=e.callout),"callout"in e||"calloutPlaceX"in e||"calloutPlaceY"in e||"x"in e||"y"in e){var h,c="rotationRads"in e?a.rotationRads=e.rotationRads:a.rotationRads,u="x"in e?a.x=e.x:a.x,d="y"in e?a.y=e.y:a.y,g="calloutPlaceX"in e?e.calloutPlaceX:t.calloutPlaceX,f="calloutPlaceY"in e?e.calloutPlaceY:t.calloutPlaceY,p="calloutVertical"in e?e.calloutVertical:t.calloutVertical;c%=2*Math.PI,Math.cos(c)<0&&(c=(c+Math.PI)%(2*Math.PI)),c>Math.PI&&(c-=2*Math.PI),p?(c=c*(1-n)-Math.PI/2*n,h=o,o=l,l=h):c*=1-n,e.rotationRads=c,e.x=u*(1-n)+g*n,e.y=d*(1-n)+f*n,r=g-u,i=f-d,Math.abs(i*o)>Math.abs(r*l)?i>0?(e.calloutEndX=e.x-l/2*(r/i)*n,e.calloutEndY=e.y-l/2*n):(e.calloutEndX=e.x+l/2*(r/i)*n,e.calloutEndY=e.y+l/2*n):r>0?(e.calloutEndX=e.x-o/2,e.calloutEndY=e.y-o/2*(i/r)*n):(e.calloutEndX=e.x+o/2,e.calloutEndY=e.y+o/2*(i/r)*n),e.calloutHasLine=e.calloutStartX&&e.calloutStartY?r>0&&e.calloutStartX<e.calloutEndX||0>=r&&e.calloutStartX>e.calloutEndX||i>0&&e.calloutStartY<e.calloutEndY||0>=i&&e.calloutStartY>e.calloutEndY:!0}return e},pushDown:function(t,e){return e=this.callParent([t.calloutOriginal,e]),this.setAttrs(t,e)},popUp:function(t,e){return t=t.prototype,e=this.setAttrs(t,e),this._upper?this._upper.popUp(t,e):Ext.apply(t,e)}}),Ext.define("Ext.chart.sprite.Label",{extend:"Ext.draw.sprite.Text",alternateClassName:"Ext.chart.label.Label",requires:["Ext.chart.modifier.Callout"],inheritableStatics:{def:{processors:{callout:"limited01",calloutHasLine:"bool",calloutPlaceX:"number",calloutPlaceY:"number",calloutStartX:"number",calloutStartY:"number",calloutEndX:"number",calloutEndY:"number",calloutColor:"color",calloutWidth:"number",calloutVertical:"bool",labelOverflowPadding:"number",display:"enums(none,under,over,rotate,insideStart,insideEnd,inside,outside)",orientation:"enums(horizontal,vertical)",renderer:"default"},defaults:{callout:0,calloutHasLine:!0,calloutPlaceX:0,calloutPlaceY:0,calloutStartX:0,calloutStartY:0,calloutEndX:0,calloutEndY:0,calloutWidth:1,calloutVertical:!1,calloutColor:"black",labelOverflowPadding:5,display:"none",orientation:"",renderer:null},triggers:{callout:"transform",calloutPlaceX:"transform",calloutPlaceY:"transform",labelOverflowPadding:"transform",calloutRotation:"transform",display:"hidden"},updaters:{hidden:function(t){t.hidden="none"===t.display}}}},config:{fx:{customDurations:{callout:200}},field:null,calloutLine:!0},applyCalloutLine:function(t){return t?Ext.apply({},t):void 0},prepareModifiers:function(){this.callParent(arguments),this.calloutModifier=new Ext.chart.modifier.Callout({sprite:this}),this.fx.setUpper(this.calloutModifier),this.calloutModifier.setUpper(this.topModifier)},render:function(t,e){var r=this,i=r.attr,n=i.calloutColor;e.save(),e.globalAlpha*=i.callout,e.globalAlpha>0&&i.calloutHasLine&&(n&&n.isGradient&&(n=n.getStops()[0].color),e.strokeStyle=n,e.fillStyle=n,e.lineWidth=i.calloutWidth,e.beginPath(),e.moveTo(r.attr.calloutStartX,r.attr.calloutStartY),e.lineTo(r.attr.calloutEndX,r.attr.calloutEndY),e.stroke(),e.beginPath(),e.arc(r.attr.calloutStartX,r.attr.calloutStartY,1*i.calloutWidth,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.arc(r.attr.calloutEndX,r.attr.calloutEndY,1*i.calloutWidth,0,2*Math.PI,!0),e.fill()),e.restore(),Ext.draw.sprite.Text.prototype.render.apply(r,arguments)}}),Ext.define("Ext.chart.series.Series",{requires:["Ext.chart.Markers","Ext.chart.sprite.Label","Ext.tip.ToolTip"],mixins:["Ext.mixin.Observable","Ext.mixin.Bindable"],isSeries:!0,defaultBindProperty:"store",type:null,seriesType:"sprite",identifiablePrefix:"ext-line-",observableType:"series",darkerStrokeRatio:.15,config:{chart:null,title:null,renderer:null,showInLegend:!0,triggerAfterDraw:!1,style:{},subStyle:{},themeStyle:{},colors:null,useDarkerStrokeColor:!0,store:null,label:{},labelOverflowPadding:null,showMarkers:!0,marker:null,markerSubStyle:null,itemInstancing:null,background:null,highlightItem:null,surface:null,overlaySurface:null,hidden:!1,highlight:!1,highlightCfg:{merge:function(t){return t},$value:{fillStyle:"yellow",strokeStyle:"red"}},animation:null,tooltip:null},directions:[],sprites:null,themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 0},getFields:function(t){var e,r,i,n=this,a=[];for(r=0,i=t.length;i>r;r++)e=n["get"+t[r]+"Field"](),Ext.isArray(e)?a.push.apply(a,e):a.push(e);return a},applyAnimation:function(t,e){return t?t===!0&&(t={easing:"easeInOut",duration:500}):t={duration:0},e?Ext.apply({},t,e):t},getAnimation:function(){var t=this.getChart();return t&&t.animationSuspendCount?{duration:0}:this.callParent()},updateTitle:function(){var t=this,e=t.getChart();e&&!e.isInitializing&&e.refreshLegendStore()},applyHighlight:function(t,e){return Ext.isObject(t)?t=Ext.merge({},this.config.highlightCfg,t):t===!0&&(t=this.config.highlightCfg),Ext.apply(e||{},t)},updateHighlight:function(t){this.getStyle(),Ext.Object.isEmpty(t)||this.addItemHighlight()},updateHighlightCfg:function(t){Ext.Object.equals(t,this.defaultConfig.highlightCfg)||this.addItemHighlight()},applyItemInstancing:function(t,e){return Ext.merge(e||{},t)},setAttributesForItem:function(t,e){var r,i=t&&t.sprite;if(i)if(i.itemsMarker&&"items"===t.category&&i.putMarker(t.category,e,t.index,!1,!0),i.isMarkerHolder&&"markers"===t.category)i.putMarker(t.category,e,t.index,!1,!0);else if(i.isInstancing)i.setAttributesFor(t.index,e);else if(Ext.isArray(i))for(r=0;r<i.length;r++)i[r].setAttributes(e);else i.setAttributes(e)},getBBoxForItem:function(t){return t&&t.sprite?t.sprite.itemsMarker&&"items"===t.category?t.sprite.getMarkerBBox(t.category,t.index):t.sprite instanceof Ext.draw.sprite.Instancing?t.sprite.getBBoxFor(t.index):t.sprite.getBBox():null},applyHighlightItem:function(t,e){if(t!==e){if(Ext.isObject(t)&&Ext.isObject(e)){var r=t.sprite===e.sprite,i=t.index===e.index;if(r&&i)return}return t}},updateHighlightItem:function(t,e){this.setAttributesForItem(e,{highlighted:!1}),this.setAttributesForItem(t,{highlighted:!0})},constructor:function(t){var e,r=this;t=t||{},t.tips&&(t=Ext.apply({tooltip:t.tips},t)),t.highlightCfg&&(t=Ext.apply({highlight:t.highlightCfg},t)),e="id"in t?t.id:"id"in r.config?r.config.id:r.getId(),r.setId(e),r.sprites=[],r.dataRange=[],r.mixins.observable.constructor.call(r,t),r.initBindable()},lookupViewModel:function(t){var e=this.getChart();return e?e.lookupViewModel(t):null},applyTooltip:function(t,e){var r=Ext.apply({xtype:"tooltip",renderer:Ext.emptyFn,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,hideDelay:200,mouseOffset:[20,20],trackmouse:!0},t);return Ext.create(r)},updateTooltip:function(){this.addItemHighlight()},addItemHighlight:function(){var t=this.getChart();if(t){var e,r,i,n=t.getInteractions();for(e=0;e<n.length;e++)if(r=n[e],r.isItemHighlight||r.isItemEdit){i=!0;break}i||(n.push("itemhighlight"),t.setInteractions(n))}},showTooltip:function(t,e){var r=this,i=r.getTooltip();i&&(Ext.callback(i.renderer,i.scope,[i,t.record,t],0,r),i.showBy(e))},hideTooltip:function(t){var e=this,r=e.getTooltip();r&&r.delayHide()},applyStore:function(t){return t&&Ext.StoreManager.lookup(t)},getStore:function(){return this._store||this.getChart()&&this.getChart().getStore()},updateStore:function(t,e){var r,i,n,a,s=this,o=s.getChart(),l=o&&o.getStore();if(e=e||l,e&&e!==t&&e.un({datachanged:"onDataChanged",update:"onDataChanged",scope:s}),t){for(t.on({datachanged:"onDataChanged",update:"onDataChanged",scope:s}),r=s.getSprites(),a=0,n=r.length;n>a;a++)i=r[a],i.setStore&&i.setStore(t);s.onDataChanged()}s.fireEvent("storechange",s,t,e)},onStoreChange:function(t,e,r){this._store||this.updateStore(e,r)},coordinate:function(t,e,r){var i,n,a,s=this,o=s.getStore(),l=s.getHidden(),h=o.getData().items,c=s["get"+t+"Axis"](),u={min:1/0,max:-(1/0)},d=s["fieldCategory"+t]||[t],g=s.getFields(d),f={},p=s.getSprites();if(p.length>0){if(!Ext.isBoolean(l)||!l)for(i=0;i<d.length;i++)n=g[i],a=s.coordinateData(h,n,c),s.getRangeOfData(a,u),f["data"+d[i]]=a;for(s.dataRange[e]=u.min,s.dataRange[e+r]=u.max,f["dataMin"+t]=u.min,f["dataMax"+t]=u.max,c&&(c.range=null,f["range"+t]=c.getRange()),i=0;i<p.length;i++)p[i].setAttributes(f)}},coordinateData:function(t,e,r){var i,n,a=[],s=t.length,o=r&&r.getLayout();for(i=0;s>i;i++)n=t[i].data[e],a[i]=Ext.isEmpty(n,!0)?n:o?o.getCoordFor(n,e,i,t):+n;return a},getRangeOfData:function(t,e){var r,i,n=t.length,a=e.min,s=e.max;for(r=0;n>r;r++)i=t[r],a>i&&(a=i),i>s&&(s=i);e.min=a,e.max=s},updateLabelData:function(){var t,e,r,i,n,a,s=this,o=s.getStore(),l=o.getData().items,h=s.getSprites(),c=s.getLabel().getTemplate(),u=Ext.Array.from(c.getField());if(h.length&&u.length)for(t=0;t<h.length;t++){for(i=[],n=h[t],a=n.getField(),Ext.Array.indexOf(u,a)<0&&(a=u[t]),e=0,r=l.length;r>e;e++)i.push(l[e].get(a));n.setAttributes({labels:i})}},processData:function(){var t=this;if(!t.isProcessingData&&t.getStore()){var e,r,i,n=this.directions,a=n.length;for(t.isProcessingData=!0,e=0;a>e;e++)r=n[e],i=t["get"+r+"Axis"](),i?i.processData(t):t["coordinate"+r]&&t["coordinate"+r]();t.updateLabelData(),t.isProcessingData=!1}},applyBackground:function(t){return this.getChart()?(this.getSurface().setBackground(t),this.getSurface().getBackground()):t},updateChart:function(t,e){var r=this,i=r._store;e&&(e.un("axeschange","onAxesChange",r),r.clearSprites(),r.setSurface(null),r.setOverlaySurface(null),e.unregister(r),r.onChartDetached(e),i||r.updateStore(null)),t&&(r.setSurface(t.getSurface("series")),r.setOverlaySurface(t.getSurface("overlay")),t.on("axeschange","onAxesChange",r),t.getAxes()&&r.onAxesChange(t),r.onChartAttached(t),t.register(r),i||r.updateStore(t.getStore()))},onAxesChange:function(t,e){var r,i,n,a,s=this,o=t.getAxes(),l={},h={},c=!1,u=this.directions;for(n=0,a=u.length;a>n;n++)i=u[n],h[i]=s.getFields(s["fieldCategory"+i]);for(n=0,a=o.length;a>n;n++)r=o[n],l[r.getDirection()]?l[r.getDirection()].push(r):l[r.getDirection()]=[r];for(n=0,a=u.length;a>n;n++)i=u[n],(e||!s["get"+i+"Axis"]())&&l[i]&&(r=s.findMatchingAxis(l[i],h[i]),r&&(s["set"+i+"Axis"](r),r.getNeedHighPrecision()&&(c=!0)));this.getSurface().setHighPrecision(c)},findMatchingAxis:function(t,e){var r,i,n,a;for(n=0;n<t.length;n++){if(r=t[n],i=r.getFields(),!i.length)return r;if(e)for(a=0;a<e.length;a++)if(Ext.Array.indexOf(i,e[a])>=0)return r}},onChartDetached:function(t){var e=this;e.fireEvent("chartdetached",t,e),t.un("storechange","onStoreChange",e)},onChartAttached:function(t){var e=this;e.setBackground(e.getBackground()),e.fireEvent("chartattached",t,e),t.on("storechange","onStoreChange",e),e.processData()},updateOverlaySurface:function(t){var e=this;t&&e.getLabel()&&e.getOverlaySurface().add(e.getLabel())},applyLabel:function(t,e){var r;return e?(r=e.getTemplate(),r.setAttributes(t),t&&(t.field&&(r.setField(t.field),this.updateLabelData()),t.display&&e.setAttributes({hidden:"none"===t.display})),e.setDirty(!0),this.updateLabel()):(e=new Ext.chart.Markers({zIndex:10}),e.setTemplate(new Ext.chart.sprite.Label(t))),e},updateLabel:function(){var t=this.getChart();t&&!t.isInitializing&&t.redraw()},createItemInstancingSprite:function(t,e){var r,i,n=this,a=new Ext.chart.Markers;return a.setAttributes({zIndex:Number.MAX_VALUE}),r=Ext.apply({},e),n.getHighlight()&&(r.highlight=n.getHighlight(),r.modifiers=["highlight"]),a.setTemplate(r),i=a.getTemplate(),i.setAttributes(n.getStyle()),i.fx.on("animationstart","onSpriteAnimationStart",this),i.fx.on("animationend","onSpriteAnimationEnd",this),t.bindMarker("items",a),n.getSurface().add(a),a},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer()}},updateRenderer:function(t){var e,r=this,i=r.getChart();i&&i.isInitializing||(e=r.getSprites(),e.length&&(e[0].setAttributes({renderer:t||null}),i&&!i.isInitializing&&i.redraw()))},updateShowMarkers:function(t){var e=this.getSprites(),r=e&&e[0],i=r&&r.getMarker("markers");i&&i.getTemplate().setAttributes({hidden:!t})},createSprite:function(){var t,e,r=this,i=r.getSurface(),n=r.getItemInstancing(),a=i.add(r.getDefaultSpriteConfig()),s=r.getMarker();return a.setAttributes(r.getStyle()),a.setSeries(r),n&&(a.itemsMarker=r.createItemInstancingSprite(a,n)),a.bindMarker&&(s&&(t=new Ext.chart.Markers,e=Ext.Object.merge({},s),r.getHighlight()&&(e.highlight=r.getHighlight(),e.modifiers=["highlight"]),t.setTemplate(e),t.getTemplate().fx.setCustomDurations({translationX:0,translationY:0}),a.dataMarker=t,a.bindMarker("markers",t),r.getOverlaySurface().add(t)),r.getLabel().getTemplate().getField()&&a.bindMarker("labels",r.getLabel())),a.setStore&&a.setStore(r.getStore()),a.fx.on("animationstart","onSpriteAnimationStart",r),a.fx.on("animationend","onSpriteAnimationEnd",r),r.sprites.push(a),a},getSprites:Ext.emptyFn,onDataChanged:function(){var t=this,e=t.getChart(),r=e&&e.getStore(),i=t.getStore();i!==r&&t.processData()},isXType:function(t){return"series"===t},getItemId:function(){return this.getId()},applyThemeStyle:function(t,e){var r,i,n=this;return r=t&&t.subStyle&&t.subStyle.fillStyle,i=r&&t.subStyle.strokeStyle,r&&!i&&(t.subStyle.strokeStyle=n.getStrokeColorsFromFillColors(r)),r=t&&t.markerSubStyle&&t.markerSubStyle.fillStyle,i=r&&t.markerSubStyle.strokeStyle,r&&!i&&(t.markerSubStyle.strokeStyle=n.getStrokeColorsFromFillColors(r)),Ext.apply(e||{},t)},applyStyle:function(t,e){var r=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+this.seriesType));return r&&r.def&&(t=r.def.normalize(t)),Ext.apply({},t,e)},applySubStyle:function(t,e){var r=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+this.seriesType));return r&&r.def&&(t=r.def.batchedNormalize(t,!0)),Ext.merge({},e,t)},applyMarker:function(t,e){var r=t&&t.type||e&&e.type||"circle",i=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+r));return i&&i.def&&(t=i.def.normalize(Ext.isObject(t)?t:{},!0),t.type=r),Ext.merge(e||{},t)},applyMarkerSubStyle:function(t,e){var r=t&&t.type||e&&e.type||"circle",i=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+r));return i&&i.def&&(t=i.def.batchedNormalize(t,!0)),Ext.merge(e||{},t)},updateHidden:function(t){var e=this;e.getColors(),e.getSubStyle(),e.setSubStyle({hidden:t}),e.processData(),e.doUpdateStyles(),Ext.isArray(t)||e.updateLegendStore(t)},updateLegendStore:function(t,e){var r,i=this,n=i.getChart(),a=n.getLegendStore(),s=i.getId();a&&(arguments.length>1?(r=a.findBy(function(t){return t.get("series")===s&&t.get("index")===e}),-1!==r&&(r=a.getAt(r))):r=a.findRecord("series",s),r&&r.get("disabled")!==t&&r.set("disabled",t))},setHiddenByIndex:function(t,e){var r=this;Ext.isArray(r.getHidden())?(r.getHidden()[t]=e,r.updateHidden(r.getHidden()),r.updateLegendStore(e,t)):r.setHidden(e)},getStrokeColorsFromFillColors:function(t){var e,r=this,i=r.getUseDarkerStrokeColor(),n=Ext.isNumber(i)?i:r.darkerStrokeRatio;return e=i?Ext.Array.map(t,function(t){return t=Ext.isString(t)?t:t.stops[0].color,t=Ext.util.Color.fromString(t),t.createDarker(n).toString()}):Ext.Array.clone(t)},updateThemeColors:function(t){var e=this,r=e.getThemeStyle(),i=Ext.Array.clone(t),n=e.getStrokeColorsFromFillColors(t),a={fillStyle:i,strokeStyle:n};r.subStyle=Ext.apply(r.subStyle||{},a),r.markerSubStyle=Ext.apply(r.markerSubStyle||{},a),e.doUpdateStyles()},themeOnlyIfConfigured:{},updateTheme:function(t){var e,r,i,n,a,s,o=this,l=t.getSeries(),h=o.getInitialConfig(),c=o.defaultConfig,u=o.self.getConfigurator().configs,d=l.defaults,g=l[o.type],f=o.themeOnlyIfConfigured;l=Ext.merge({},d,g);for(e in l)if(r=l[e],s=u[e],null!==r&&void 0!==r&&s){if(a=h[e],i=Ext.isObject(r),n=a===c[e],i){if(n&&f[e])continue;r=Ext.merge({},r,a)}(n||i)&&o[s.names.set](r)}},updateChartColors:function(t){var e=this;e.getColors()||e.updateThemeColors(t)},updateColors:function(t){this.updateThemeColors(t)},updateStyle:function(){this.doUpdateStyles()},updateSubStyle:function(){this.doUpdateStyles()},updateThemeStyle:function(){this.doUpdateStyles()},doUpdateStyles:function(){for(var t,e=this,r=e.sprites,i=e.getItemInstancing(),n=0,a=r&&r.length,s=(e.getConfig("showMarkers",!0),e.getMarker());a>n;n++)t=e.getStyleByIndex(n),i&&r[n].itemsMarker.getTemplate().setAttributes(t),r[n].setAttributes(t),s&&r[n].dataMarker&&r[n].dataMarker.getTemplate().setAttributes(e.getMarkerStyleByIndex(n))},getStyleWithTheme:function(){var t=this,e=t.getThemeStyle(),r=e&&e.style||{},i=Ext.applyIf(Ext.apply({},t.getStyle()),r);return i},getSubStyleWithTheme:function(){var t=this,e=t.getThemeStyle(),r=e&&e.subStyle||{},i=Ext.applyIf(Ext.apply({},t.getSubStyle()),r);return i},getStyleByIndex:function(t){var e,r,i,n,a=this,s=a.getThemeStyle(),o={};return e=a.getStyle(),r=s&&s.style||{},i=a.styleDataForIndex(a.getSubStyle(),t),n=a.styleDataForIndex(s&&s.subStyle,t),Ext.apply(o,r),Ext.apply(o,n),Ext.apply(o,e),Ext.apply(o,i),o},getMarkerStyleByIndex:function(t){var e,r,i,n,a,s,o,l,h=this,c=h.getThemeStyle(),u={};return e=h.getStyle(),r=c&&c.style||{},i=h.styleDataForIndex(h.getSubStyle(),t),i.hasOwnProperty("hidden")&&(i.hidden=i.hidden||!this.getConfig("showMarkers",!0)),n=h.styleDataForIndex(c&&c.subStyle,t),a=h.getMarker(),s=c&&c.marker||{},o=h.getMarkerSubStyle(),l=h.styleDataForIndex(c&&c.markerSubStyle,t),Ext.apply(u,r),Ext.apply(u,n),Ext.apply(u,s),Ext.apply(u,l),Ext.apply(u,e),Ext.apply(u,i),Ext.apply(u,a),Ext.apply(u,o),u},styleDataForIndex:function(t,e){var r,i,n={};if(t)for(i in t)r=t[i],n[i]=Ext.isArray(r)?r[e%r.length]:r;return n},getItemForPoint:Ext.emptyFn,getItemByIndex:function(t,e){var r,i=this,n=i.getSprites(),a=n&&n[0];if(a)return void 0===e&&a.isMarkerHolder?e=i.getItemInstancing()?"items":"markers":e&&""!==e&&"sprites"!==e||(a=n[t]),a?r={series:i,category:e,index:t,record:i.getStore().getData().items[t],field:i.getYField(),sprite:a}:void 0},onSpriteAnimationStart:function(t){this.fireEvent("animationstart",this,t)},onSpriteAnimationEnd:function(t){this.fireEvent("animationend",this,t)},resolveListenerScope:function(t){var e,r=this,i=Ext._namedScopes[t],n=r.getChart();return i?i.isThis?e=r:i.isController?e=n?n.resolveListenerScope(t,!1):r:i.isSelf&&(e=n?n.resolveListenerScope(t,!1):r,e!==n||n.getInheritedConfig("defaultListenerScope")||(e=r)):e=n?n.resolveListenerScope(t,!1):t||r,e},provideLegendInfo:function(t){t.push({name:this.getTitle()||this.getId(),mark:"black",disabled:this.getHidden(),series:this.getId(),index:0})},clearSprites:function(){var t,e,r,i=this.sprites;for(e=0,r=i.length;r>e;e++)t=i[e],t&&t.isSprite&&t.destroy();this.sprites=[]},destroy:function(){var t=this,e=t._store,r=t.getConfig("tooltip",!0);e&&e.getAutoDestroy()&&Ext.destroy(e),t.setChart(null),t.clearListeners(),r&&Ext.destroy(r),t.callParent()}}),Ext.define("Ext.chart.interactions.Abstract",{xtype:"interaction",mixins:{observable:"Ext.mixin.Observable"},config:{gestures:{tap:"onGesture"},chart:null,enabled:!0},throttleGap:0,stopAnimationBeforeSync:!1,constructor:function(t){var e,r=this;t=t||{},e="id"in t?t.id:"id"in r.config?r.config.id:r.getId(),r.setId(e),r.mixins.observable.constructor.call(r,t)},updateChart:function(t,e){var r=this;e!==t&&(e&&(e.unregister(r),r.removeChartListener(e)),t&&(t.register(r),r.addChartListener()))},updateEnabled:function(t){var e=this,r=e.getChart();r&&(t?e.addChartListener():e.removeChartListener(r))},onGesture:Ext.emptyFn,getItemForEvent:function(t){var e=this,r=e.getChart(),i=r.getEventXY(t);return r.getItemForPoint(i[0],i[1])},getItemsForEvent:function(t){var e=this,r=e.getChart(),i=r.getEventXY(t);return r.getItemsForPoint(i[0],i[1])},addChartListener:function(){function t(t,e){i.addElementListener(t,r.listeners[t]=function(i){var n,a=r.getLocks();return!r.getEnabled()||t in a&&a[t]!==r?void 0:(n=(Ext.isFunction(e)?e:r[e]).apply(this,arguments),n===!1&&i&&i.stopPropagation&&i.stopPropagation(),n)},r)}var e,r=this,i=r.getChart(),n=r.getGestures();if(r.getEnabled()){r.listeners=r.listeners||{};for(e in n)t(e,n[e])}},removeChartListener:function(t){function e(e){var r=i.listeners[e];r&&(t.removeElementListener(e,r),delete i.listeners[e])}var r,i=this,n=i.getGestures();if(i.listeners)for(r in n)e(r)},lockEvents:function(){for(var t=this,e=t.getLocks(),r=Array.prototype.slice.call(arguments),i=r.length;i--;)e[r[i]]=t},unlockEvents:function(){for(var t=this.getLocks(),e=Array.prototype.slice.call(arguments),r=e.length;r--;)delete t[e[r]]},getLocks:function(){var t=this.getChart();return t.lockedEvents||(t.lockedEvents={})},doSync:function(){var t=this,e=t.getChart();t.syncTimer&&(clearTimeout(t.syncTimer),t.syncTimer=null),t.stopAnimationBeforeSync&&e.animationSuspendCount++,e.redraw(),t.stopAnimationBeforeSync&&e.animationSuspendCount--,t.syncThrottle=Date.now()+t.throttleGap},sync:function(){var t=this;if(t.throttleGap&&Ext.frameStartTime<t.syncThrottle){if(t.syncTimer)return;t.syncTimer=Ext.defer(function(){t.doSync()},t.throttleGap)}else t.doSync()},getItemId:function(){return this.getId()},isXType:function(t){return"interaction"===t},destroy:function(){var t=this;t.setChart(null),delete t.listeners,t.callParent()}},function(){Ext.os.is.Android4&&(this.prototype.throttleGap=40)}),Ext.define("Ext.chart.MarkerHolder",{extend:"Ext.Mixin",mixinConfig:{id:"markerHolder",after:{constructor:"constructor",preRender:"preRender"},before:{destroy:"destroy"}},isMarkerHolder:!0,surfaceMatrix:null,inverseSurfaceMatrix:null,deprecated:{6:{methods:{getBoundMarker:{message:"Please use the 'getMarker' method instead.",fn:function(t){var e=this.boundMarkers[t];return e?[e]:e}}}}},constructor:function(){this.boundMarkers={},this.cleanRedraw=!1},bindMarker:function(t,e){var r=this,i=r.boundMarkers;e&&e.isMarkers&&(i[t]&&i[t]===e&&Ext.log.warn(r.getId()," (MarkerHolder): the Markers instance '",e.getId(),"' is already bound under the name '",t,"'."),r.releaseMarker(t),i[t]=e,e.on("destroy",r.onMarkerDestroy,r))},onMarkerDestroy:function(t){this.releaseMarker(t)},releaseMarker:function(t){var e,r=this.boundMarkers;if(t&&t.isMarkers){for(e in r)if(r[e]===t){delete r[e];break}}else e=t,t=r[e],delete r[e];return t||null},getMarker:function(t){return this.boundMarkers[t]||null},preRender:function(t,e,r){var i,n,a,s=this,o=s.getId(),l=s.boundMarkers,h=s.getParent();if(a=s.surfaceMatrix?s.surfaceMatrix.set(1,0,0,1,0,0):s.surfaceMatrix=new Ext.draw.Matrix,s.cleanRedraw=!s.attr.dirty,!s.cleanRedraw)for(i in l)n=l[i],n&&n.clear(o);for(;h&&h.attr&&h.attr.matrix;)a.prependMatrix(h.attr.matrix),h=h.getParent();a.prependMatrix(h.matrix),s.surfaceMatrix=a,s.inverseSurfaceMatrix=a.inverse(s.inverseSurfaceMatrix)},putMarker:function(t,e,r,i,n){var a=this.boundMarkers[t],s=this.getId();a&&a.putMarkerFor(s,e,r,i,n)},getMarkerBBox:function(t,e,r){var i=this.boundMarkers[t],n=this.getId();return i?i.getMarkerBBoxFor(n,e,r):void 0},destroy:function(){var t,e,r=this.boundMarkers;for(t in r)e=r[t],e.destroy()}}),Ext.define("Ext.chart.axis.sprite.Axis",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.axis",type:"axis",mixins:{markerHolder:"Ext.chart.MarkerHolder"},requires:["Ext.draw.sprite.Text"],inheritableStatics:{def:{processors:{grid:"bool",axisLine:"bool",minorTicks:"bool",minorTickSize:"number",majorTicks:"bool",majorTickSize:"number",length:"number",startGap:"number",endGap:"number",dataMin:"number",dataMax:"number",visibleMin:"number",visibleMax:"number",position:"enums(left,right,top,bottom,angular,radial,gauge)",minStepSize:"number",estStepSize:"number",titleOffset:"number",textPadding:"number",min:"number",max:"number",centerX:"number",centerY:"number",radius:"number",totalAngle:"number",baseRotation:"number",data:"default",enlargeEstStepSizeByText:"bool"},defaults:{grid:!1,axisLine:!0,minorTicks:!1,minorTickSize:3,majorTicks:!0,majorTickSize:5,length:0,startGap:0,endGap:0,visibleMin:0,visibleMax:1,dataMin:0,dataMax:1,position:"",minStepSize:0,estStepSize:20,min:0,max:1,centerX:0,centerY:0,radius:1,baseRotation:0,data:null,titleOffset:0,textPadding:0,scalingCenterY:0,scalingCenterX:0,strokeStyle:"black",enlargeEstStepSizeByText:!1},triggers:{minorTickSize:"bbox",majorTickSize:"bbox",position:"bbox,layout",axisLine:"bbox,layout",minorTicks:"layout",min:"layout",max:"layout",length:"layout",minStepSize:"layout",estStepSize:"layout",data:"layout",dataMin:"layout",dataMax:"layout",visibleMin:"layout",visibleMax:"layout",enlargeEstStepSizeByText:"layout"},updaters:{layout:"layoutUpdater"}}},config:{label:null,labelOffset:10,layout:null,segmenter:null,renderer:null,layoutContext:null,axis:null},thickness:0,stepSize:0,getBBox:function(){return null},defaultRenderer:function(t){return this.segmenter.renderer(t,this)},layoutUpdater:function(){var t=this,e=t.getAxis().getChart();if(!e.isInitializing){var r=t.attr,i=t.getLayout(),n=e.getInherited().rtl,a=r.dataMin+(r.dataMax-r.dataMin)*r.visibleMin,s=r.dataMin+(r.dataMax-r.dataMin)*r.visibleMax,o=r.position,l={attr:r,segmenter:t.getSegmenter(),renderer:t.defaultRenderer};"left"===o||"right"===o?(r.translationX=0,r.translationY=s*r.length/(s-a),r.scalingX=1,r.scalingY=-r.length/(s-a),r.scalingCenterY=0,r.scalingCenterX=0,t.applyTransformations(!0)):("top"===o||"bottom"===o)&&(r.translationX=n?r.length+a*r.length/(s-a)+1:-a*r.length/(s-a),r.translationY=0,r.scalingX=(n?-1:1)*r.length/(s-a),r.scalingY=1,r.scalingCenterY=0,r.scalingCenterX=0,t.applyTransformations(!0)),i&&(i.calculateLayout(l),t.setLayoutContext(l))}},iterate:function(t,e){function r(t){return!l.length||c(l,function(e){return u(e-t)>h})}var i,n,a,s,o,l,h,c=Ext.Array.some,u=Math.abs;if(t.getLabel){for(t.min<t.from&&e.call(this,t.min,t.getLabel(t.min),-1,t),i=0;i<=t.steps;i++)e.call(this,t.get(i),t.getLabel(i),i,t);t.max>t.to&&e.call(this,t.max,t.getLabel(t.max),t.steps+1,t)}else{if(s=this.getAxis(),o=s.floatingAxes,l=[],h=(t.to-t.from)/(t.steps+1),s.getFloating())for(a in o)l.push(o[a]);for(t.min<t.from&&r(t.min)&&e.call(this,t.min,t.min,-1,t),i=0;i<=t.steps;i++)n=t.get(i),r(n)&&e.call(this,n,n,i,t);t.max>t.to&&r(t.max)&&e.call(this,t.max,t.max,t.steps+1,t)}},renderTicks:function(t,e,r,i){function n(r){return function(i,n,a){i=t.roundPixel(i*p+m)+d,e.moveTo(0,i),e.lineTo(r,i)}}function a(r){return function(n,a,s){n=t.roundPixel(n*p+m)+d,e.moveTo(i[2]-r,n),e.lineTo(i[2],n)}}function s(r){return function(i,n,a){i=t.roundPixel(i*g+f)-d,e.moveTo(i,0),e.lineTo(i,r)}}function o(r){return function(n,a,s){n=t.roundPixel(n*g+f)-d,e.moveTo(n,i[3]),e.lineTo(n,i[3]-r)}}var l=this,h=l.attr,c=h.position,u=h.matrix,d=.5*h.lineWidth,g=u.getXX(),f=u.getDX(),p=u.getYY(),m=u.getDY(),x=r.majorTicks,y=h.majorTickSize,b=r.minorTicks,v=h.minorTickSize;if(x)switch(c){case"right":l.iterate(x,n(y)),b&&l.iterate(b,n(v));break;case"left":l.iterate(x,a(y)),b&&l.iterate(b,a(v));break;case"bottom":l.iterate(x,s(y)),b&&l.iterate(b,s(v));break;case"top":l.iterate(x,o(y)),b&&l.iterate(b,o(v));

break;case"angular":l.iterate(x,function(t,r,i){t=t/(h.max+1)*Math.PI*2+h.baseRotation,e.moveTo(h.centerX+h.length*Math.cos(t),h.centerY+h.length*Math.sin(t)),e.lineTo(h.centerX+(h.length+y)*Math.cos(t),h.centerY+(h.length+y)*Math.sin(t))});break;case"gauge":var E=l.getGaugeAngles();l.iterate(x,function(t,r,i){t=(t-h.min)/(h.max-h.min)*h.totalAngle-h.totalAngle+E.start,e.moveTo(h.centerX+h.length*Math.cos(t),h.centerY+h.length*Math.sin(t)),e.lineTo(h.centerX+(h.length+y)*Math.cos(t),h.centerY+(h.length+y)*Math.sin(t))})}},renderLabels:function(t,e,r,i){var n,a,s,o,l,h,c,u,d=this,g=d.attr,f=.5*g.lineWidth,p=g.position,m=g.matrix,x=g.textPadding,y=m.getXX(),b=m.getDX(),v=m.getYY(),E=m.getDY(),S=0,M=r.majorTicks,C=Math.max(g.majorTickSize,g.minorTickSize)+g.lineWidth,w=Ext.draw.Draw.isBBoxIntersect,A=d.getLabel(),k=d.getLabelOffset(),P=null,T=0,I=0,R=r.segmenter,D=d.getRenderer(),F=d.getAxis(),Y=F.getTitle(),X=Y&&""!==Y.attr.text&&Y.getBBox(),B=null;if(M&&A&&!A.attr.hidden){switch(n=A.attr.font,e.font!==n&&(e.font=n),A.setAttributes({translationX:0,translationY:0},!0),A.applyTransformations(),a=A.attr.inverseMatrix.elements.slice(0),p){case"left":switch(h=X?X.x+X.width:0,A.attr.textAlign){case"start":c=t.roundPixel(h+b)-f;break;case"end":c=t.roundPixel(i[2]-C+b)-f;break;default:c=t.roundPixel(h+(i[2]-h-C)/2+b)-f}A.setAttributes({translationX:c},!0);break;case"right":switch(h=X?i[2]-X.x:0,A.attr.textAlign){case"start":c=t.roundPixel(C+b)+f;break;case"end":c=t.roundPixel(i[2]-h+b)+f;break;default:c=t.roundPixel(C+(i[2]-C-h)/2+b)+f}A.setAttributes({translationX:c},!0);break;case"top":h=X?X.y+X.height:0,A.setAttributes({translationY:t.roundPixel(h+(i[3]-h-C)/2)-f},!0);break;case"bottom":h=X?i[3]-X.y:0,A.setAttributes({translationY:t.roundPixel(C+(i[3]-C-h)/2)+f},!0);break;case"radial":A.setAttributes({translationX:g.centerX},!0);break;case"angular":A.setAttributes({translationY:g.centerY},!0);break;case"gauge":A.setAttributes({translationY:g.centerY},!0)}if("left"===p||"right"===p?d.iterate(M,function(e,i,n){if(void 0!==i&&(l=D?Ext.callback(D,null,[F,i,r,P],0,F):R.renderer(i,r,P),P=i,A.setAttributes({text:String(l),translationY:t.roundPixel(e*v+E)},!0),A.applyTransformations(),S=Math.max(S,A.getBBox().width+C),S<=d.thickness)){if(o=Ext.draw.Matrix.fly(A.attr.matrix.elements.slice(0)),s=o.prepend.apply(o,a).transformBBox(A.getBBox(!0)),B&&!w(s,B,x))return;t.renderSprite(A),B=s,T+=s.height,I++}}):"top"===p||"bottom"===p?d.iterate(M,function(e,i,n){if(void 0!==i&&(l=D?Ext.callback(D,null,[F,i,r,P],0,F):R.renderer(i,r,P),P=i,A.setAttributes({text:String(l),translationX:t.roundPixel(e*y+b)},!0),A.applyTransformations(),S=Math.max(S,A.getBBox().height+C),S<=d.thickness)){if(o=Ext.draw.Matrix.fly(A.attr.matrix.elements.slice(0)),s=o.prepend.apply(o,a).transformBBox(A.getBBox(!0)),B&&!w(s,B,x))return;t.renderSprite(A),B=s,T+=s.width,I++}}):"radial"===p?d.iterate(M,function(e,i,n){if(void 0!==i&&(l=D?Ext.callback(D,null,[F,i,r,P],0,F):R.renderer(i,r,P),P=i,"undefined"!=typeof l)){if(A.setAttributes({text:String(l),translationX:g.centerX-t.roundPixel(e)/g.max*g.length*Math.cos(g.baseRotation+Math.PI/2),translationY:g.centerY-t.roundPixel(e)/g.max*g.length*Math.sin(g.baseRotation+Math.PI/2)},!0),A.applyTransformations(),s=A.attr.matrix.transformBBox(A.getBBox(!0)),B&&!w(s,B))return;t.renderSprite(A),B=s,T+=s.width,I++}}):"angular"===p?(k+=g.majorTickSize+.5*g.lineWidth,d.iterate(M,function(e,i,n){if(void 0!==i&&(l=D?Ext.callback(D,null,[F,i,r,P],0,F):R.renderer(i,r,P),P=i,S=Math.max(S,Math.max(g.majorTickSize,g.minorTickSize)+("butt"!==g.lineCap?.5*g.lineWidth:0)),"undefined"!=typeof l)){var a=e/(g.max+1)*Math.PI*2+g.baseRotation;if(A.setAttributes({text:String(l),translationX:g.centerX+(g.length+k)*Math.cos(a),translationY:g.centerY+(g.length+k)*Math.sin(a)},!0),A.applyTransformations(),s=A.attr.matrix.transformBBox(A.getBBox(!0)),B&&!w(s,B))return;t.renderSprite(A),B=s,T+=s.width,I++}})):"gauge"===p&&(u=d.getGaugeAngles(),k+=g.majorTickSize+.5*g.lineWidth,d.iterate(M,function(e,i,n){if(void 0!==i&&(l=D?Ext.callback(D,null,[F,i,r,P],0,F):R.renderer(i,r,P),P=i,"undefined"!=typeof l)){var a=(e-g.min)/(g.max-g.min)*g.totalAngle-g.totalAngle+u.start;if(A.setAttributes({text:String(l),translationX:g.centerX+(g.length+k)*Math.cos(a),translationY:g.centerY+(g.length+k)*Math.sin(a)},!0),A.applyTransformations(),s=A.attr.matrix.transformBBox(A.getBBox(!0)),B&&!w(s,B))return;t.renderSprite(A),B=s,T+=s.width,I++}})),g.enlargeEstStepSizeByText&&I&&(T/=I,T+=C,T*=2,g.estStepSize<T&&(g.estStepSize=T)),Math.abs(d.thickness-S)>1)return d.thickness=S,g.bbox.plain.dirty=!0,g.bbox.transform.dirty=!0,d.doThicknessChanged(),!1}},renderAxisLine:function(t,e,r,i){var n,a,s=this,o=s.attr,l=.5*o.lineWidth,h=o.position;if(o.axisLine&&o.length)switch(h){case"left":n=t.roundPixel(i[2])-l,e.moveTo(n,-o.endGap),e.lineTo(n,o.length+o.startGap+1);break;case"right":e.moveTo(l,-o.endGap),e.lineTo(l,o.length+o.startGap+1);break;case"bottom":e.moveTo(-o.startGap,l),e.lineTo(o.length+o.endGap,l);break;case"top":n=t.roundPixel(i[3])-l,e.moveTo(-o.startGap,n),e.lineTo(o.length+o.endGap,n);break;case"angular":e.moveTo(o.centerX+o.length,o.centerY),e.arc(o.centerX,o.centerY,o.length,0,2*Math.PI,!0);break;case"gauge":a=s.getGaugeAngles(),e.moveTo(o.centerX+Math.cos(a.start)*o.length,o.centerY+Math.sin(a.start)*o.length),e.arc(o.centerX,o.centerY,o.length,a.start,a.end,!0)}},getGaugeAngles:function(){var t,e=this,r=e.attr.totalAngle;return t=r<=Math.PI?.5*(Math.PI-r):.5*-(2*Math.PI-r),t=2*Math.PI-t,{start:t,end:t-r}},renderGridLines:function(t,e,r,i){var n,a,s,o=this,l=o.getAxis(),h=o.attr,c=h.matrix,u=h.startGap,d=h.endGap,g=c.getXX(),f=c.getYY(),p=c.getDX(),m=c.getDY(),x=h.position,y=l.getGridAlignment(),b=r.majorTicks;h.grid&&b&&("left"===x||"right"===x?(s=h.min*f+m+d+u,o.iterate(b,function(t,e,r){n=t*f+m+d,o.putMarker(y+"-"+(r%2?"odd":"even"),{y:n,height:s-n},a=r,!0),s=n}),a++,n=0,o.putMarker(y+"-"+(a%2?"odd":"even"),{y:n,height:s-n},a,!0)):"top"===x||"bottom"===x?(s=h.min*g+p+u,u&&o.putMarker(y+"-even",{x:0,width:s},-1,!0),o.iterate(b,function(t,e,r){n=t*g+p+u,o.putMarker(y+"-"+(r%2?"odd":"even"),{x:n,width:s-n},a=r,!0),s=n}),a++,n=h.length+h.startGap+h.endGap,o.putMarker(y+"-"+(a%2?"odd":"even"),{x:n,width:s-n},a,!0)):"radial"===x?o.iterate(b,function(t,e,r){t&&(n=t/h.max*h.length,o.putMarker(y+"-"+(r%2?"odd":"even"),{scalingX:n,scalingY:n},r,!0),s=n)}):"angular"===x&&o.iterate(b,function(t,e,r){h.length&&(n=t/(h.max+1)*Math.PI*2+h.baseRotation,o.putMarker(y+"-"+(r%2?"odd":"even"),{rotationRads:n,rotationCenterX:0,rotationCenterY:0,scalingX:h.length,scalingY:h.length},r,!0),s=n)}))},renderLimits:function(t){var e=this,r=e.getAxis(),i=r.getChart(),n=i.getInnerPadding(),a=Ext.Array.from(r.getLimits());if(a.length){var s,o,l,h,c,u,d,g,f,p=r.limits.surface.getRect(),m=e.attr,x=m.matrix,y=m.position,b=Ext.Object.chain,v=r.limits.titles;if(v.instances=[],v.position=0,"left"===y||"right"===y){for(u=0,d=a.length;d>u;u++)if(h=b(a[u]),!h.line&&(h.line={}),c=Ext.isString(h.value)?r.getCoordFor(h.value):h.value,c=c*x.getYY()+x.getDY(),h.line.y=c+n.top,h.line.strokeStyle=h.line.strokeStyle||m.strokeStyle,e.putMarker("horizontal-limit-lines",h.line,u,!0),h.line.title){switch(v.add(h.line.title),s=v.getBBoxFor(v.position-1),o=h.line.title.position||("left"===y?"start":"end")){case"start":g=10;break;case"end":g=p[2]-10;break;case"middle":g=p[2]/2}v.setAttributesFor(v.position-1,{x:g,y:h.line.y-s.height/2,textAlign:o,fillStyle:h.line.title.fillStyle||h.line.strokeStyle})}}else if("top"===y||"bottom"===y){for(u=0,d=a.length;d>u;u++)if(h=b(a[u]),!h.line&&(h.line={}),c=Ext.isString(h.value)?r.getCoordFor(h.value):h.value,c=c*x.getXX()+x.getDX(),h.line.x=c+n.left,h.line.strokeStyle=h.line.strokeStyle||m.strokeStyle,e.putMarker("vertical-limit-lines",h.line,u,!0),h.line.title){switch(v.add(h.line.title),s=v.getBBoxFor(v.position-1),o=h.line.title.position||("top"===y?"end":"start")){case"start":f=p[3]-s.width/2-10;break;case"end":f=s.width/2+10;break;case"middle":f=p[3]/2}v.setAttributesFor(v.position-1,{x:h.line.x+s.height/2,y:f,fillStyle:h.line.title.fillStyle||h.line.strokeStyle,rotationRads:Math.PI/2})}}else if("radial"===y)for(u=0,d=a.length;d>u;u++)h=b(a[u]),!h.line&&(h.line={}),c=Ext.isString(h.value)?r.getCoordFor(h.value):h.value,c>m.max||(c=c/m.max*m.length,h.line.cx=m.centerX,h.line.cy=m.centerY,h.line.scalingX=c,h.line.scalingY=c,h.line.strokeStyle=h.line.strokeStyle||m.strokeStyle,e.putMarker("circular-limit-lines",h.line,u,!0),h.line.title&&(v.add(h.line.title),s=v.getBBoxFor(v.position-1),v.setAttributesFor(v.position-1,{x:m.centerX,y:m.centerY-c-s.height/2,fillStyle:h.line.title.fillStyle||h.line.strokeStyle})));else if("angular"===y)for(u=0,d=a.length;d>u;u++)h=b(a[u]),!h.line&&(h.line={}),c=Ext.isString(h.value)?r.getCoordFor(h.value):h.value,c=c/(m.max+1)*Math.PI*2+m.baseRotation,h.line.translationX=m.centerX,h.line.translationY=m.centerY,h.line.rotationRads=c,h.line.rotationCenterX=0,h.line.rotationCenterY=0,h.line.scalingX=m.length,h.line.scalingY=m.length,h.line.strokeStyle=h.line.strokeStyle||m.strokeStyle,e.putMarker("radial-limit-lines",h.line,u,!0),h.line.title&&(v.add(h.line.title),s=v.getBBoxFor(v.position-1),l=c>-.5*Math.PI&&c<.5*Math.PI||c>1.5*Math.PI&&c<2*Math.PI?1:-1,v.setAttributesFor(v.position-1,{x:m.centerX+.5*m.length*Math.cos(c)+l*s.height/2*Math.sin(c),y:m.centerY+.5*m.length*Math.sin(c)-l*s.height/2*Math.cos(c),rotationRads:1===l?c:c-Math.PI,fillStyle:h.line.title.fillStyle||h.line.strokeStyle}))}},doThicknessChanged:function(){var t=this.getAxis();t&&t.onThicknessChanged()},render:function(t,e,r){var i=this,n=i.getLayoutContext();if(n){if(!1===i.renderLabels(t,e,n,r))return!1;e.beginPath(),i.renderTicks(t,e,n,r),i.renderAxisLine(t,e,n,r),i.renderGridLines(t,e,n,r),i.renderLimits(r),e.stroke()}}}),Ext.define("Ext.chart.axis.segmenter.Segmenter",{config:{axis:null},constructor:function(t){this.initConfig(t)},renderer:function(t,e){return String(t)},from:function(t){return t},diff:Ext.emptyFn,align:Ext.emptyFn,add:Ext.emptyFn,preferredStep:Ext.emptyFn}),Ext.define("Ext.chart.axis.segmenter.Names",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.names",renderer:function(t,e){return t},diff:function(t,e,r){return Math.floor(e-t)},align:function(t,e,r){return Math.floor(t)},add:function(t,e,r){return t+e},preferredStep:function(t,e,r,i){return{unit:1,step:1}}}),Ext.define("Ext.chart.axis.segmenter.Numeric",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.numeric",isNumeric:!0,renderer:function(t,e){return t.toFixed(Math.max(0,e.majorTicks.unit.fixes))},diff:function(t,e,r){return Math.floor((e-t)/r.scale)},align:function(t,e,r){var i=r.scale*e;return Math.floor(t/i)*i},add:function(t,e,r){return t+e*r.scale},preferredStep:function(t,e){var r=Math.floor(Math.log(e)*Math.LOG10E),i=Math.pow(10,r);return e/=i,2>e?e=2:5>e?e=5:10>e&&(e=10,r++),{unit:{fixes:-r,scale:i},step:e}},leadingZeros:function(t){return-Math.floor(Ext.Number.log10(Math.abs(t)))},exactStep:function(t,e){var r=this.leadingZeros(e),i=Math.pow(10,r);return{unit:{fixes:r+(e%i===0?0:1),scale:1>e?e:1},step:1>e?1:e}},adjustByMajorUnit:function(t,e,r){var i=r[0],n=r[1],a=t*e,s=i%a;0!==s&&(r[0]=i-s+(0>i?-a:0)),s=n%a,0!==s&&(r[1]=n-s+(n>0?a:0))}}),Ext.define("Ext.chart.axis.segmenter.Time",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.time",config:{step:null},renderer:function(t,e){var r=Ext.Date;switch(e.majorTicks.unit){case"y":return r.format(t,"Y");case"mo":return r.format(t,"Y-m");case"d":return r.format(t,"Y-m-d")}return r.format(t,"Y-m-d\nH:i:s")},from:function(t){return new Date(t)},diff:function(t,e,r){return isFinite(t)&&(t=new Date(t)),isFinite(e)&&(e=new Date(e)),Ext.Date.diff(t,e,r)},updateStep:function(){var t=this.getAxis();t&&!this.isConfiguring&&t.performLayout()},align:function(t,e,r){return"d"===r&&e>=7?(t=Ext.Date.align(t,"d",e),t.setDate(t.getDate()-t.getDay()+1),t):Ext.Date.align(t,r,e)},add:function(t,e,r){return Ext.Date.add(new Date(t),r,e)},stepUnits:[[Ext.Date.YEAR,1,2,5,10,20,50,100,200,500],[Ext.Date.MONTH,1,3,6],[Ext.Date.DAY,1,7,14],[Ext.Date.HOUR,1,6,12],[Ext.Date.MINUTE,1,5,15,30],[Ext.Date.SECOND,1,5,15,30],[Ext.Date.MILLI,1,2,5,10,20,50,100,200,500]],preferredStep:function(t,e){if(this.getStep())return this.getStep();var r,i,n,a,s,o=new Date(+t),l=new Date(+t+Math.ceil(e)),h=this.stepUnits;for(a=0;a<h.length;a++)if(i=h[a][0],n=this.diff(o,l,i),n>0){for(s=1;s<h[a].length;s++)if(n<=h[a][s]){r={unit:i,step:h[a][s]};break}r||(a--,r={unit:h[a][0],step:1});break}return r||(r={unit:Ext.Date.DAY,step:1}),r}}),Ext.define("Ext.chart.axis.layout.Layout",{mixins:{observable:"Ext.mixin.Observable"},config:{axis:null},constructor:function(t){this.mixins.observable.constructor.call(this,t)},processData:function(t){var e,r,i=this,n=i.getAxis(),a=n.getDirection(),s=n.boundSeries;if(t)t["coordinate"+a]();else for(e=0,r=s.length;r>e;e++)s[e]["coordinate"+a]()},calculateMajorTicks:function(t){var e=this,r=t.attr,i=r.max-r.min,n=i/Math.max(1,r.length)*(r.visibleMax-r.visibleMin),a=r.min+i*r.visibleMin,s=r.min+i*r.visibleMax,o=r.estStepSize*n,l=e.snapEnds(t,r.min,r.max,o);l&&(e.trimByRange(t,l,a,s),t.majorTicks=l)},calculateMinorTicks:function(t){this.snapMinorEnds&&(t.minorTicks=this.snapMinorEnds(t))},calculateLayout:function(t){var e=this,r=t.attr;return 0===r.length?null:void(r.majorTicks&&(e.calculateMajorTicks(t),r.minorTicks&&e.calculateMinorTicks(t)))},snapEnds:Ext.emptyFn,trimByRange:function(t,e,r,i){var n=t.segmenter,a=e.unit,s=n.diff(e.from,r,a),o=n.diff(e.from,i,a),l=Math.max(0,Math.ceil(s/e.step)),h=Math.min(e.steps,Math.floor(o/e.step));if(h<e.steps&&(e.to=n.add(e.from,h*e.step,a)),e.max>i&&(e.max=e.to),e.from<r)for(e.from=n.add(e.from,l*e.step,a);e.from<r;)l++,e.from=n.add(e.from,e.step,a);e.min<r&&(e.min=e.from),e.steps=h-l}}),Ext.define("Ext.chart.axis.layout.Discrete",{extend:"Ext.chart.axis.layout.Layout",alias:"axisLayout.discrete",isDiscrete:!0,processData:function(){var t,e,r,i=this,n=i.getAxis(),a=n.boundSeries,s=n.getDirection();for(i.labels=[],i.labelMap={},t=0,e=a.length;e>t;t++)r=a[t],r["get"+s+"Axis"]()===n&&r["coordinate"+s]();n.getSprites()[0].setAttributes({data:i.labels}),i.fireEvent("datachange",i.labels)},calculateLayout:function(t){t.data=this.labels,this.callParent([t])},calculateMajorTicks:function(t){var e,r=this,i=t.attr,n=t.data,a=i.max-i.min,s=i.min+a*i.visibleMin,o=i.min+a*i.visibleMax;e=r.snapEnds(t,Math.max(0,i.min),Math.min(i.max,n.length-1),1),e&&(r.trimByRange(t,e,s,o),t.majorTicks=e)},snapEnds:function(t,e,r,i){i=Math.ceil(i);var n=Math.floor((r-e)/i),a=t.data;return{min:e,max:r,from:e,to:n*i+e,step:i,steps:n,unit:1,getLabel:function(t){return a[this.from+this.step*t]},get:function(t){return this.from+this.step*t}}},trimByRange:function(t,e,r,i){var n=e.unit,a=Math.ceil((r-e.from)/n)*n,s=Math.floor((i-e.from)/n)*n,o=Math.max(0,Math.ceil(a/e.step)),l=Math.min(e.steps,Math.floor(s/e.step));if(l<e.steps&&(e.to=l),e.max>i&&(e.max=e.to),e.from<r&&e.step>0)for(e.from=e.from+o*e.step*n;e.from<r;)o++,e.from+=e.step*n;e.min<r&&(e.min=e.from),e.steps=l-o},getCoordFor:function(t,e,r,i){return this.labels.push(t),this.labels.length-1}}),Ext.define("Ext.chart.axis.layout.CombineDuplicate",{extend:"Ext.chart.axis.layout.Discrete",alias:"axisLayout.combineDuplicate",getCoordFor:function(t,e,r,i){if(!(t in this.labelMap)){var n=this.labelMap[t]=this.labels.length;return this.labels.push(t),n}return this.labelMap[t]}}),Ext.define("Ext.chart.axis.layout.Continuous",{extend:"Ext.chart.axis.layout.Layout",alias:"axisLayout.continuous",isContinuous:!0,config:{adjustMinimumByMajorUnit:!1,adjustMaximumByMajorUnit:!1},getCoordFor:function(t,e,r,i){return+t},snapEnds:function(t,e,r,i){var n=t.segmenter,a=this.getAxis(),s=a.getMajorTickSteps(),o=s&&n.exactStep?n.exactStep(e,(r-e)/s):n.preferredStep(e,i),l=o.unit,h=o.step,c=s?e:n.align(e,h,l),u=(s||n.diff(e,r,l))+1;return{min:n.from(e),max:n.from(r),from:c,to:n.add(c,u*h,l),step:h,steps:u,unit:l,get:function(t){return n.add(this.from,this.step*t,this.unit)}}},snapMinorEnds:function(t){var e=t.majorTicks,r=this.getAxis().getMinorTickSteps(),i=t.segmenter,n=e.min,a=e.max,s=e.from,o=e.unit,l=e.step/r,h=l*o.scale,c=s-n,u=Math.floor(c/h),d=u+Math.floor((a-e.to)/h)+1,g=e.steps*r+d;return{min:n,max:a,from:n+c%h,to:i.add(s,g*l,o),step:l,steps:g,unit:o,get:function(t){return t%r+u+1!==0?i.add(this.from,this.step*t,o):null}}}}),Ext.define("Ext.chart.axis.Axis",{xtype:"axis",mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.chart.axis.sprite.Axis","Ext.chart.axis.segmenter.*","Ext.chart.axis.layout.*"],isAxis:!0,config:{position:"bottom",fields:[],label:void 0,grid:!1,limits:null,renderer:null,chart:null,style:null,margin:0,titleMargin:4,background:null,minimum:0/0,maximum:0/0,reconcileRange:!1,minZoom:1,maxZoom:1e4,layout:"continuous",segmenter:"numeric",hidden:!1,majorTickSteps:0,minorTickSteps:0,adjustByMajorUnit:!0,title:null,increment:.5,length:0,center:null,radius:null,totalAngle:Math.PI,rotation:null,labelInSpan:null,visibleRange:[0,1],needHighPrecision:!1,linkedTo:null,floating:null},titleOffset:0,spriteAnimationCount:0,prevMin:0,prevMax:1,boundSeries:[],sprites:null,surface:null,range:null,xValues:[],yValues:[],masterAxis:null,applyRotation:function(t){var e=2*Math.PI;return(t%e+Math.PI)%e-Math.PI},updateRotation:function(t){var e=this.getSprites(),r=this.getPosition();!this.getHidden()&&"angular"===r&&e[0]&&e[0].setAttributes({baseRotation:t})},applyTitle:function(t,e){var r;return Ext.isString(t)&&(t={text:t}),e?e.setAttributes(t):(e=Ext.create("sprite.text",t),(r=this.getSurface())&&r.add(e)),e},applyFloating:function(t,e){return null===t?t={value:null,alongAxis:null}:Ext.isNumber(t)&&(t={value:t,alongAxis:null}),Ext.isObject(t)?(e&&e.alongAxis&&delete this.getChart().getAxis(e.alongAxis).floatingAxes[this.getId()],t):e},constructor:function(t){var e,r=this;r.sprites=[],r.labels=[],r.floatingAxes={},t=t||{},"angular"===t.position&&(t.style=t.style||{},t.style.estStepSize=1),e="id"in t?t.id:"id"in r.config?r.config.id:r.getId(),r.setId(e),r.mixins.observable.constructor.apply(r,arguments)},getAlignment:function(){switch(this.getPosition()){case"left":case"right":return"vertical";case"top":case"bottom":return"horizontal";case"radial":return"radial";case"angular":return"angular"}},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal";case"top":case"bottom":return"vertical";case"radial":return"circular";case"angular":return"radial"}},getSurface:function(){var t=this,e=t.getChart();if(e&&!t.surface){var r=t.surface=e.getSurface(t.getId(),"axis"),i=t.gridSurface=e.getSurface("main"),n=t.getSprites()[0],a=t.getGridAlignment();i.waitFor(r),t.getGrid(),t.getLimits()&&a&&(a=a.replace("3d",""),t.limits={surface:e.getSurface("overlay"),lines:new Ext.chart.Markers,titles:new Ext.draw.sprite.Instancing},t.limits.lines.setTemplate({xclass:"grid."+a}),t.limits.lines.getTemplate().setAttributes({strokeStyle:"black"},!0),t.limits.surface.add(t.limits.lines),n.bindMarker(a+"-limit-lines",t.limits.lines),t.limitTitleTpl=new Ext.draw.sprite.Text,t.limits.titles.setTemplate(t.limitTitleTpl),t.limits.surface.add(t.limits.titles),e.on("redraw",t.renderLimits,t))}return t.surface},applyGrid:function(t){return t===!0?{}:t},updateGrid:function(t){var e=this,r=e.getChart();if(!r)return void e.on({chartattached:Ext.bind(e.updateGrid,e,[t]),single:!0});var i,n=e.gridSurface,a=e.getSprites()[0],s=e.getGridAlignment();t&&(i=e.gridSpriteEven,i||(i=e.gridSpriteEven=new Ext.chart.Markers,i.setTemplate({xclass:"grid."+s}),n.add(i),a.bindMarker(s+"-even",i)),Ext.isObject(t)&&(i.getTemplate().setAttributes(t),Ext.isObject(t.even)&&i.getTemplate().setAttributes(t.even)),i=e.gridSpriteOdd,i||(i=e.gridSpriteOdd=new Ext.chart.Markers,i.setTemplate({xclass:"grid."+s}),n.add(i),a.bindMarker(s+"-odd",i)),Ext.isObject(t)&&(i.getTemplate().setAttributes(t),Ext.isObject(t.odd)&&i.getTemplate().setAttributes(t.odd)))},updateMinorTickSteps:function(t){var e,r=this,i=r.getSprites(),n=i&&i[0];n&&(n.setAttributes({minorTicks:!!t}),e=r.getSurface(),!r.isConfiguring&&e&&e.renderFrame())},renderLimits:function(){this.getSprites()[0].renderLimits()},getCoordFor:function(t,e,r,i){return this.getLayout().getCoordFor(t,e,r,i)},applyPosition:function(t){return t.toLowerCase()},applyLength:function(t,e){return t>0?t:e},applyLabel:function(t,e){return e||(e=new Ext.draw.sprite.Text({})),this.limitTitleTpl&&this.limitTitleTpl.setAttributes(t),e.setAttributes(t),e},applyLayout:function(t,e){return t=Ext.factory(t,null,e,"axisLayout"),t.setAxis(this),t},applySegmenter:function(t,e){return t=Ext.factory(t,null,e,"segmenter"),t.setAxis(this),t},updateMinimum:function(){this.range=null},updateMaximum:function(){this.range=null},hideLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!0})},showLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!1})},renderFrame:function(){this.getSurface().renderFrame()},updateChart:function(t,e){var r,i=this;e&&(e.unregister(i),e.un("serieschange",i.onSeriesChange,i),e.un("redraw",i.renderLimits,i),i.linkAxis(),i.fireEvent("chartdetached",e,i)),t&&(t.on("serieschange",i.onSeriesChange,i),i.surface=null,r=i.getSurface(),i.getLabel().setSurface(r),r.add(i.getSprites()),r.add(i.getTitle()),t.register(i),i.fireEvent("chartattached",t,i))},applyBackground:function(t){var e=Ext.ClassManager.getByAlias("sprite.rect");return e.def.normalize(t)},processData:function(){this.getLayout().processData(),this.range=null},getDirection:function(){return this.getChart().getDirectionForAxis(this.getPosition())},isSide:function(){var t=this.getPosition();return"left"===t||"right"===t},applyFields:function(t){return Ext.Array.from(t)},applyVisibleRange:function(t,e){if(this.getChart(),t[0]>t[1]){var r=t[0];t[0]=t[1],t[0]=r}return t[1]===t[0]&&(t[1]+=1/this.getMaxZoom()),t[1]>t[0]+1?(t[0]=0,t[1]=1):t[0]<0?(t[1]-=t[0],t[0]=0):t[1]>1&&(t[0]-=t[1]-1,t[1]=1),e&&t[0]===e[0]&&t[1]===e[1]?void 0:t},updateVisibleRange:function(t){this.fireEvent("visiblerangechange",this,t)},onSeriesChange:function(t){var e,r,i,n,a,s=this,o=t.getSeries(),l=[];if(o)for(i="get"+s.getDirection()+"Axis",n=0,a=o.length;a>n;n++)this===o[n][i]()&&l.push(o[n]);s.boundSeries=l,e=s.getLinkedTo(),r=!Ext.isEmpty(e)&&t.getAxis(e),r?s.linkAxis(r):s.getLayout().processData()},linkAxis:function(t){function e(t,e,r){r.getLayout()[t]("datachange","onDataChange",e),r[t]("rangechange","onMasterAxisRangeChange",e)}var r=this;r.masterAxis&&(r.masterAxis.destroyed||e("un",r,r.masterAxis),r.masterAxis=null),t&&(t.type!==this.type&&Ext.Error.raise("Linked axes must be of the same type."),e("on",r,t),r.onDataChange(t.getLayout().labels),r.onMasterAxisRangeChange(t,t.range),r.setStyle(Ext.apply({},r.config.style,t.config.style)),r.setTitle(Ext.apply({},r.config.title,t.config.title)),r.setLabel(Ext.apply({},r.config.label,t.config.label)),r.masterAxis=t)},onDataChange:function(t){this.getLayout().labels=t},onMasterAxisRangeChange:function(t,e){this.range=e},applyRange:function(t){return t?[null===t[0]?this.dataRange[0]:t[0],null===t[1]?this.dataRange[1]:t[1]]:this.dataRange.slice(0)},getRange:function(){var t=this;if(t.range)return t.range;if(t.masterAxis)return t.masterAxis.range;if(Ext.isNumber(t.getMinimum())&&Ext.isNumber(t.getMaximum()))return t.range=[t.getMinimum(),t.getMaximum()];var e,r,i,n,a,s,o=1/0,l=-(1/0),h=t.boundSeries,c=t.getLayout(),u=t.getSegmenter(),d=t.getVisibleRange(),g="get"+t.getDirection()+"Range";for(a=0,s=h.length;s>a;a++){n=h[a];var f=n[g]();f&&(f[0]<o&&(o=f[0]),f[1]>l&&(l=f[1]))}return isFinite(l)||(l=t.prevMax),isFinite(o)||(o=t.prevMin),(t.getLabelInSpan()||o===l)&&(l+=t.getIncrement(),o-=t.getIncrement()),Ext.isNumber(t.getMinimum())?o=t.getMinimum():t.prevMin=o,Ext.isNumber(t.getMaximum())?l=t.getMaximum():t.prevMax=l,t.range=[Ext.Number.correctFloat(o),Ext.Number.correctFloat(l)],t.getReconcileRange()&&t.reconcileRange(),t.getAdjustByMajorUnit()&&u.adjustByMajorUnit&&!t.getMajorTickSteps()&&(r=Ext.Object.chain(t.getSprites()[0].attr),r.min=t.range[0],r.max=t.range[1],r.visibleMin=d[0],r.visibleMax=d[1],e={attr:r,segmenter:u},c.calculateLayout(e),i=e.majorTicks,i?(u.adjustByMajorUnit(i.step,i.unit.scale,t.range),r.min=t.range[0],r.max=t.range[1],e.majorTicks=null,c.calculateLayout(e),i=e.majorTicks,u.adjustByMajorUnit(i.step,i.unit.scale,t.range)):t.hasClearRangePending||(t.hasClearRangePending=!0,t.getChart().on("layout","clearRange",t))),Ext.Array.equals(t.range,t.oldRange||[])||(t.fireEvent("rangechange",t,t.range),t.oldRange=t.range),t.range},clearRange:function(){this.hasClearRangePending=null,this.range=null},reconcileRange:function(){var t,e,r,i,n=this,a=n.getChart().getAxes(),s=n.getDirection();if(a)for(t=0,e=a.length;e>t;t++)r=a[t],i=r.getRange(),r!==n&&r.getDirection()===s&&i&&r.getReconcileRange()&&(i[0]<n.range[0]&&(n.range[0]=i[0]),i[1]>n.range[1]&&(n.range[1]=i[1]))},applyStyle:function(t,e){var r=Ext.ClassManager.getByAlias("sprite."+this.seriesType);return r&&r.def&&(t=r.def.normalize(t)),e=Ext.apply(e||{},t)},themeOnlyIfConfigured:{grid:!0},updateTheme:function(t){var e,r,i,n,a,s,o=this,l=t.getAxis(),h=o.getPosition(),c=o.getInitialConfig(),u=o.defaultConfig,d=o.self.getConfigurator().configs,g=l.defaults,f=l[h],p=o.themeOnlyIfConfigured;l=Ext.merge({},g,f);for(e in l)if(r=l[e],s=d[e],null!==r&&void 0!==r&&s){if(a=c[e],i=Ext.isObject(r),n=a===u[e],i){if(n&&p[e])continue;r=Ext.merge({},r,a)}(n||i)&&o[s.names.set](r)}},updateCenter:function(t){var e=this.getSprites(),r=e[0],i=t[0],n=t[1];r&&r.setAttributes({centerX:i,centerY:n}),this.gridSpriteEven&&this.gridSpriteEven.getTemplate().setAttributes({translationX:i,translationY:n,rotationCenterX:i,rotationCenterY:n}),this.gridSpriteOdd&&this.gridSpriteOdd.getTemplate().setAttributes({translationX:i,translationY:n,rotationCenterX:i,rotationCenterY:n})},getSprites:function(){if(this.getChart()){var t,e,r=this,i=r.getRange(),n=r.getPosition(),a=r.getChart(),s=a.getAnimation(),o=r.getLength(),l=r.superclass;if(s===!1&&(s={duration:0}),i){if(e=Ext.applyIf({position:n,axis:r,min:i[0],max:i[1],length:o,grid:r.getGrid(),hidden:r.getHidden(),titleOffset:r.titleOffset,layout:r.getLayout(),segmenter:r.getSegmenter(),totalAngle:r.getTotalAngle(),label:r.getLabel()},r.getStyle()),r.sprites.length)t=r.sprites[0],t.setAnimation(s),t.setAttributes(e);else{for(;!l.xtype;)l=l.superclass;t=Ext.create("sprite."+l.xtype,e),t.fx.setCustomDurations({baseRotation:0}),t.fx.on("animationstart","onAnimationStart",r),t.fx.on("animationend","onAnimationEnd",r),t.setLayout(r.getLayout()),t.setSegmenter(r.getSegmenter()),t.setLabel(r.getLabel()),r.sprites.push(t),r.updateTitleSprite()}r.getRenderer()&&t.setRenderer(r.getRenderer())}return r.sprites}},performLayout:function(){if(!this.isConfiguring){var t=this,e=t.getSprites(),r=t.getSurface(),i=t.getChart(),n=e&&e.length&&e[0];i&&r&&n&&(n.callUpdater(null,"layout"),i.scheduleLayout())}},updateTitleSprite:function(){var t=this,e=t.getLength();if(t.sprites[0]&&Ext.isNumber(e)){var r=this.sprites[0].thickness,i=t.getSurface(),n=t.getTitle(),a=t.getPosition(),s=t.getMargin(),o=t.getTitleMargin(),l=i.roundPixel(e/2);if(n)switch(a){case"top":n.setAttributes({x:l,y:s+o/2,textBaseline:"top",textAlign:"center"},!0),n.applyTransformations(),t.titleOffset=n.getBBox().height+o;break;case"bottom":n.setAttributes({x:l,y:r+o/2,textBaseline:"top",textAlign:"center"},!0),n.applyTransformations(),t.titleOffset=n.getBBox().height+o;break;case"left":n.setAttributes({x:s+o/2,y:l,textBaseline:"top",textAlign:"center",rotationCenterX:s+o/2,rotationCenterY:l,rotationRads:-Math.PI/2},!0),n.applyTransformations(),t.titleOffset=n.getBBox().width+o;break;case"right":n.setAttributes({x:r-s+o/2,y:l,textBaseline:"bottom",textAlign:"center",rotationCenterX:r+o/2,rotationCenterY:l,rotationRads:Math.PI/2},!0),n.applyTransformations(),t.titleOffset=n.getBBox().width+o}}},onThicknessChanged:function(){this.getChart().onThicknessChanged()},getThickness:function(){return this.getHidden()?0:(this.sprites[0]&&this.sprites[0].thickness||1)+this.titleOffset+this.getMargin()},onAnimationStart:function(){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend",this)},getItemId:function(){return this.getId()},getAncestorIds:function(){return[this.getChart().getId()]},isXType:function(t){return"axis"===t},resolveListenerScope:function(t){var e,r=this,i=Ext._namedScopes[t],n=r.getChart();return i?i.isThis?e=r:i.isController?e=n?n.resolveListenerScope(t,!1):r:i.isSelf&&(e=n?n.resolveListenerScope(t,!1):r,e!==n||n.getInheritedConfig("defaultListenerScope")||(e=r)):e=n?n.resolveListenerScope(t,!1):t||r,e},destroy:function(){var t=this;t.setChart(null),t.surface.destroy(),t.surface=null,t.callParent()}}),Ext.define("Ext.chart.legend.LegendBase",{extend:"Ext.view.View",config:{tpl:['<div class="',Ext.baseCSSPrefix,'legend-inner">','<div class="',Ext.baseCSSPrefix,'legend-container">','<tpl for=".">','<div class="',Ext.baseCSSPrefix,'legend-item">',"<span ",'class="',Ext.baseCSSPrefix,"legend-item-marker {[ values.disabled ? Ext.baseCSSPrefix + 'legend-item-inactive' : '' ]}\" ",'style="background:{mark};">',"</span>{name}","</div>","</tpl>","</div>","</div>"],nodeContainerSelector:"div."+Ext.baseCSSPrefix+"legend-inner",itemSelector:"div."+Ext.baseCSSPrefix+"legend-item",docked:"bottom"},setDocked:function(t){var e=this,r=e.ownerCt;switch(e.docked=e.dock=t,t){case"top":case"bottom":e.addCls(e.horizontalCls),e.removeCls(e.verticalCls);break;case"left":case"right":e.addCls(e.verticalCls),e.removeCls(e.horizontalCls)}r&&r.setDock(t)},setStore:function(t){this.bindStore(t)},clearViewEl:function(){this.callParent(arguments),Ext.removeNode(this.getNodeContainer())},onItemClick:function(t,e,r,i){this.callParent(arguments),this.toggleItem(r)}}),Ext.define("Ext.chart.legend.Legend",{extend:"Ext.chart.legend.LegendBase",alternateClassName:"Ext.chart.Legend",xtype:"legend",alias:"legend.dom",type:"dom",isLegend:!0,isDomLegend:!0,config:{baseCls:Ext.baseCSSPrefix+"legend",rect:null,toggleable:!0},horizontalCls:Ext.baseCSSPrefix+"legend-horizontal",verticalCls:Ext.baseCSSPrefix+"legend-vertical",toggleItem:function(t){if(this.getToggleable()){var e,r,i,n,a=this.getStore(),s=0,o=!0;if(a){for(i=a.getCount(),r=0;i>r;r++)n=a.getAt(r),n.get("disabled")&&s++;o=i-s>1,n=a.getAt(t),n&&(e=n.get("disabled"),(e||o)&&n.set("disabled",!e))}}}}),Ext.define("Ext.chart.legend.sprite.Item",{extend:"Ext.draw.sprite.Composite",alias:"sprite.legenditem",type:"legenditem",isLegendItem:!0,requires:["Ext.draw.sprite.Text","Ext.draw.sprite.Circle"],inheritableStatics:{def:{processors:{enabled:"limited01",markerLabelGap:"number"},animationProcessors:{enabled:null,markerLabelGap:null},defaults:{enabled:!0,markerLabelGap:5},triggers:{enabled:"enabled",markerLabelGap:"layout"},updaters:{layout:"layoutUpdater",enabled:"enabledUpdater"}}},config:{label:{$value:{type:"text"},lazy:!0},marker:{$value:{type:"circle"},lazy:!0},legend:null,store:null,record:null,series:null},applyLabel:function(t,e){var r;return t&&(t.isSprite&&"text"===t.type?r=t:e&&t.type===e.type?(e.setConfig(t),r=e,this.scheduleUpdater(this.attr,"layout")):r=new Ext.draw.sprite.Text(t)),r},defaultMarkerSize:10,updateLabel:function(t,e){var r=this;r.removeSprite(e),t.setAttributes({textBaseline:"middle"}),r.add(t),r.scheduleUpdater(r.attr,"layout")},applyMarker:function(t){var e;return t&&(e=t.isSprite?t:this.createMarker(t)),e=this.resetMarker(e,t)},createMarker:function(t){var e;return delete t.fx,"image"===t.type&&(delete t.width,delete t.height),e=Ext.create("sprite."+t.type,t)},resetMarker:function(t,e){var r,i,n,a=e.size||this.defaultMarkerSize;return t.setTransform([1,0,0,1,0,0],!0),"image"===e.type?t.setAttributes({
width:a,height:a}):(r=t.getBBox(),i=Math.max(r.width,r.height),n=a/i,t.setAttributes({scalingX:n,scalingY:n})),t},updateMarker:function(t,e){var r=this;r.removeSprite(e),r.add(t),r.scheduleUpdater(r.attr,"layout")},updateSurface:function(t,e){var r=this;r.callParent([t,e]),t&&r.scheduleUpdater(r.attr,"layout")},enabledUpdater:function(t){var e=this.getMarker();e&&e.setAttributes({globalAlpha:t.enabled?1:.3})},layoutUpdater:function(t){var e,r,i,n=this,t=n.attr,a=n.getLabel(),s=n.getMarker();r=s.getBBox(),e=a.getBBox(),i=Math.max(r.height,e.height),s.transform([1,0,0,1,-r.x,-r.y+(i-r.height)/2],!0),a.transform([1,0,0,1,-e.x+r.width+t.markerLabelGap,-e.y+(i-e.height)/2],!0),n.bboxUpdater(t)}}),Ext.define("Ext.chart.legend.sprite.Border",{extend:"Ext.draw.sprite.Rect",alias:"sprite.legendborder",type:"legendborder",isLegendBorder:!0}),Ext.define("Ext.draw.PathUtil",function(){var t=Math.abs,e=Math.pow,r=Math.cos,i=Math.acos,n=Math.sqrt,a=Math.PI;return{singleton:!0,requires:["Ext.draw.overrides.hittest.Path","Ext.draw.overrides.hittest.sprite.Path"],cubicRoots:function(s){var o=s[0],l=s[1],h=s[2],c=s[3];if(0===o)return this.quadraticRoots(l,h,c);var u,d,g,f,p,m=l/o,x=h/o,y=c/o,b=(3*x-e(m,2))/9,v=(9*m*x-27*y-2*e(m,3))/54,E=e(b,3)+e(v,2),S=[],M=Ext.Number.sign;for(E>=0?(u=M(v+n(E))*e(t(v+n(E)),1/3),d=M(v-n(E))*e(t(v-n(E)),1/3),S[0]=-m/3+(u+d),S[1]=-m/3-(u+d)/2,S[2]=S[1],g=t(n(3)*(u-d)/2),0!==g&&(S[1]=-1,S[2]=-1)):(f=i(v/n(-e(b,3))),S[0]=2*n(-b)*r(f/3)-m/3,S[1]=2*n(-b)*r((f+2*a)/3)-m/3,S[2]=2*n(-b)*r((f+4*a)/3)-m/3),p=0;3>p;p++)(S[p]<0||S[p]>1)&&(S[p]=-1);return S},quadraticRoots:function(t,e,r){var i,a,s,o;if(0===t)return this.linearRoot(e,r);if(i=e*e-4*t*r,0===i)s=[-e/(2*t)];else{if(!(i>0))return[];a=n(i),s=[(-e-a)/(2*t),(-e+a)/(2*t)]}for(o=0;o<s.length;o++)(s[o]<0||s[o]>1)&&(s[o]=-1);return s},linearRoot:function(t,e){var r=-e/t;return 0===t||0>r||r>1?[]:[r]},bezierCoeffs:function(t,e,r,i){var n=[];return n[0]=-t+3*e-3*r+i,n[1]=3*t-6*e+3*r,n[2]=-3*t+3*e,n[3]=t,n},cubicLineIntersections:function(t,e,r,i,n,a,s,o,l,h,c,u){var d,g,f,p,m,x,y,b,v=[],E=[],S=h-u,M=c-l,C=l*(u-h)-h*(c-l),w=this.bezierCoeffs(t,e,r,i),A=this.bezierCoeffs(n,a,s,o);for(v[0]=S*w[0]+M*A[0],v[1]=S*w[1]+M*A[1],v[2]=S*w[2]+M*A[2],v[3]=S*w[3]+M*A[3]+C,g=this.cubicRoots(v),d=0;d<g.length;d++)p=g[d],0>p||p>1||(m=p*p,x=m*p,y=w[0]*x+w[1]*m+w[2]*p+w[3],b=A[0]*x+A[1]*m+A[2]*p+A[3],f=c-l!==0?(y-l)/(c-l):(b-h)/(u-h),0>f||f>1||E.push([y,b]));return E},splitCubic:function(t,e,r,i,n){var a=n*n,s=n*a,o=n-1,l=o*o,h=o*l,c=s*i-3*a*o*r+3*n*l*e-h*t;return[[t,n*e-o*t,a*r-2*n*o*e+l*t,c],[c,a*i-2*n*o*r+l*e,n*i-o*r,i]]},cubicDimension:function(t,e,r,i){var a,s,o,l=3*(-t+3*(e-r)+i),h=6*(t-2*e+r),c=-3*(t-e),u=Math.min(t,i),d=Math.max(t,i);if(0===l){if(0===h)return[u,d];a=-c/h,a>0&&1>a&&(s=this.interpolateCubic(t,e,r,i,a),u=Math.min(u,s),d=Math.max(d,s))}else o=h*h-4*l*c,o>=0&&(o=n(o),a=(o-h)/2/l,a>0&&1>a&&(s=this.interpolateCubic(t,e,r,i,a),u=Math.min(u,s),d=Math.max(d,s)),o>0&&(a-=o/l,a>0&&1>a&&(s=this.interpolateCubic(t,e,r,i,a),u=Math.min(u,s),d=Math.max(d,s))));return[u,d]},interpolateCubic:function(t,e,r,i,n){if(0===n)return t;if(1===n)return i;var a=(1-n)/n;return n*n*n*(i+a*(3*r+a*(3*e+a*t)))},cubicsIntersections:function(e,r,i,n,a,s,o,l,h,c,u,d,g,f,p,m){var x,y,b,v,E=this,S=E.cubicDimension(e,r,i,n),M=E.cubicDimension(a,s,o,l),C=E.cubicDimension(h,c,u,d),w=E.cubicDimension(g,f,p,m),A=[];return S[0]>C[1]||S[1]<C[0]||M[0]>w[1]||M[1]<w[0]?[]:t(a-s)<1&&t(o-l)<1&&t(e-n)<1&&t(r-i)<1&&t(g-f)<1&&t(p-m)<1&&t(h-d)<1&&t(c-u)<1?[[.5*(e+n),.5*(a+s)]]:(x=E.splitCubic(e,r,i,n,.5),y=E.splitCubic(a,s,o,l,.5),b=E.splitCubic(h,c,u,d,.5),v=E.splitCubic(g,f,p,m,.5),A.push.apply(A,E.cubicsIntersections.apply(E,x[0].concat(y[0],b[0],v[0]))),A.push.apply(A,E.cubicsIntersections.apply(E,x[0].concat(y[0],b[1],v[1]))),A.push.apply(A,E.cubicsIntersections.apply(E,x[1].concat(y[1],b[0],v[0]))),A.push.apply(A,E.cubicsIntersections.apply(E,x[1].concat(y[1],b[1],v[1]))),A)},linesIntersection:function(t,e,r,i,n,a,s,o){var l,h,c=(r-t)*(o-a)-(i-e)*(s-n);return 0===c?null:(l=((s-n)*(e-a)-(t-n)*(o-a))/c,h=((r-t)*(e-a)-(i-e)*(t-n))/c,l>=0&&1>=l&&h>=0&&1>=h?[t+l*(r-t),e+l*(i-e)]:null)},pointOnLine:function(e,r,i,n,a,s){var o,l;return t(i-e)<t(n-r)&&(l=e,e=r,r=l,l=i,i=n,n=l,l=a,a=s,s=l),o=(a-e)/(i-e),0>o||o>1?!1:t(r+o*(n-r)-s)<4},pointOnCubic:function(e,r,i,n,a,s,o,l,h,c){var u,d,g,f,p,m=this,x=m.bezierCoeffs(e,r,i,n),y=m.bezierCoeffs(a,s,o,l);for(x[3]-=h,y[3]-=c,g=m.cubicRoots(x),f=m.cubicRoots(y),u=0;u<g.length;u++)for(p=g[u],d=0;d<f.length;d++)if(p>=0&&1>=p&&t(p-f[d])<.05)return!0;return!1}}}),Ext.define("Ext.draw.overrides.hittest.All",{requires:["Ext.draw.PathUtil","Ext.draw.overrides.hittest.sprite.Instancing","Ext.draw.overrides.hittest.Surface"]}),Ext.define("Ext.chart.legend.SpriteLegend",{alias:"legend.sprite",type:"sprite",isLegend:!0,isSpriteLegend:!0,requires:["Ext.chart.legend.sprite.Item","Ext.chart.legend.sprite.Border","Ext.draw.overrides.hittest.All","Ext.draw.Animator"],config:{docked:"bottom",store:"ext-empty-store",chart:null,surface:null,size:{width:0,height:0},toggleable:!0,padding:10,label:{preciseMeasurement:!0},marker:{},border:{$value:{type:"legendborder"},lazy:!0},background:null},sprites:null,spriteZIndexes:{background:0,border:1,item:2},oldSize:{width:0,height:0},constructor:function(t){this.initConfig(t)},applyStore:function(t){return t&&Ext.StoreManager.lookup(t)},applyBorder:function(t){var e;return t&&(e=t.isSprite?t:Ext.create("sprite."+t.type,t)),e&&(e.isLegendBorder=!0,e.setAttributes({zIndex:this.spriteZIndexes.border})),e},updateBorder:function(t,e){var r=this.getSurface();this.borderSprite=null,r&&(e&&r.remove(e),t&&(this.borderSprite=r.add(t)))},scheduleLayout:function(){this.scheduledLayoutId||(this.scheduledLayoutId=Ext.draw.Animator.schedule("performLayout",this))},cancelLayout:function(){Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null},performLayout:function(){var t,e,r=this,i=r.getSize(),n=r.getPadding(),a=r.getSprites(),s=r.getSurface(),o=r.getBackground(),l=s.getRect(),h=r.getStore(),c=a&&a.length||0,u=!0;if(!s||!l||!h)return!1;r.cancelLayout();var d,g,f,p,m,x,y,b,v,E,S,M,C,w,A,k=r.getDocked(),P=l[2],T=l[3],I=r.borderSprite,R=[];for(t=0;c>t;t++)e=a[t],C=e.getBBox(),R.push(C);switch(C&&(M=C.height),k){case"bottom":case"top":if(!P)return!1;f=0;do{for(x=0,m=0,p=0,f++,t=0;c>t;t++)C=R[t],C.width>m&&(m=C.width),(t+1)%f===0&&(x+=m,m=0,p++);t%f!==0&&(x+=m,p++),b=x+(p-1)*n,E=b+4*n}while(E>P);v=M*f+(f-1)*n;break;case"right":case"left":if(!T)return!1;f=2*c;do{for(f=(f>>1)+f%2,x=0,y=0,m=0,p=0,t=0;c>t;t++)C=R[t],p||(y+=C.height),C.width>m&&(m=C.width),(t+1)%f===0&&(x+=m,m=0,p++);t%f!==0&&(x+=m,p++),b=x+(p-1)*n,v=y+(f-1)*n,E=b+4*n,S=v+4*n}while(v>T)}for(d=(P-b)/2,g=(T-v)/2,w=0,A=0,m=0,t=0;c>t;t++)e=a[t],C=R[t],e.setAttributes({translationX:d+w,translationY:g+A}),C.width>m&&(m=C.width),(t+1)%f===0?(w+=m+n,A=0,m=0):A+=C.height+n;return I&&I.setAttributes({x:d-n,y:g-n,width:b+2*n,height:v+2*n}),i.width=I.attr.width+2*n,i.height=I.attr.height+2*n,(i.width!==r.oldSize.width||i.height!==r.oldSize.height)&&(Ext.apply(r.oldSize,i),u=!1,r.getChart().performLayout()),Ext.apply(r.oldSize,i),o&&r.resizeBackground(s,o),s.renderFrame(),u},getSprites:function(){return this.updateSprites(),this.sprites},createSprite:function(t,e){var r,i,n,a=this,s=e.data,o=a.getChart(),l=o.get(s.series),h=l.getMarker(),c=null;return t&&(r=l.getMarkerStyleByIndex(s.index),Ext.apply(r,a.getMarker()),h&&h.type&&!r.type&&(r.type=h.type),i=a.getLabel(),n={type:"legenditem",zIndex:a.spriteZIndexes.item,text:s.name,enabled:!s.disabled,marker:r,label:i,series:s.series,record:e},c=t.add(n)),c},updateSprites:function(){var t,e,r,i,n,a,s,o,l=this,h=l.getChart(),c=l.getStore(),u=l.getSurface();if(h&&c&&u){for(l.sprites=a=l.sprites||[],e=c.getData().items,n=e.length,i=0;n>i;i++)t=e[i],r=a[i],r?l.updateSprite(r,t):(r=l.createSprite(u,t),u.add(r),a.push(r));for(s=Ext.Array.splice(a,i,a.length),i=0,n=s.length;n>i;i++)r=s[i],r.destroy();o=l.getBorder(),o&&(l.borderSprite=o),l.updateTheme(h.getTheme())}},updateSprite:function(t,e){var r,i,n,a=e.data,s=this.getChart(),o=s.get(a.series);t&&(i=t.getLabel(),i.setAttributes({text:a.name}),t.setAttributes({enabled:!a.disabled}),t.setConfig({series:a.series,record:e}),n=o.getMarkerStyleByIndex(a.index),Ext.apply(n,this.getMarker()),r=t.getMarker(),r.setAttributes({fillStyle:n.fillStyle,strokeStyle:n.strokeStyle}),t.layoutUpdater(t.attr))},updateChart:function(t,e){var r=this;e&&r.setSurface(null),t&&r.setSurface(t.getSurface("legend"))},updateSurface:function(t,e){e&&e.el.un("click","onClick",this),t&&(t.isLegendSurface=!0,t.el.on("click","onClick",this))},onClick:function(t,e){var r,i,n=this.getChart(),e=this.getSurface();n&&n.hasFirstLayout&&e&&(i=e.getEventXY(t),r=e.hitTest(i),r&&r.sprite&&this.toggleItem(r.sprite))},applyBackground:function(t,e){var r,i=this,n=i.getChart(),a=i.getSurface();return r=n.refreshBackground(a,t,e),r&&r.setAttributes({zIndex:i.spriteZIndexes.background}),r},resizeBackground:function(t,e){var r=e.attr.width,i=e.attr.height,n=t.getRect();!n||r===n[2]&&i===n[3]||e.setAttributes({width:n[2],height:n[3]})},themeableConfigs:{background:!0},updateTheme:function(t){var e,r,i,n,a,s,o,l,h,c,u,d,g=this,f=g.getSurface(),p=f.getItems(),m=t.getLegend(),x=g.getLabel(),y=g.self.getConfigurator().configs,b=g.themeableConfigs,v=g.getInitialConfig(),E=g.defaultConfig;for(u=0,d=p.length;d>u;u++)if(s=p[u],s.isLegendItem){if(o=m.label){c=null;for(h in o)h in x||(c=c||{},c[h]=o[h]);c&&(l=s.getLabel(),l.setAttributes(c))}}else if(s.isLegendBorder&&(o=m.border)){c={};for(h in o)h in s.config||(c[h]=o[h]);s.setAttributes(c)}e=m.background,r=y.background;for(h in m)if(h in b&&(e=m[h],r=y[h],null!==e&&void 0!==e&&r)){if(a=v[h],i=Ext.isObject(e),n=a===E[h],i){if(n&&themeOnlyIfConfigured[h])continue;e=Ext.merge({},e,a)}(n||i)&&g[r.names.set](e)}},updateStore:function(t,e){var r=this;e&&(e.un("datachanged",r.onDataChanged,r),e.un("update",r.onDataUpdate,r)),t&&!t.isEmptyStore&&(t.on("datachanged",r.onDataChanged,r),t.on("update",r.onDataUpdate,r),r.onDataChanged(t)),r.performLayout()},onDataChanged:function(t){this.updateSprites(),this.scheduleLayout()},onDataUpdate:function(t,e){for(var r,i,n,a=this,s=a.sprites,o=s.length,l=0;o>l;l++)if(r=s[l],i=r.getRecord(),i===e){n=r;break}n&&(a.updateSprite(n,e),a.scheduleLayout())},toggleItem:function(t){if(this.getToggleable()&&t.isLegendItem){var e,r,i,n,a=this.getStore(),s=0,o=!0;if(a){for(i=a.getCount(),r=0;i>r;r++)n=a.getAt(r),n.get("disabled")&&s++;o=i-s>1,n=t.getRecord(),n&&(e=n.get("disabled"),(e||o)&&(n.set("disabled",!e),t.setAttributes({enabled:e})))}}},destroy:function(){this.cancelLayout(),this.callParent()}}),Ext.define("Ext.chart.legend.store.Item",{extend:"Ext.data.Model",fields:["id","name","mark","disabled","series","index"]}),Ext.define("Ext.chart.legend.store.Store",{extend:"Ext.data.Store",requires:["Ext.chart.legend.store.Item"],model:"Ext.chart.legend.store.Item",isLegendStore:!0,config:{autoDestroy:!0}}),Ext.define("Ext.chart.AbstractChart",{extend:"Ext.draw.Container",requires:["Ext.chart.theme.Default","Ext.chart.series.Series","Ext.chart.interactions.Abstract","Ext.chart.axis.Axis","Ext.data.StoreManager","Ext.chart.legend.Legend","Ext.chart.legend.SpriteLegend","Ext.chart.legend.store.Store","Ext.data.Store"],isChart:!0,defaultBindProperty:"store",config:{store:"ext-empty-store",theme:"default",style:null,animation:!Ext.isIE8,series:[],axes:[],legend:null,colors:null,insetPadding:{top:10,left:10,right:10,bottom:10},background:null,interactions:[],mainRect:null,resizeHandler:null,highlightItem:null},animationSuspendCount:0,chartLayoutSuspendCount:0,axisThicknessSuspendCount:0,isThicknessChanged:!1,surfaceZIndexes:{background:0,main:1,grid:2,series:3,axis:4,chart:5,overlay:6,legend:7,title:8},constructor:function(t){var e=this;e.itemListeners={},e.surfaceMap={},e.chartComponents={},e.isInitializing=!0,e.suspendChartLayout(),e.animationSuspendCount++,e.callParent(arguments),e.isInitializing=!1,e.getSurface("main"),e.getSurface("chart").setFlipRtlText(e.getInherited().rtl),e.getSurface("overlay").waitFor(e.getSurface("series")),e.animationSuspendCount--,e.resumeChartLayout()},applyAnimation:function(t,e){return t?t===!0&&(t={easing:"easeInOut",duration:500}):t={duration:0},e?Ext.apply({},t,e):t},getAnimation:function(){return this.animationSuspendCount?{duration:0}:this.callParent()},applyInsetPadding:function(t,e){return Ext.isObject(t)?e?Ext.apply(e,t):t:Ext.util.Format.parseBox(t)},suspendAnimation:function(){var t,e=this,r=e.getSeries(),i=r.length,n=-1;if(e.animationSuspendCount++,1===e.animationSuspendCount)for(;++n<i;)t=r[n],t.setAnimation(t.getAnimation())},resumeAnimation:function(){var t,e,r=this,i=r.getSeries(),n=i.length,a=-1;if(r.animationSuspendCount--,0===r.animationSuspendCount)for(;++a<n;)t=i[a],e=t.getAnimation(),t.setAnimation(e.duration&&e||r.getAnimation())},suspendChartLayout:function(){var t=this;t.chartLayoutSuspendCount++,1===t.chartLayoutSuspendCount&&(t.scheduledLayoutId?(t.layoutInSuspension=!0,t.cancelChartLayout()):t.layoutInSuspension=!1)},resumeChartLayout:function(){var t=this;t.chartLayoutSuspendCount--,0===t.chartLayoutSuspendCount&&t.layoutInSuspension&&t.scheduleLayout()},cancelChartLayout:function(){this.scheduledLayoutId&&(Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null)},scheduleLayout:function(){var t=this;t.allowSchedule()&&!t.scheduledLayoutId&&(t.scheduledLayoutId=Ext.draw.Animator.schedule("doScheduleLayout",t))},allowSchedule:function(){return!0},doScheduleLayout:function(){var t=this;t.chartLayoutSuspendCount?t.layoutInSuspension=!0:t.performLayout(),t.scheduledLayoutId=null},suspendThicknessChanged:function(){this.axisThicknessSuspendCount++},resumeThicknessChanged:function(){this.axisThicknessSuspendCount>0&&(this.axisThicknessSuspendCount--,0===this.axisThicknessSuspendCount&&this.isThicknessChanged&&this.onThicknessChanged())},onThicknessChanged:function(){0===this.axisThicknessSuspendCount?(this.isThicknessChanged=!1,this.performLayout()):this.isThicknessChanged=!0},applySprites:function(t){var e=this.getSurface("chart");return t=Ext.Array.from(t),e.removeAll(!0),e.add(t),t},initItems:function(){var t,e,r,i=this.items;if(i&&!i.isMixedCollection)for(this.items=[],i=Ext.Array.from(i),t=0,e=i.length;e>t;t++)r=i[t],r.type?Ext.raise("To add custom sprites to the chart use the 'sprites' config."):this.items.push(r);this.callParent()},applyBackground:function(t,e){var r=this.getSurface("background");return this.refreshBackground(r,t,e)},refreshBackground:function(t,e,r){var i,n,a;return e&&(r&&(i=r.attr.width,n=r.attr.height,a=r.type===(e.type||"rect")),e.isSprite?r=e:"image"===e.type&&Ext.isString(e.src)?a?r.setAttributes({src:e.src}):(t.remove(r,!0),r=t.add(e)):a?r.setAttributes({fillStyle:e}):(t.remove(r,!0),r=t.add({type:"rect",fillStyle:e,fx:{customDurations:{x:0,y:0,width:0,height:0}}}))),i&&n&&r.setAttributes({width:i,height:n}),r.setAnimation(this.getAnimation()),r},getLegendStore:function(){return this.legendStore},refreshLegendStore:function(){var t,e=this,r=e.getLegendStore();if(r){for(var i=e.getSeries(),n=i.length,a=[],s=0;n>s;s++)t=i[s],t.getShowInLegend()&&t.provideLegendInfo(a);r.setData(a)}},onUpdateLegendStore:function(t,e){var r,i=this.getSeries();e&&i&&(r=i.map[e.get("series")],r&&(r.setHiddenByIndex(e.get("index"),e.get("disabled")),this.redraw()))},defaultResizeHandler:function(t){return this.scheduleLayout(),!1},applyMainRect:function(t,e){return e?(this.getSeries(),this.getAxes(),t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]?e:t):t},register:function(t){var e=this.chartComponents,r=t.getId();void 0===r&&Ext.raise("Chart component id is undefined. Please ensure the component has an id."),r in e&&Ext.raise('Registering duplicate chart component id "'+r+'"'),e[r]=t},unregister:function(t){var e=this.chartComponents,r=t.getId();delete e[r]},get:function(t){return this.chartComponents[t]},getAxis:function(t){return t instanceof Ext.chart.axis.Axis?t:Ext.isNumber(t)?this.getAxes()[t]:Ext.isString(t)?this.get(t):void 0},getSurface:function(t,e){t=t||"main",e=e||t;var r=this,i=this.callParent([t]),n=r.surfaceZIndexes,a=r.surfaceMap;return e in n&&i.element.setStyle("zIndex",n[e]),a[e]||(a[e]=[]),Ext.Array.indexOf(a[e],i)<0&&(i.type=e,a[e].push(i),i.on("destroy",r.forgetSurface,r)),i},forgetSurface:function(t){var e=this.surfaceMap;if(e&&!this.isDestroying){var r=e[t.type],i=r?Ext.Array.indexOf(r,t):-1;i>=0&&r.splice(i,1)}},applyAxes:function(t,e){var r,i,n,a,s,o,l,h,c,u=this,d={left:"right",right:"left"},g=[];for(u.animationSuspendCount++,u.getStore(),e||(e=[],e.map={}),h=e.map,g.map={},t=Ext.Array.from(t,!0),s=0,l=t.length;l>s;s++)r=t[s],r&&(r instanceof Ext.chart.axis.Axis?(i=h[r.getId()],r.setChart(u)):(r=Ext.Object.chain(r),n=r.linkedTo,a=r.id,Ext.isNumber(n)?r=Ext.merge({},t[n],r):Ext.isString(n)&&Ext.Array.each(t,function(t){return t.id===r.linkedTo?(r=Ext.merge({},t,r),!1):void 0}),r.id=a,r.chart=u,u.getInherited().rtl&&(r.position=d[r.position]||r.position),a=r.getId&&r.getId()||r.id,r=Ext.factory(r,null,i=h[a],"axis")),r&&(g.push(r),g.map[r.getId()]=r,i||(r.on("animationstart","onAnimationStart",u),r.on("animationend","onAnimationEnd",u))));u.axesChangeSeries={};for(s in h)if(!g.map[s]&&(i=h[s],i&&!i.destroyed)){for(o=0,l=i.boundSeries.length;l>o;o++)c=i.boundSeries[o],u.axesChangeSeries[c.getId()]=c;i.destroy()}return u.animationSuspendCount--,g},updateAxes:function(t){var e,r,i,n,a,s=this,o=s.axesChangeSeries;for(r in o)e=o[r],e.onAxesChange(s,!0);for(i=0,n=t.length;n>i;i++)a=t[i],a.onSeriesChange(s);s.isDestroying||s.scheduleLayout()},circularCopyArray:function(t,e,r){var i,n=[],a=t&&t.length;if(a)for(i=0;r>i;i++)n.push(t[(e+i)%a]);return n},circularCopyObject:function(t,e,r){var i,n,a=this,s={};if(r)for(i in t)t.hasOwnProperty(i)&&(n=t[i],s[i]=Ext.isArray(n)?a.circularCopyArray(n,e,r):n);return s},getColors:function(){var t=this,e=t.config.colors,r=t.getTheme();return Ext.isArray(e)&&e.length>0&&(e=t.applyColors(e)),e||r&&r.getColors()},applyColors:function(t){return t=Ext.Array.map(t,function(t){return Ext.isString(t)?t:t.toString()})},updateColors:function(t){var e,r,i,n,a=this,s=a.getTheme(),o=t||s&&s.getColors(),l=0,h=a.getSeries(),c=h&&h.length;if(o.length)for(e=0;c>e;e++)r=h[e],n=r.themeColorCount(),i=a.circularCopyArray(o,l,n),l+=n,r.updateChartColors(i);a.refreshLegendStore()},applyTheme:function(t){return t&&t.isTheme?t:Ext.Factory.chartTheme(t)},updateGradients:function(t){Ext.isEmpty(t)||this.updateTheme(this.getTheme())},updateTheme:function(t){var e,r,i=this,n=i.getAxes(),a=i.getSeries(),s=i.getColors();for(i.updateChartTheme(t),r=0;r<n.length;r++)n[r].updateTheme(t);for(r=0;r<a.length;r++)e=a[r],e.updateTheme(t);i.updateSpriteTheme(t),i.updateColors(s),i.redraw()},themeOnlyIfConfigured:{},updateChartTheme:function(t){var e,r,i,n,a,s,o=this,l=t.getChart(),h=o.getInitialConfig(),c=o.defaultConfig,u=o.self.getConfigurator().configs,d=l.defaults,g=l[o.xtype],f=o.themeOnlyIfConfigured;l=Ext.merge({},d,g);for(e in l)if(r=l[e],s=u[e],null!==r&&void 0!==r&&s){if(a=h[e],i=Ext.isObject(r),n=a===c[e],i){if(n&&f[e])continue;r=Ext.merge({},r,a)}(n||i)&&o[s.names.set](r)}},updateSpriteTheme:function(t){this.getSprites();var e,r,i,n,a,s,o,l=this,h=l.getSurface("chart"),c=h.getItems(),u=t.getSprites();for(s=0,o=c.length;o>s;s++)if(e=c[s],r=u[e.type]){n={},a="text"===e.type;for(i in r)i in e.config||a&&0===i.indexOf("font")&&e.config.font||(n[i]=r[i]);e.setAttributes(n)}},addSeries:function(t){var e=this.getSeries();Ext.Array.push(e,t),this.setSeries(e)},removeSeries:function(t){t=Ext.Array.from(t);var e,r,i=this.getSeries(),n=[],a=t.length,s={};for(e=0;a>e;e++)r=t[e],"string"!=typeof r&&(r=r.getId()),s[r]=!0;for(e=0,a=i.length;a>e;e++)s[i[e].getId()]||n.push(i[e]);this.setSeries(n)},applySeries:function(t,e){var r,i,n,a,s,o=this,l=[];for(o.animationSuspendCount++,o.getAxes(),e?r=e.map:(e=[],r=e.map={}),l.map={},t=Ext.Array.from(t,!0),n=0,a=t.length;a>n;n++)s=t[n],s&&(i=r[s.getId&&s.getId()||s.id],s instanceof Ext.chart.series.Series?(i&&i!==s&&i.destroy(),s.setChart(o)):Ext.isObject(s)&&(i?(i.setConfig(s),s=i):(Ext.isString(s)&&(s={type:s}),s.chart=o,s=Ext.create(s.xclass||"series."+s.type,s),s.on("animationstart","onAnimationStart",o),s.on("animationend","onAnimationEnd",o))),l.push(s),l.map[s.getId()]=s);for(n in r)l.map[r[n].id]||r[n].destroy();return o.animationSuspendCount--,l},defaultLegendType:"dom",applyLegend:function(t){var e,r,i=this;return t?(Ext.isBoolean(t)?e=Ext.create("legend."+i.defaultLegendType,{docked:"bottom",chart:i}):(t.docked=t.docked||"bottom",t.chart=i,r="legend."+(t.type||i.defaultLegendType),e=Ext.create(r,t)),e):null},updateLegend:function(t,e){var r=this;e&&e.destroy(),t&&(r.getSurface("legend"),r.getItems(),r.legendStore=new Ext.chart.legend.store.Store({chart:r,store:r.legendStore}),r.refreshLegendStore(),r.legendStore.on("update","onUpdateLegendStore",r),t.setStore(r.legendStore))},updateSeries:function(t,e){var r=this;r.isDestroying||(r.animationSuspendCount++,r.fireEvent("serieschange",r,t,e),r.refreshLegendStore(),Ext.isEmpty(t)||r.updateTheme(r.getTheme()),r.scheduleLayout(),r.animationSuspendCount--)},applyInteractions:function(t,e){e||(e=[],e.map={});var r,i,n,a=this,s=[],o=e.map;for(s.map={},t=Ext.Array.from(t,!0),r=0,i=t.length;i>r;r++)n=t[r],n&&(n=Ext.factory(n,null,o[n.getId&&n.getId()||n.id],"interaction"),n&&(n.setChart(a),s.push(n),s.map[n.getId()]=n));for(r in o)s.map[r]||o[r].destroy();return s},getInteraction:function(t){var e,r,i=this.getInteractions(),n=i&&i.length,a=null;if(n)for(r=0;n>r;++r)if(e=i[r],e.type===t){a=e;break}return a},applyStore:function(t){return t&&Ext.StoreManager.lookup(t)},updateStore:function(t,e){var r=this;e&&!e.destroyed&&(e.un({datachanged:"onDataChanged",update:"onDataChanged",scope:r,order:"after"}),e.autoDestroy&&e.destroy()),t&&t.on({datachanged:"onDataChanged",update:"onDataChanged",scope:r,order:"after"}),r.fireEvent("storechange",r,t,e),r.onDataChanged()},redraw:function(){this.fireEvent("redraw",this)},performLayout:function(){var t=this,e=t.getLegend(),r=t.getChartRect(!0),i=t.getBackground(),n=!0;return t.hasFirstLayout=!0,t.fireEvent("layout",t),t.cancelChartLayout(),t.getSurface("background").setRect(r),t.getSurface("chart").setRect(r),e&&e.isSpriteLegend&&(t.getSurface("legend").setRect(t.spriteLegendRect),n=e.performLayout()),i.setAttributes({width:r[2],height:r[3]}),n},getChartRect:function(t){var e,r,i=this;return t&&(i.chartRect=null),i.chartRect?e=i.chartRect:(r=i.innerElement.getSize(),e=i.chartRect=[0,0,r.width,r.height]),t&&i.computeSpriteLegendRect(e),e},computeSpriteLegendRect:function(t){var e=this,r=e.getLegend();if(r&&r.isSpriteLegend){var i=r.getSize(),n=i.height,a=i.width,s=r.getDocked(),o=[0,0,0,0];switch(s){case"top":t[1]=n,o[2]=t[2],o[3]=n;break;case"bottom":t[3]-=n,o[1]=t[3],o[2]=t[2],o[3]=n;break;case"left":t[0]=a,o[2]=a,o[3]=t[3];break;case"right":t[2]-=a,o[0]=t[2],o[2]=a,o[3]=t[3]}e.spriteLegendRect=o}},getEventXY:function(t){return this.getSurface().getEventXY(t)},getItemForPoint:function(t,e){var r,i,n=this,a=n.getSeries(),s=n.getMainRect(),o=a.length,l=n.hasFirstLayout?o-1:-1;if(!(s&&t>=0&&t<=s[2]&&e>=0&&e<=s[3]))return null;for(;l>=0;l--)if(r=a[l],i=r.getItemForPoint(t,e))return i;return null},getItemsForPoint:function(t,e){for(var r,i,n=this,a=n.getSeries(),s=a.length,o=n.hasFirstLayout?s-1:-1,l=[];o>=0;o--)r=a[o],i=r.getItemForPoint(t,e),i&&l.push(i);return l},onAnimationStart:function(){this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.fireEvent("animationend",this)},onDataChanged:function(){var t=this;if(!t.isInitializing){var e=t.getMainRect(),r=t.getStore(),i=t.getSeries(),n=t.getAxes();if(r&&n&&i){if(!e)return void t.on({redraw:t.onDataChanged,scope:t,single:!0});t.processData(),t.redraw()}}},recordCount:0,processData:function(){for(var t,e=this,r=e.getStore().getCount(),i=e.getSeries(),n=i.length,a=!1,s=0;n>s;s++)t=i[s],t.processData(),!a&&t.isStoreDependantColorCount&&(a=!0);a&&r>e.recordCount&&(e.updateColors(e.getColors()),e.recordCount=r)},bindStore:function(t){this.setStore(t)},applyHighlightItem:function(t,e){if(t!==e){if(Ext.isObject(t)&&Ext.isObject(e)){var r=t,i=e,n=r.sprite&&(r.sprite[0]||r.sprite),a=i.sprite&&(i.sprite[0]||i.sprite);if(n===a&&r.index===i.index)return}return t}},updateHighlightItem:function(t,e){e&&e.series.setAttributesForItem(e,{highlighted:!1}),t&&(t.series.setAttributesForItem(t,{highlighted:!0}),this.fireEvent("itemhighlight",this,t,e)),this.fireEvent("itemhighlightchange",this,t,e)},destroyChart:function(){var t,e,r=this,i=r.getLegend(),n=r.getAxes(),a=r.getSeries(),s=r.getInteractions(),o=[];for(r.surfaceMap=null,t=0,e=s.length;e>t;t++)s[t].destroy();for(t=0,e=n.length;e>t;t++)n[t].destroy();for(t=0,e=a.length;e>t;t++)a[t].destroy();r.setInteractions(o),r.setAxes(o),r.setSeries(o),i&&(i.destroy(),r.setLegend(null)),r.legendStore=null,r.setStore(null),r.cancelChartLayout()},getRefItems:function(t){var e,r,i=this,n=i.getSeries(),a=i.getAxes(),s=i.getInteractions(),o=[];for(e=0,r=n.length;r>e;e++)o.push(n[e]),n[e].getRefItems&&o.push.apply(o,n[e].getRefItems(t));for(e=0,r=a.length;r>e;e++)o.push(a[e]),a[e].getRefItems&&o.push.apply(o,a[e].getRefItems(t));for(e=0,r=s.length;r>e;e++)o.push(s[e]),s[e].getRefItems&&o.push.apply(o,s[e].getRefItems(t));return o}}),Ext.define("Ext.chart.overrides.AbstractChart",{override:"Ext.chart.AbstractChart",updateLegend:function(t,e){this.callParent([t,e]),t&&t.isDomLegend&&this.addDocked(t)},performLayout:function(){return this.isVisible(!0)?this.callParent():(this.cancelChartLayout(),!1)},afterComponentLayout:function(t,e,r,i){this.callParent([t,e,r,i]),this.scheduleLayout()},allowSchedule:function(){return this.rendered},doDestroy:function(){this.destroyChart(),this.callParent()}}),Ext.define("Ext.chart.grid.HorizontalGrid",{extend:"Ext.draw.sprite.Sprite",alias:"grid.horizontal",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(t,e,r){var i=this.attr,n=t.roundPixel(i.y),a=.5*e.lineWidth;e.beginPath(),e.rect(r[0]-t.matrix.getDX(),n+a,+r[2],i.height),e.fill(),e.beginPath(),e.moveTo(r[0]-t.matrix.getDX(),n+a),e.lineTo(r[0]+r[2]-t.matrix.getDX(),n+a),e.stroke()}}),Ext.define("Ext.chart.grid.VerticalGrid",{extend:"Ext.draw.sprite.Sprite",alias:"grid.vertical",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(t,e,r){var i=this.attr,n=t.roundPixel(i.x),a=.5*e.lineWidth;e.beginPath(),e.rect(n-a,r[1]-t.matrix.getDY(),i.width,r[3]),e.fill(),e.beginPath(),e.moveTo(n-a,r[1]-t.matrix.getDY()),e.lineTo(n-a,r[1]+r[3]-t.matrix.getDY()),e.stroke()}}),Ext.define("Ext.chart.CartesianChart",{extend:"Ext.chart.AbstractChart",alternateClassName:"Ext.chart.Chart",requires:["Ext.chart.grid.HorizontalGrid","Ext.chart.grid.VerticalGrid"],xtype:["cartesian","chart"],isCartesian:!0,config:{flipXY:!1,innerRect:[0,0,1,1],innerPadding:{top:0,left:0,right:0,bottom:0}},applyInnerPadding:function(t,e){return Ext.isObject(t)?e?Ext.apply(e,t):t:Ext.util.Format.parseBox(t)},getDirectionForAxis:function(t){var e=this.getFlipXY();return"left"===t||"right"===t?e?"X":"Y":e?"Y":"X"},performLayout:function(){var t=this;if(t.animationSuspendCount++,t.callParent()===!1)return void--t.animationSuspendCount;var e,r,i,n,a,s,o,l,h,c,u,d,g,f,p,m=t.getSurface("chart").getRect(),x=m[2],y=m[3],b=t.getAxes(),v=t.getSeries(),E=t.getInsetPadding(),S=t.getInnerPadding(),M=Ext.apply({},E),C=t.getInherited().rtl,w=t.getFlipXY();if(!(0>=x||0>=y)){for(t.suspendThicknessChanged(),M.left+=m[0],M.top+=m[1],f=0;f<b.length;f++){switch(e=b[f],i=e.getSurface(),u=e.getFloating(),d=u?u.value:null,n=e.getThickness(),e.getPosition()){case"top":i.setRect([0,M.top+1,x,n]);break;case"bottom":i.setRect([0,y-(M.bottom+n),x,n]);break;case"left":i.setRect([M.left,0,n,y]);break;case"right":i.setRect([x-(M.right+n),0,n,y])}null===d&&(M[e.getPosition()]+=n)}if(x-=M.left+M.right,y-=M.top+M.bottom,o=[M.left,M.top,x,y],M.left+=S.left,M.top+=S.top,M.right+=S.right,M.bottom+=S.bottom,l=x-S.left-S.right,h=y-S.top-S.bottom,t.setInnerRect([M.left,M.top,l,h]),!(0>=l||0>=h)){for(t.setMainRect(o),t.getSurface().setRect(o),f=0,p=t.surfaceMap.grid&&t.surfaceMap.grid.length;p>f;f++)s=t.surfaceMap.grid[f],s.setRect(o),s.matrix.set(1,0,0,1,S.left,S.top),s.matrix.inverse(s.inverseMatrix);for(f=0;f<b.length;f++){switch(e=b[f],i=e.getSurface(),g=i.matrix,c=g.elements,e.getPosition()){case"top":case"bottom":c[4]=M.left,e.setLength(l);break;case"left":case"right":c[5]=M.top,e.setLength(h)}e.updateTitleSprite(),g.inverse(i.inverseMatrix)}for(f=0,p=v.length;p>f;f++)r=v[f],a=r.getSurface(),a.setRect(o),w?C?a.matrix.set(0,-1,-1,0,S.left+l,S.top+h):a.matrix.set(0,-1,1,0,S.left,S.top+h):a.matrix.set(1,0,0,-1,S.left,S.top+h),a.matrix.inverse(a.inverseMatrix),r.getOverlaySurface().setRect(o);t.redraw(),t.animationSuspendCount--,t.resumeThicknessChanged()}}},refloatAxes:function(){var t,e,r,i,n,a,s,o,l,h=this,c=h.getAxes(),u=c&&c.length||0,d=h.getChartRect(),g=h.getInsetPadding(),f=h.getInnerPadding(),p=d[2]-g.left-g.right,m=d[3]-g.top-g.bottom;for(l=0;u>l;l++)if(t=c[l],i=t.getFloating(),n=i?i.value:null,null!==n){if(e=t.getSurface(),r=e.getRect()){switch(r=r.slice(),a=h.getAxis(i.alongAxis),a?(o="horizontal"===a.getAlignment(),Ext.isString(n)&&(n=a.getCoordFor(n)),a.floatingAxes[t.getId()]=n,s=a.getSprites()[0].attr.matrix,o?(n=n*s.getXX()+s.getDX(),t.floatingAtCoord=n+f.left+f.right):(n=n*s.getYY()+s.getDY(),t.floatingAtCoord=n+f.top+f.bottom)):(o="horizontal"===t.getAlignment(),t.floatingAtCoord=o?n+f.top+f.bottom:n+f.left+f.right,n=e.roundPixel(.01*n*(o?m:p))),t.getPosition()){case"top":r[1]=g.top+f.top+n-r[3]+1;break;case"bottom":r[1]=g.top+f.top+(a?n:m-n);break;case"left":r[0]=g.left+f.left+n-r[2];break;case"right":r[0]=g.left+f.left+(a?n:p-n)-1}e.setRect(r)}}else t.floatingAtCoord=null},redraw:function(){var t,e,r,i,n,a,s,o,l,h,c,u,d,g,f,p,m,x,y,b,v=this,E=v.getSeries(),S=v.getAxes(),M=v.getMainRect(),C=v.getInnerPadding(),w=v.getFlipXY(),A=1e3;if(M){for(t=M[2]-C.left-C.right,e=M[3]-C.top-C.bottom,o=0;o<E.length;o++)for(x=E[o],(u=x.getXAxis())?(f=u.getVisibleRange(),i=u.getRange(),i=[i[0]+(i[1]-i[0])*f[0],i[0]+(i[1]-i[0])*f[1]]):i=x.getXRange(),(d=x.getYAxis())?(f=d.getVisibleRange(),n=d.getRange(),n=[n[0]+(n[1]-n[0])*f[0],n[0]+(n[1]-n[0])*f[1]]):n=x.getYRange(),s={visibleMinX:i[0],visibleMaxX:i[1],visibleMinY:n[0],visibleMaxY:n[1],innerWidth:t,innerHeight:e,flipXY:w},r=x.getSprites(),l=0,h=r.length;h>l;l++)y=r[l],p=y.attr.zIndex,A>p&&(p+=100*(o+1)+A,y.attr.zIndex=p,b=y.getMarker("items"),b&&(m=b.attr.zIndex,m===Number.MAX_VALUE?b.attr.zIndex=p:A>m&&(b.attr.zIndex=p+m))),y.setAttributes(s,!0);for(o=0;o<S.length;o++)for(c=S[o],a=c.isSide(),r=c.getSprites(),g=c.getRange(),f=c.getVisibleRange(),s={dataMin:g[0],dataMax:g[1],visibleMin:f[0],visibleMax:f[1]},a?(s.length=e,s.startGap=C.bottom,s.endGap=C.top):(s.length=t,s.startGap=C.left,s.endGap=C.right),l=0,h=r.length;h>l;l++)r[l].setAttributes(s,!0);v.renderFrame(),v.callParent(arguments)}},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.grid.CircularGrid",{extend:"Ext.draw.sprite.Circle",alias:"grid.circular",inheritableStatics:{def:{defaults:{r:1,strokeStyle:"#DDD"}}}}),Ext.define("Ext.chart.grid.RadialGrid",{extend:"Ext.draw.sprite.Path",alias:"grid.radial",inheritableStatics:{def:{processors:{startRadius:"number",endRadius:"number"},defaults:{startRadius:0,endRadius:1,scalingCenterX:0,scalingCenterY:0,strokeStyle:"#DDD"},triggers:{startRadius:"path,bbox",endRadius:"path,bbox"}}},render:function(){this.callParent(arguments)},updatePath:function(t,e){var r=e.startRadius,i=e.endRadius;t.moveTo(r,0),t.lineTo(i,0)}}),Ext.define("Ext.chart.PolarChart",{
extend:"Ext.chart.AbstractChart",requires:["Ext.chart.grid.CircularGrid","Ext.chart.grid.RadialGrid"],xtype:"polar",isPolar:!0,config:{center:[0,0],radius:0,innerPadding:0},getDirectionForAxis:function(t){return"radial"===t?"Y":"X"},applyCenter:function(t,e){return e&&t[0]===e[0]&&t[1]===e[1]?void 0:[+t[0],+t[1]]},updateCenter:function(t){var e,r,i,n,a=this,s=a.getAxes(),o=a.getSeries();for(e=0,r=s.length;r>e;e++)i=s[e],i.setCenter(t);for(e=0,r=o.length;r>e;e++)n=o[e],n.setCenter(t)},applyInnerPadding:function(t,e){return Ext.isNumber(t)?t:e},doSetSurfaceRect:function(t,e){var r=this.getMainRect();t.setRect(e),t.matrix.set(1,0,0,1,r[0]-e[0],r[1]-e[1]),t.inverseMatrix.set(1,0,0,1,e[0]-r[0],e[1]-r[1])},applyAxes:function(t,e){var r,i,n,a,s=this,o=Ext.Array.from(s.config.series)[0];if("radar"===o.type&&t&&t.length){for(r=0,i=t.length;i>r;r++)if(n=t[r],"angular"===n.position){a=!0;break}a||t.push({type:"category",position:"angular",fields:o.xField||o.angleField,style:{estStepSize:1},grid:!0})}return this.callParent([t,e])},performLayout:function(){var t=this,e=!0;try{if(t.animationSuspendCount++,this.callParent()===!1)return void(e=!1);t.suspendThicknessChanged();var r,i,n,a,s,o,l,h,c,u,d,g,f=t.getSurface("chart").getRect(),p=t.getInsetPadding(),m=t.getInnerPadding(),x=Ext.apply({},p),y=Math.max(1,f[2]-f[0]-p.left-p.right),b=Math.max(1,f[3]-f[1]-p.top-p.bottom),v=[p.left,p.top,y+f[0],b+f[1]],E=t.getSeries(),S=y-2*m,M=b-2*m,C=[f[0]+.5*S+m,f[1]+.5*M+m],w=.5*Math.min(S,M),A=t.getAxes(),k=[],P=[],T=w-m,I=t.surfaceMap.grid;if(t.setMainRect(v),t.doSetSurfaceRect(t.getSurface(),v),I)for(r=0,i=I.length;i>r;r++)t.doSetSurfaceRect(I[r],f);for(r=0,i=A.length;i>r;r++)switch(u=A[r],u.getPosition()){case"angular":k.push(u);break;case"radial":P.push(u)}for(r=0,i=k.length;i>r;r++){u=k[r],a=u.getFloating(),s=a?a.value:null,t.doSetSurfaceRect(u.getSurface(),f),d=u.getThickness();for(h in x)x[h]+=d;y=f[2]-x.left-x.right,b=f[3]-x.top-x.bottom,n=.5*Math.min(y,b),0===r&&(T=n-m),u.setMinimum(0),u.setLength(n),u.getSprites(),g=.5*u.sprites[0].attr.lineWidth;for(h in x)x[h]+=g}for(r=0,i=P.length;i>r;r++)u=P[r],t.doSetSurfaceRect(u.getSurface(),f),u.setMinimum(0),u.setLength(T),u.getSprites();for(r=0,i=E.length;i>r;r++)c=E[r],"gauge"!==c.type||o?c.setRadius(T):o=c,t.doSetSurfaceRect(c.getSurface(),v);t.doSetSurfaceRect(t.getSurface("overlay"),f),o?(o.setRect(v),l=o.getRadius()-m,t.setRadius(l),t.setCenter(o.getCenter()),o.setRadius(l),A.length&&"gauge"===A[0].getPosition()&&(u=A[0],t.doSetSurfaceRect(u.getSurface(),f),u.setTotalAngle(o.getTotalAngle()),u.setLength(l))):(t.setRadius(w),t.setCenter(C)),t.redraw()}finally{t.animationSuspendCount--,e&&t.resumeThicknessChanged()}},refloatAxes:function(){var t,e,r,i,n,a,s,o=this,l=o.getAxes(),h=o.getMainRect();if(h)for(s=.5*Math.min(h[2],h[3]),i=0,n=l.length;n>i;i++)a=l[i],t=a.getFloating(),e=t?t.value:null,null!==e&&(r=o.getAxis(t.alongAxis),"angular"===a.getPosition()?(e=r?r.getLength()*e/r.getRange()[1]:.01*e*s,a.sprites[0].setAttributes({length:e},!0)):(r?(Ext.isString(e)&&(e=r.getCoordFor(e)),e=e/(r.getRange()[1]+1)*Math.PI*2-1.5*Math.PI+a.getRotation()):e=Ext.draw.Draw.rad(e),a.sprites[0].setAttributes({baseRotation:e},!0)))},redraw:function(){var t,e,r,i,n=this,a=n.getAxes(),s=n.getSeries();for(r=0,i=a.length;i>r;r++)t=a[r],t.getSprites();for(r=0,i=s.length;i>r;r++)e=s[r],e.getSprites();n.renderFrame(),n.callParent()},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.SpaceFillingChart",{extend:"Ext.chart.AbstractChart",xtype:"spacefilling",config:{},performLayout:function(){var t=this;try{if(t.animationSuspendCount++,t.callParent()===!1)return;var e,r,i,n=t.getSurface("chart").getRect(),a=t.getInsetPadding(),s=n[2]-a.left-a.right,o=n[3]-a.top-a.bottom,l=[a.left,a.top,s,o],h=t.getSeries();for(t.getSurface().setRect(l),t.setMainRect(l),r=0,i=h.length;i>r;r++)e=h[r],e.getSurface().setRect(l),e.setRect&&e.setRect(l),e.getOverlaySurface().setRect(n);t.redraw()}finally{t.animationSuspendCount--}},redraw:function(){var t,e,r,i=this,n=i.getSeries();for(e=0,r=n.length;r>e;e++)t=n[e],t.getSprites();i.renderFrame(),i.callParent()}}),Ext.define("Ext.chart.axis.sprite.Axis3D",{extend:"Ext.chart.axis.sprite.Axis",alias:"sprite.axis3d",type:"axis3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0},triggers:{depth:"layout"}}},config:{fx:{customDurations:{depth:0}}},layoutUpdater:function(){var t=this,e=t.getAxis().getChart();if(!e.isInitializing){var r=t.attr,i=t.getLayout(),n=i.isDiscrete?0:r.depth,a=e.getInherited().rtl,s=r.dataMin+(r.dataMax-r.dataMin)*r.visibleMin,o=r.dataMin+(r.dataMax-r.dataMin)*r.visibleMax,l={attr:r,segmenter:t.getSegmenter(),renderer:t.defaultRenderer};"left"===r.position||"right"===r.position?(r.translationX=0,r.translationY=o*(r.length-n)/(o-s)+n,r.scalingX=1,r.scalingY=(-r.length+n)/(o-s),r.scalingCenterY=0,r.scalingCenterX=0,t.applyTransformations(!0)):("top"===r.position||"bottom"===r.position)&&(r.translationX=a?r.length+s*r.length/(o-s)+1:-s*r.length/(o-s),r.translationY=0,r.scalingX=(a?-1:1)*(r.length-n)/(o-s),r.scalingY=1,r.scalingCenterY=0,r.scalingCenterX=0,t.applyTransformations(!0)),i&&(i.calculateLayout(l),t.setLayoutContext(l))}},renderAxisLine:function(t,e,r,i){var n,a,s=this,o=s.attr,l=.5*o.lineWidth,r=s.getLayout(),h=r.isDiscrete?0:o.depth,c=o.position;if(o.axisLine&&o.length)switch(c){case"left":n=t.roundPixel(i[2])-l,e.moveTo(n,-o.endGap+h),e.lineTo(n,o.length+o.startGap);break;case"right":e.moveTo(l,-o.endGap),e.lineTo(l,o.length+o.startGap);break;case"bottom":e.moveTo(-o.startGap,l),e.lineTo(o.length-h+o.endGap,l);break;case"top":n=t.roundPixel(i[3])-l,e.moveTo(-o.startGap,n),e.lineTo(o.length+o.endGap,n);break;case"angular":e.moveTo(o.centerX+o.length,o.centerY),e.arc(o.centerX,o.centerY,o.length,0,2*Math.PI,!0);break;case"gauge":a=s.getGaugeAngles(),e.moveTo(o.centerX+Math.cos(a.start)*o.length,o.centerY+Math.sin(a.start)*o.length),e.arc(o.centerX,o.centerY,o.length,a.start,a.end,!0)}}}),Ext.define("Ext.chart.axis.Axis3D",{extend:"Ext.chart.axis.Axis",xtype:"axis3d",requires:["Ext.chart.axis.sprite.Axis3D"],config:{depth:0},onSeriesChange:function(t){function e(t){var e=n.boundSeries;for(r=0;r<e.length;r++)i=e[r],i[t](a,s,n)}var r,i,n=this,a="depthchange",s="onSeriesDepthChange";e("un"),n.callParent(arguments),e("on")},onSeriesDepthChange:function(t,e){var r,i,n=this,a=e,s=n.boundSeries;if(e>n.getDepth())a=e;else for(r=0;r<s.length;r++)i=s[r],i!==t&&i.getDepth&&(e=i.getDepth(),e>a&&(a=e));n.setDepth(a)},updateDepth:function(t){var e=this,r=e.getSprites(),i={depth:t};r&&r.length&&r[0].setAttributes(i),e.gridSpriteEven&&e.gridSpriteOdd&&(e.gridSpriteEven.getTemplate().setAttributes(i),e.gridSpriteOdd.getTemplate().setAttributes(i))},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal3d";case"top":case"bottom":return"vertical3d"}}}),Ext.define("Ext.chart.axis.Category",{requires:["Ext.chart.axis.layout.CombineDuplicate","Ext.chart.axis.segmenter.Names"],extend:"Ext.chart.axis.Axis",alias:"axis.category",type:"category",config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Category3D",{requires:["Ext.chart.axis.layout.CombineDuplicate","Ext.chart.axis.segmenter.Names"],extend:"Ext.chart.axis.Axis3D",alias:"axis.category3d",type:"category3d",config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",type:"numeric",alias:["axis.numeric","axis.radial"],requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Numeric"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.axis.Numeric3D",{extend:"Ext.chart.axis.Axis3D",alias:["axis.numeric3d"],type:"numeric3d",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Numeric"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",alias:"axis.time",type:"time",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Time"],config:{calculateByLabelSize:!0,dateFormat:null,fromDate:null,toDate:null,layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(t){var e=this.getRenderer();(!e||e.isDefault)&&(e=function(e,r){return Ext.Date.format(new Date(r),t)},e.isDefault=!0,this.setRenderer(e),this.performLayout())},updateRenderer:function(t){var e=this.getDateFormat();t?this.performLayout():e&&this.updateDateFormat(e)},updateFromDate:function(t){this.setMinimum(+t)},updateToDate:function(t){this.setMaximum(+t)},getCoordFor:function(t){return Ext.isString(t)&&(t=new Date(t)),+t}}),Ext.define("Ext.chart.axis.Time3D",{extend:"Ext.chart.axis.Numeric3D",alias:"axis.time3d",type:"time3d",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Time"],config:{calculateByLabelSize:!0,dateFormat:null,fromDate:null,toDate:null,layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(t){this.setRenderer(function(e,r){return Ext.Date.format(new Date(r),t)})},updateFromDate:function(t){this.setMinimum(+t)},updateToDate:function(t){this.setMaximum(+t)},getCoordFor:function(t){return Ext.isString(t)&&(t=new Date(t)),+t}}),Ext.define("Ext.chart.grid.HorizontalGrid3D",{extend:"Ext.chart.grid.HorizontalGrid",alias:"grid.horizontal3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0}}},render:function(t,e,r){var i,n,a=this.attr,s=t.roundPixel(a.x),o=t.roundPixel(a.y),l=t.matrix.getDX(),h=.5*e.lineWidth,c=a.height,u=a.depth;o<=r[1]||(i=r[0]+u-l,n=o+h-u,e.beginPath(),e.rect(i,n,r[2],c),e.fill(),e.beginPath(),e.moveTo(i,n),e.lineTo(i+r[2],n),e.stroke(),i=r[0]+s-l,n=o+h,e.beginPath(),e.moveTo(i,n),e.lineTo(i+u,n-u),e.lineTo(i+u,n-u+c),e.lineTo(i,n+c),e.closePath(),e.fill(),e.beginPath(),e.moveTo(i,n),e.lineTo(i+u,n-u),e.stroke())}}),Ext.define("Ext.chart.grid.VerticalGrid3D",{extend:"Ext.chart.grid.VerticalGrid",alias:"grid.vertical3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0}}},render:function(t,e,r){var i,n,a=this.attr,s=t.roundPixel(a.x),o=t.matrix.getDY(),l=.5*e.lineWidth,h=a.width,c=a.depth;s>=r[2]||(i=s-l+c,n=r[1]-c-o,e.beginPath(),e.rect(i,n,h,r[3]),e.fill(),e.beginPath(),e.moveTo(i,n),e.lineTo(i,n+r[3]),e.stroke(),i=s-l,n=r[3],e.beginPath(),e.moveTo(i,n),e.lineTo(i+c,n-c),e.lineTo(i+c+h,n-c),e.lineTo(i+h,n),e.closePath(),e.fill(),i=s-l,n=r[3],e.beginPath(),e.moveTo(i,n),e.lineTo(i+c,n-c),e.stroke())}}),Ext.define("Ext.chart.interactions.CrossZoom",{extend:"Ext.chart.interactions.Abstract",type:"crosszoom",alias:"interaction.crosszoom",isCrossZoom:!0,config:{axes:!0,gestures:{dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd",dblclick:"onDoubleTap"},undoButton:{}},stopAnimationBeforeSync:!1,zoomAnimationInProgress:!1,constructor:function(){this.callParent(arguments),this.zoomHistory=[]},applyAxes:function(t){var e={};return t===!0?{top:{},right:{},bottom:{},left:{}}:(Ext.isArray(t)?(e={},Ext.each(t,function(t){e[t]={}})):Ext.isObject(t)&&Ext.iterate(t,function(t,r){r===!0?e[t]={}:r!==!1&&(e[t]=r)}),e)},applyUndoButton:function(t,e){var r=this;return e&&e.destroy(),t?Ext.create("Ext.Button",Ext.apply({cls:[],text:"Undo Zoom",disabled:!0,handler:function(){r.undoZoom()}},t)):void 0},getSurface:function(){return this.getChart()&&this.getChart().getSurface("main")},setSeriesOpacity:function(t){var e=this.getChart()&&this.getChart().getSurface("series");e&&e.element.setStyle("opacity",t)},onGestureStart:function(t){var e=this,r=e.getChart(),i=e.getSurface(),n=r.getInnerRect(),a=r.getInnerPadding(),s=a.left,o=s+n[2],l=a.top,h=l+n[3],c=r.getEventXY(t),u=c[0],d=c[1];return t.claimGesture(),e.zoomAnimationInProgress?void 0:u>s&&o>u&&d>l&&h>d?(e.gestureEvent="drag",e.lockEvents(e.gestureEvent),e.startX=u,e.startY=d,e.selectionRect=i.add({type:"rect",globalAlpha:.5,fillStyle:"rgba(80,80,140,0.5)",strokeStyle:"rgba(80,80,140,1)",lineWidth:2,x:u,y:d,width:0,height:0,zIndex:1e4}),e.setSeriesOpacity(.8),!1):void 0},onGesture:function(t){var e=this;if(!e.zoomAnimationInProgress&&e.getLocks()[e.gestureEvent]===e){var r=e.getChart(),i=e.getSurface(),n=r.getInnerRect(),a=r.getInnerPadding(),s=a.left,o=s+n[2],l=a.top,h=l+n[3],c=r.getEventXY(t),u=c[0],d=c[1];return s>u?u=s:u>o&&(u=o),l>d?d=l:d>h&&(d=h),e.selectionRect.setAttributes({width:u-e.startX,height:d-e.startY}),e.selectionRect.setAttributes(Math.abs(e.startX-u)<11||Math.abs(e.startY-d)<11?{globalAlpha:.5}:{globalAlpha:1}),i.renderFrame(),!1}},onGestureEnd:function(t){var e=this;if(!e.zoomAnimationInProgress&&e.getLocks()[e.gestureEvent]===e){var r=e.getChart(),i=e.getSurface(),n=r.getInnerRect(),a=r.getInnerPadding(),s=a.left,o=s+n[2],l=a.top,h=l+n[3],c=n[2],u=n[3],d=r.getEventXY(t),g=d[0],f=d[1];s>g?g=s:g>o&&(g=o),l>f?f=l:f>h&&(f=h),Math.abs(e.startX-g)<11||Math.abs(e.startY-f)<11?i.remove(e.selectionRect):(e.zoomBy([Math.min(e.startX,g)/c,1-Math.max(e.startY,f)/u,Math.max(e.startX,g)/c,1-Math.min(e.startY,f)/u]),e.selectionRect.setAttributes({x:Math.min(e.startX,g),y:Math.min(e.startY,f),width:Math.abs(e.startX-g),height:Math.abs(e.startY-f)}),e.selectionRect.setAnimation(r.getAnimation()||{duration:0}),e.selectionRect.setAttributes({globalAlpha:0,x:0,y:0,width:c,height:u}),e.zoomAnimationInProgress=!0,r.suspendThicknessChanged(),e.selectionRect.fx.on("animationend",function(){r.resumeThicknessChanged(),i.remove(e.selectionRect),e.selectionRect=null,e.zoomAnimationInProgress=!1})),i.renderFrame(),e.sync(),e.unlockEvents(e.gestureEvent),e.setSeriesOpacity(1),e.zoomAnimationInProgress||(i.remove(e.selectionRect),e.selectionRect=null)}},zoomBy:function(t){var e,r,i,n=this,a=n.getAxes(),s=n.getChart(),o=s.getAxes(),l=s.getInherited().rtl,h={};l&&(t=t.slice(),r=1-t[0],i=1-t[2],t[0]=Math.min(r,i),t[2]=Math.max(r,i));for(var c=0;c<o.length;c++){var u=o[c];if(e=a[u.getPosition()],e&&e.allowZoom!==!1){var d=u.isSide(),g=u.getVisibleRange();h[u.getId()]=g.slice(0),u.setVisibleRange(d?[(g[1]-g[0])*t[1]+g[0],(g[1]-g[0])*t[3]+g[0]]:[(g[1]-g[0])*t[0]+g[0],(g[1]-g[0])*t[2]+g[0]])}}n.zoomHistory.push(h),n.getUndoButton().setDisabled(!1)},undoZoom:function(){var t=this.zoomHistory.pop(),e=this.getChart().getAxes();if(t)for(var r=0;r<e.length;r++){var i=e[r];t[i.getId()]&&i.setVisibleRange(t[i.getId()])}this.getUndoButton().setDisabled(0===this.zoomHistory.length),this.sync()},onDoubleTap:function(t){this.undoZoom()},destroy:function(){this.setUndoButton(null),this.callParent()}}),Ext.define("Ext.chart.interactions.Crosshair",{extend:"Ext.chart.interactions.Abstract",requires:["Ext.chart.grid.HorizontalGrid","Ext.chart.grid.VerticalGrid","Ext.chart.CartesianChart","Ext.chart.axis.layout.Discrete"],type:"crosshair",alias:"interaction.crosshair",config:{axes:{top:{label:{},rect:{}},right:{label:{},rect:{}},bottom:{label:{},rect:{}},left:{label:{},rect:{}}},lines:{horizontal:{strokeStyle:"black",lineDash:[5,5]},vertical:{strokeStyle:"black",lineDash:[5,5]}},gesture:"drag"},applyAxes:function(t,e){return Ext.merge(e||{},t)},applyLines:function(t,e){return Ext.merge(e||{},t)},updateChart:function(t){t&&!t.isCartesian&&Ext.raise("Crosshair interaction can only be used on cartesian charts."),this.callParent(arguments)},getGestures:function(){var t=this,e={},r=t.getGesture();return e[r]="onGesture",e[r+"start"]="onGestureStart",e[r+"end"]="onGestureEnd",e[r+"cancel"]="onGestureCancel",e},onGestureStart:function(t){var e,r,i,n,a,s,o,l,h,c,u,d,g,f,p,m,x,y,b,v,E,S,M,C=this,w=C.getChart(),A=w.getTheme().getAxis(),k=w.getSurface("overlay"),P=w.getInnerRect(),T=P[2],I=P[3],R=w.getEventXY(t),D=R[0],F=R[1],Y=w.getAxes(),X=C.getAxes(),B=C.getLines();if(t.claimGesture(),D>0&&T>D&&F>0&&I>F){for(C.lockEvents(C.getGesture()),E=Ext.apply({xclass:"Ext.chart.grid.HorizontalGrid",x:0,y:F,width:T},B.horizontal),S=Ext.apply({xclass:"Ext.chart.grid.VerticalGrid",x:D,y:0,height:I},B.vertical),C.axesLabels=C.axesLabels||{},M=0;M<Y.length;M++)r=Y[M],i=r.getSurface(),n=i.getRect(),g=r.getSprites()[0],a=n[2],s=n[3],o=r.getPosition(),l=r.getAlignment(),y=r.getTitle(),b=y&&""!==y.attr.text&&y.getBBox(),f=g.attr,p=g.thickness,m=f.axisLine?f.lineWidth:0,x=m/2,d=Math.max(f.majorTickSize,f.minorTickSize)+m,h=C.axesLabels[o]=i.add({type:"composite"}),h.labelRect=h.add(Ext.apply({type:"rect",fillStyle:"white",x:"right"===o?m:0,y:"bottom"===o?m:0,width:a-m-("vertical"===l&&b?b.width:0),height:s-m-("horizontal"===l&&b?b.height:0),translationX:"left"===o&&b?b.width:0,translationY:"top"===o&&b?b.height:0},X.rect||X[o].rect)),"vertical"!==l||S.strokeStyle||(S.strokeStyle=f.strokeStyle),"horizontal"!==l||E.strokeStyle||(E.strokeStyle=f.strokeStyle),e=Ext.merge({},A.defaults,A[o]),c=Ext.apply({},r.config.label,e.label),u=X.label||X[o].label,h.labelText=h.add(Ext.apply(c,u,{type:"text",x:function(){switch(o){case"left":return v=b?b.x+b.width:0,v+(a-v-d)/2-x;case"right":return v=b?a-b.x:0,d+(a-d-v)/2+x;default:return 0}}(),y:function(){switch(o){case"top":return v=b?b.y+b.height:0,v+(s-v-d)/2-x;case"bottom":return v=b?s-b.y:0,d+(s-d-v)/2+x;default:return 0}}()}));return C.horizontalLine=k.add(E),C.verticalLine=k.add(S),!1}},onGesture:function(t){var e=this;if(e.getLocks()[e.getGesture()]===e){var r,i,n,a,s,o,l,h,c,u,d,g,f,p,m,x,y,b,v,E=e.getChart(),S=E.getSurface("overlay"),M=Ext.Array.slice(E.getInnerRect()),C=E.getInnerPadding(),w=C.left,A=C.top,k=M[2],P=M[3],T=E.getEventXY(t),I=T[0],R=T[1],D=E.getAxes();for(0>I?I=0:I>k&&(I=k),0>R?R=0:R>P&&(R=P),I+=w,R+=A,v=0;v<D.length;v++)r=D[v],i=r.getPosition(),n=r.getAlignment(),a=r.getSurface(),s=r.getSprites()[0],o=s.attr.matrix,d=2*s.attr.textPadding,c=e.axesLabels[i],l=s.getLayoutContext(),h=r.getSegmenter(),c&&("vertical"===n?(f=o.getYY(),m=o.getDY(),y=(R-m-A)/f,r.getLayout()instanceof Ext.chart.axis.layout.Discrete?(R=Math.round(y)*f+m+A,y=h.from(Math.round(y)),y=s.attr.data[y]):y=h.from(y),b=h.renderer(y,l),c.setAttributes({translationY:R-A}),c.labelText.setAttributes({text:b}),u=c.labelText.getBBox(),c.labelRect.setAttributes({height:u.height+d,y:-(u.height+d)/2}),a.renderFrame()):(g=o.getXX(),p=o.getDX(),x=(I-p-w)/g,r.getLayout()instanceof Ext.chart.axis.layout.Discrete?(I=Math.round(x)*g+p+w,x=h.from(Math.round(x)),x=s.attr.data[x]):x=h.from(x),b=h.renderer(x,l),c.setAttributes({translationX:I-w}),c.labelText.setAttributes({text:b}),u=c.labelText.getBBox(),c.labelRect.setAttributes({width:u.width+d,x:-(u.width+d)/2}),a.renderFrame()));return e.horizontalLine.setAttributes({y:R,strokeStyle:s.attr.strokeStyle}),e.verticalLine.setAttributes({x:I,strokeStyle:s.attr.strokeStyle}),S.renderFrame(),!1}},onGestureEnd:function(t){var e,r,i,n,a,s=this,o=s.getChart(),l=o.getSurface("overlay"),h=o.getAxes();for(l.remove(s.verticalLine),l.remove(s.horizontalLine),a=0;a<h.length;a++)e=h[a],r=e.getPosition(),i=e.getSurface(),n=s.axesLabels[r],n&&(delete s.axesLabels[r],i.remove(n)),i.renderFrame();l.renderFrame(),s.unlockEvents(s.getGesture())},onGestureCancel:function(t){this.onGestureEnd(t)}}),Ext.define("Ext.chart.interactions.ItemHighlight",{extend:"Ext.chart.interactions.Abstract",type:"itemhighlight",alias:"interaction.itemhighlight",isItemHighlight:!0,config:{gestures:{tap:"onTapGesture",mousemove:"onMouseMoveGesture",mousedown:"onMouseDownGesture",mouseup:"onMouseUpGesture",mouseleave:"onMouseUpGesture"},sticky:!1},stickyHighlightItem:null,onMouseMoveGesture:function(t){var e,r,i,n=this,a=n.tipItem,s="mouse"===t.pointerType;if(n.getSticky())return!0;if(s&&n.stickyHighlightItem&&(n.stickyHighlightItem=null,n.highlight(null)),n.isDragging)a&&s&&(a.series.hideTooltip(a),n.tipItem=null);else if(!n.stickyHighlightItem)return e=n.getItemForEvent(t),i=n.getChart(),e!==i.getHighlightItem()&&(n.highlight(e),n.sync()),s&&(e?(r=e.series.getTooltip(),r&&(a&&a!==e&&a.series.getTooltip()!==r&&a.series.hideTooltip(a),r.getTrackMouse()&&e.series.showTooltip(e,t),n.tipItem=e)):a&&(a.series.hideTooltip(a),n.tipItem=a=null)),!1},highlight:function(t){this.getChart().setHighlightItem(t)},showTooltip:function(t,e){e.series.showTooltip(e,t),this.tipItem=e},onMouseDownGesture:function(){this.isDragging=!0},onMouseUpGesture:function(){this.isDragging=!1},isSameItem:function(t,e){return t&&e&&t.series===e.series&&t.field===e.field&&t.index===e.index},onTapGesture:function(t){var e=this;if("mouse"!==t.pointerType||e.getSticky()){var r=e.getItemForEvent(t);e.isSameItem(e.stickyHighlightItem,r)&&(r=null),e.stickyHighlightItem=r,e.highlight(r)}}}),Ext.define("Ext.chart.interactions.ItemEdit",{extend:"Ext.chart.interactions.ItemHighlight",requires:["Ext.tip.ToolTip"],type:"itemedit",alias:"interaction.itemedit",isItemEdit:!0,config:{style:null,renderer:null,tooltip:!0,gestures:{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},cursors:{ewResize:"ew-resize",nsResize:"ns-resize",move:"move"}},item:null,applyTooltip:function(t){if(t){var e=Ext.apply({},t,{renderer:this.defaultTooltipRenderer,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,mouseOffset:[20,20]});t=new Ext.tip.ToolTip(e)}return t},defaultTooltipRenderer:function(t,e,r,i){var n=[];r.xField&&n.push(r.xField+": "+r.xValue),r.yField&&n.push(r.yField+": "+r.yValue),t.setHtml(n.join("<br>"))},onDragStart:function(t){var e=this,r=e.getChart(),i=r.getHighlightItem();return t.claimGesture(),i?(r.fireEvent("beginitemedit",r,e,e.item=i),!1):void 0},onDrag:function(t){var e=this,r=e.getChart(),i=r.getHighlightItem(),n=i&&i.sprite.type;if(i)switch(n){case"barSeries":return e.onDragBar(t);case"scatterSeries":return e.onDragScatter(t)}},highlight:function(t){var e=this,r=e.getChart(),i=r.getFlipXY(),n=e.getCursors(),a=t&&t.sprite.type,s=r.el.dom.style;if(e.callParent([t]),t)switch(a){case"barSeries":s.cursor=i?n.ewResize:n.nsResize;break;case"scatterSeries":s.cursor=n.move}else r.el.dom.style.cursor="default"},onDragBar:function(t){var e,r,i,n,a=this,s=a.getChart(),o=s.getInherited().rtl,l=s.isCartesian&&s.getFlipXY(),h=s.getHighlightItem(),c=h.sprite.getMarker("items"),u=c.getMarkerFor(h.sprite.getId(),h.index),d=h.sprite.getSurface(),g=d.getRect(),f=d.getEventXY(t),p=h.sprite.attr.matrix,m=a.getRenderer();n=l?o?g[2]-f[0]:f[0]:g[3]-f[1],e={x:u.x,y:n,width:u.width,height:u.height+(u.y-n),radius:u.radius,fillStyle:"none",lineDash:[4,4],zIndex:100},Ext.apply(e,a.getStyle()),Ext.isArray(h.series.getYField())&&(n=n-u.y-u.height),a.target={index:h.index,yField:h.field,yValue:(n-p.getDY())/p.getYY()},i=[s,{target:a.target,style:e,item:h}],r=Ext.callback(m,null,i,0,s),r&&Ext.apply(e,r),h.sprite.putMarker("items",e,"itemedit"),a.showTooltip(t,a.target,h),d.renderFrame()},onDragScatter:function(t){var e,r,i,n,a,s=this,o=s.getChart(),l=o.getInherited().rtl,h=o.isCartesian&&o.getFlipXY(),c=o.getHighlightItem(),u=c.sprite.getMarker("items"),d=u.getMarkerFor(c.sprite.getId(),c.index),g=c.sprite.getSurface(),f=g.getRect(),p=g.getEventXY(t),m=c.sprite.attr.matrix,x=c.series.getXAxis(),y=x&&x.getLayout().isContinuous,b=s.getRenderer();a=h?l?f[2]-p[0]:p[0]:f[3]-p[1],n=y?h?f[3]-p[1]:p[0]:d.translationX,e={translationX:n,translationY:a,scalingX:d.scalingX,scalingY:d.scalingY,r:d.r,fillStyle:"none",lineDash:[4,4],zIndex:100},Ext.apply(e,s.getStyle()),s.target={index:c.index,yField:c.field,yValue:(a-m.getDY())/m.getYY()},y&&Ext.apply(s.target,{xField:c.series.getXField(),xValue:(n-m.getDX())/m.getXX()}),i=[o,{target:s.target,style:e,item:c}],r=Ext.callback(b,null,i,0,o),r&&Ext.apply(e,r),c.sprite.putMarker("items",e,"itemedit"),s.showTooltip(t,s.target,c),g.renderFrame()},showTooltip:function(t,e,r){var i,n,a=this.getTooltip();a&&"modern"!==Ext.toolkit&&(i=a.config,n=this.getChart(),Ext.callback(i.renderer,null,[a,r,e,t],0,n),a.pointerEvent=t,a.isVisible()?a.realignToTarget():a.show())},hideTooltip:function(){var t=this.getTooltip();t&&"modern"!==Ext.toolkit&&t.hide()},onDragEnd:function(t){var e,r=this,i=r.target,n=r.getChart(),a=n.getStore();i&&(e=a.getAt(i.index),i.yField&&e.set(i.yField,i.yValue,{convert:!1}),i.xField&&e.set(i.xField,i.xValue,{convert:!1}),(i.yField||i.xField)&&r.getChart().onDataChanged(),r.target=null),r.hideTooltip(),r.item&&n.fireEvent("enditemedit",n,r,r.item,i),r.highlight(r.item=null)},destroy:function(){var t=this.getConfig("tooltip",!0);Ext.destroy(t),this.callParent()}}),Ext.define("Ext.chart.interactions.PanZoom",{extend:"Ext.chart.interactions.Abstract",type:"panzoom",alias:"interaction.panzoom",requires:["Ext.draw.Animator"],config:{axes:{top:{},right:{},bottom:{},left:{}},minZoom:null,maxZoom:null,showOverflowArrows:!0,panGesture:"drag",zoomGesture:"pinch",zoomOnPanGesture:null,zoomOnPan:!1,modeToggleButton:{xtype:"segmentedbutton",width:200,defaults:{ui:"default-toolbar"},cls:Ext.baseCSSPrefix+"panzoom-toggle",items:[{text:"Pan",value:"pan"},{text:"Zoom",value:"zoom"}]},hideLabelInGesture:!1},stopAnimationBeforeSync:!0,applyAxes:function(t,e){return Ext.merge(e||{},t)},updateZoomOnPan:function(t){var e=this.getModeToggleButton();e.setValue(t?"zoom":"pan")},updateZoomOnPanGesture:function(t){this.setZoomOnPan(t)},getZoomOnPanGesture:function(){return this.getZoomOnPan()},applyModeToggleButton:function(t,e){var r=this,i=Ext.factory(t,"Ext.button.Segmented",e);return!i&&e&&e.destroy(),i&&!e&&i.on("toggle","onModeToggleChange",r),i},onModeToggleChange:function(t,e,r){r&&this.setZoomOnPan("zoom"===e.getValue())},getGestures:function(){var t=this,e={},r=t.getPanGesture(),i=t.getZoomGesture();return e[i]="onZoomGestureMove",e[i+"start"]="onZoomGestureStart",e[i+"end"]="onZoomGestureEnd",e[r]="onPanGestureMove",e[r+"start"]="onPanGestureStart",e[r+"end"]="onPanGestureEnd",e.doubletap="onDoubleTap",e},onDoubleTap:function(t){var e,r,i,n=this,a=n.getChart(),s=a.getAxes();for(r=0,i=s.length;i>r;r++)e=s[r],e.setVisibleRange([0,1]);a.redraw()},onPanGestureStart:function(t){if(!t||!t.touches||t.touches.length<2){var e=this,r=e.getChart().getInnerRect(),i=e.getChart().element.getXY();return t.claimGesture(),e.startX=t.getX()-i[0]-r[0],e.startY=t.getY()-i[1]-r[1],e.oldVisibleRanges=null,e.hideLabels(),e.getChart().suspendThicknessChanged(),e.lockEvents(e.getPanGesture()),!1}},onPanGestureMove:function(t){var e=this,r="mouse"===t.pointerType,i=r&&e.getZoomOnPan();if(e.getLocks()[e.getPanGesture()]===e){var n=e.getChart().getInnerRect(),a=e.getChart().element.getXY();return i?e.transformAxesBy(e.getZoomableAxes(t),0,0,(t.getX()-a[0]-n[0])/e.startX,e.startY/(t.getY()-a[1]-n[1])):e.transformAxesBy(e.getPannableAxes(t),t.getX()-a[0]-n[0]-e.startX,t.getY()-a[1]-n[1]-e.startY,1,1),e.sync(),!1}},onPanGestureEnd:function(t){var e=this,r=e.getPanGesture();return e.getLocks()[r]===e?(e.getChart().resumeThicknessChanged(),e.showLabels(),e.sync(),e.unlockEvents(r),!1):void 0},onZoomGestureStart:function(t){if(t.touches&&2===t.touches.length){var e=this,r=e.getChart().element.getXY(),i=e.getChart().getInnerRect(),n=r[0]+i[0],a=r[1]+i[1],s=[t.touches[0].point.x-n,t.touches[0].point.y-a,t.touches[1].point.x-n,t.touches[1].point.y-a],o=Math.max(44,Math.abs(s[2]-s[0])),l=Math.max(44,Math.abs(s[3]-s[1]));return t.claimGesture(),e.getChart().suspendThicknessChanged(),e.lastZoomDistances=[o,l],e.lastPoints=s,e.oldVisibleRanges=null,e.hideLabels(),e.lockEvents(e.getZoomGesture()),!1}},onZoomGestureMove:function(t){var e=this;if(e.getLocks()[e.getZoomGesture()]===e){var r=e.getChart().getInnerRect(),i=e.getChart().element.getXY(),n=i[0]+r[0],a=i[1]+r[1],s=Math.abs,o=e.lastPoints,l=[t.touches[0].point.x-n,t.touches[0].point.y-a,t.touches[1].point.x-n,t.touches[1].point.y-a],h=Math.max(44,s(l[2]-l[0])),c=Math.max(44,s(l[3]-l[1])),u=this.lastZoomDistances||[h,c],d=h/u[0],g=c/u[1];return e.transformAxesBy(e.getZoomableAxes(t),r[2]*(d-1)/2+l[2]-o[2]*d,r[3]*(g-1)/2+l[3]-o[3]*g,d,g),e.sync(),!1}},onZoomGestureEnd:function(t){var e=this,r=e.getZoomGesture();return e.getLocks()[r]===e?(e.getChart().resumeThicknessChanged(),e.showLabels(),e.sync(),e.unlockEvents(r),!1):void 0},hideLabels:function(){this.getHideLabelInGesture()&&this.eachInteractiveAxes(function(t){t.hideLabels()})},showLabels:function(){this.getHideLabelInGesture()&&this.eachInteractiveAxes(function(t){t.showLabels()})},isEventOnAxis:function(t,e){var r=e.getSurface().getRect();return r[0]<=t.getX()&&t.getX()<=r[0]+r[2]&&r[1]<=t.getY()&&t.getY()<=r[1]+r[3]},getPannableAxes:function(t){var e,r,i=this,n=i.getAxes(),a=i.getChart().getAxes(),s=a.length,o=[],l=!1;if(t)for(e=0;s>e;e++)if(this.isEventOnAxis(t,a[e])){l=!0;break}for(e=0;s>e;e++)r=n[a[e].getPosition()],!r||r.allowPan===!1||l&&!this.isEventOnAxis(t,a[e])||o.push(a[e]);return o},getZoomableAxes:function(t){var e,r,i,n=this,a=n.getAxes(),s=n.getChart().getAxes(),o=[],l=s.length,h=!1;if(t)for(e=0;l>e;e++)if(this.isEventOnAxis(t,s[e])){h=!0;break}for(e=0;l>e;e++)r=s[e],i=a[r.getPosition()],!i||i.allowZoom===!1||h&&!this.isEventOnAxis(t,r)||o.push(r);return o},eachInteractiveAxes:function(t){for(var e=this,r=e.getAxes(),i=e.getChart().getAxes(),n=0;n<i.length;n++)if(r[i[n].getPosition()]&&!1===t.call(this,i[n]))return},transformAxesBy:function(t,e,r,i,n){var a,s=this.getChart().getInnerRect(),o=this.getAxes(),l=this.oldVisibleRanges,h=!1;if(l||(this.oldVisibleRanges=l={},this.eachInteractiveAxes(function(t){l[t.getId()]=t.getVisibleRange()})),s){for(var c=0;c<t.length;c++)a=o[t[c].getPosition()],h=this.transformAxisBy(t[c],l[t[c].getId()],e,r,i,n,this.minZoom||a.minZoom,this.maxZoom||a.maxZoom)||h;return h}},transformAxisBy:function(t,e,r,i,n,a,s,o){var l,h,c=this,u=e[1]-e[0],d=t.getVisibleRange(),g=s||c.getMinZoom()||t.config.minZoom,f=o||c.getMaxZoom()||t.config.maxZoom,p=c.getChart().getInnerRect();if(p){var m=t.isSide(),x=m?p[3]:p[2],y=m?-i:r;if(u/=m?a:n,0>u&&(u=-u),u*g>1&&(u=1),1>u*f&&(u=1/f),l=e[0],h=e[1],d=d[1]-d[0],u!==d||1!==d)return t.setVisibleRange([.5*(e[0]+e[1]-u)-y/x*u,.5*(e[0]+e[1]+u)-y/x*u]),Math.abs(l-t.getVisibleRange()[0])>1e-10||Math.abs(h-t.getVisibleRange()[1])>1e-10}},destroy:function(){this.setModeToggleButton(null),this.callParent()}}),Ext.define("Ext.chart.interactions.Rotate",{extend:"Ext.chart.interactions.Abstract",type:"rotate",alias:"interaction.rotate",config:{gesture:"rotate",gestures:{rotate:"onRotate",rotateend:"onRotate",dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd"},rotation:0},oldRotations:null,getAngle:function(t){var e=this,r=e.getChart(),i=r.getEventXY(t),n=r.getCenter();return Math.atan2(i[1]-n[1],i[0]-n[0])},getRadius:function(t){return this.getChart().getRadius()},getEventRadius:function(t){var e=this,r=e.getChart(),i=r.getEventXY(t),n=r.getCenter(),a=i[0]-n[0],s=i[1]-n[1];return Math.sqrt(a*a+s*s)},onGestureStart:function(t){var e=this,r=e.getRadius(t),i=e.getEventRadius(t);return t.claimGesture(),r>=i?(e.lockEvents("drag"),e.angle=e.getAngle(t),e.oldRotations={},!1):void 0},onGesture:function(t){var e=this,r=e.getAngle(t)-e.angle;return e.getLocks().drag===e?(e.doRotateTo(r,!0),!1):void 0},doRotateTo:function(t,e,r){var i,n,a,s,o,l,h=this,c=h.getChart(),u=c.getAxes(),d=c.getSeries(),g=h.oldRotations;for(r||c.suspendAnimation(),o=0,l=u.length;l>o;o++)a=u[o],n=g[a.getId()]||(g[a.getId()]=a.getRotation()),i=t+(e?n:0),a.setRotation(i);for(o=0,l=d.length;l>o;o++)s=d[o],n=g[s.getId()]||(g[s.getId()]=s.getRotation()),i=Ext.draw.Draw.degrees(t+(e?n:0)),s.setRotation(i);h.setRotation(i),h.fireEvent("rotate",h,h.getRotation()),h.sync(),r||c.resumeAnimation()},rotateTo:function(t,e,r){this.doRotateTo(t,e,r),this.oldRotations={}},onGestureEnd:function(t){var e=this;return e.getLocks().drag===e?(e.onGesture(t),e.unlockEvents("drag"),e.fireEvent("rotationEnd",e,e.getRotation()),!1):void 0},onRotate:function(t){}}),Ext.define("Ext.chart.interactions.RotatePie3D",{extend:"Ext.chart.interactions.Rotate",type:"rotatePie3d",alias:"interaction.rotatePie3d",getAngle:function(t){var e=this.getChart(),r=e.getInherited().rtl,i=r?-1:1,n=t.getXY(),a=e.element.getXY(),s=e.getMainRect();return i*Math.atan2(n[1]-a[1]-.5*s[3],n[0]-a[0]-.5*s[2])},getRadius:function(t){for(var e,r,i=this.getChart(),n=i.getRadius(),a=i.getSeries(),s=a.length,o=0;s>o;o++)e=a[o],
e.is3D&&(r=e.getRadius(),r>n&&(n=r));return n}}),Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",config:{xField:null,yField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],applyXAxis:function(t,e){return this.getChart().getAxis(t)||e},applyYAxis:function(t,e){return this.getChart().getAxis(t)||e},updateXAxis:function(t){t.processData(this)},updateYAxis:function(t){t.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},getItemForPoint:function(t,e){if(this.getSprites()){var r,i,n=this,a=n.getSprites()[0],s=n.getStore();if(n.getHidden())return null;if(a&&(i=a.getIndexNearPoint(t,e),-1!==i))return r={series:n,category:n.getItemInstancing()?"items":"markers",index:i,record:s.getData().items[i],field:n.getYField(),sprite:a}}},createSprite:function(){var t=this,e=t.callParent(),r=t.getChart(),i=t.getXAxis();return e.setAttributes({flipXY:r.getFlipXY(),xAxis:i}),e.setAggregator&&i&&i.getAggregator&&e.setAggregator(i.getAggregator?{strategy:i.getAggregator()}:{}),e},getSprites:function(){var t,e=this,r=this.getChart(),i=e.getAnimation()||r&&r.getAnimation(),n=e.getItemInstancing(),a=e.sprites;return r?(t=a.length?a[0]:e.createSprite(),i&&(n&&t.itemsMarker.getTemplate().setAnimation(i),t.setAnimation(i)),a):[]},provideLegendInfo:function(t){var e=this,r=e.getSubStyleWithTheme(),i=r.fillStyle;Ext.isArray(i)&&(i=i[0]),t.push({name:e.getTitle()||e.getYField()||e.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||r.strokeStyle||"black",disabled:e.getHidden(),series:e.getId(),index:0})},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]}}),Ext.define("Ext.chart.series.StackedCartesian",{extend:"Ext.chart.series.Cartesian",config:{stacked:!0,splitStacks:!0,fullStack:!1,fullStackTotal:100,hidden:[]},spriteAnimationCount:0,themeColorCount:function(){var t=this,e=t.getYField();return Ext.isArray(e)?e.length:1},updateStacked:function(){this.processData()},updateSplitStacks:function(){this.processData()},coordinateY:function(){return this.coordinateStacked("Y",1,2)},coordinateStacked:function(t,e,r){var i,n,a,s,o,l,h,c,u,d,g,f=this,p=f.getStore(),m=p.getData().items,x=m.length,y=f["get"+t+"Axis"](),b=f.getHidden(),v=f.getSplitStacks(),E=f.getFullStack(),S=f.getFullStackTotal(),M={min:0,max:0},C=f["fieldCategory"+t],w=[],A=[],k=[],P=f.getStacked(),T=f.getSprites(),I=[];if(T.length){for(n=0;n<C.length;n++){for(u=C[n],o=f.getFields([u]),l=o.length,a=0;x>a;a++)w[a]=0,A[a]=0,k[a]=0;for(a=0;l>a;a++)b[a]||(I[a]=f.coordinateData(m,o[a],y));if(P&&E)for(h=[],v&&(c=[]),a=0;x>a;a++)for(h[a]=0,v&&(c[a]=0),s=0;l>s;s++)d=I[s],d&&(d=d[a],d>=0||!v?h[a]+=d:0>d&&(c[a]+=d));for(a=0;l>a;a++)if(g={},b[a])g["dataStart"+u]=w,g["data"+u]=w,T[a].setAttributes(g);else{if(d=I[a],P){for(i=[],s=0;x>s;s++)d[s]||(d[s]=0),d[s]>=0||!v?(E&&h[s]&&(d[s]*=S/h[s]),w[s]=A[s],A[s]+=d[s],i[s]=A[s]):(E&&c[s]&&(d[s]*=S/c[s]),w[s]=k[s],k[s]+=d[s],i[s]=k[s]);g["dataStart"+u]=w,g["data"+u]=i,f.getRangeOfData(w,M),f.getRangeOfData(i,M)}else g["dataStart"+u]=w,g["data"+u]=d,f.getRangeOfData(d,M);T[a].setAttributes(g)}}for(f.dataRange[e]=M.min,f.dataRange[e+r]=M.max,g={},g["dataMin"+t]=M.min,g["dataMax"+t]=M.max,n=0;n<T.length;n++)T[n].setAttributes(g)}},getFields:function(t){var e,r,i,n=this,a=[];for(r=0,i=t.length;i>r;r++)e=n["get"+t[r]+"Field"](),Ext.isArray(e)?a.push.apply(a,e):a.push(e);return a},updateLabelOverflowPadding:function(t){this.getLabel().setAttributes({labelOverflowPadding:t})},getSprites:function(){var t,e,r=this,i=r.getChart(),n=r.getAnimation()||i&&i.getAnimation(),a=r.getFields(r.fieldCategoryY),s=r.getItemInstancing(),o=r.sprites,l=r.getHidden(),h=!1,c=a.length;if(!i)return[];for(e=0;c>e;e++)t=o[e],t||(t=r.createSprite(),t.setAttributes({zIndex:-e}),t.setField(a[e]),h=!0,l.push(!1),s?t.itemsMarker.getTemplate().setAttributes(r.getStyleByIndex(e)):t.setAttributes(r.getStyleByIndex(e))),n&&(s&&t.itemsMarker.getTemplate().setAnimation(n),t.setAnimation(n));return h&&r.updateHidden(l),o},getItemForPoint:function(t,e){if(this.getSprites()){var r,i,n,a,s,o,l=this,h=l.getItemInstancing(),c=l.getSprites(),u=l.getStore(),d=l.getHidden();for(r=0,i=c.length;i>r;r++)if(!d[r]&&(n=c[r],s=n.getIndexNearPoint(t,e),-1!==s))return o=l.getYField(),a={series:l,index:s,category:h?"items":"markers",record:u.getData().items[s],field:"string"==typeof o?o:o[r],sprite:n};return null}},provideLegendInfo:function(t){var e,r,i,n,a=this,s=a.getSprites(),o=a.getTitle(),l=a.getYField(),h=a.getHidden(),c=1===s.length;for(i=0;i<s.length;i++)e=a.getStyleByIndex(i),r=e.fillStyle,o&&(Ext.isArray(o)?n=o[i]:c&&(n=o)),o&&n||(n=Ext.isArray(l)?l[i]:a.getId()),t.push({name:n,mark:(Ext.isObject(r)?r.stops&&r.stops[0].color:r)||e.strokeStyle||"black",disabled:h[i],series:a.getId(),index:i})},onSpriteAnimationStart:function(t){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart")},onSpriteAnimationEnd:function(t){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend")}}),Ext.define("Ext.chart.series.sprite.Series",{extend:"Ext.draw.sprite.Sprite",mixins:{markerHolder:"Ext.chart.MarkerHolder"},inheritableStatics:{def:{processors:{dataMinX:"number",dataMaxX:"number",dataMinY:"number",dataMaxY:"number",rangeX:"data",rangeY:"data",dataX:"data",dataY:"data"},defaults:{dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,rangeX:null,rangeY:null,dataX:null,dataY:null},triggers:{dataX:"bbox",dataY:"bbox",dataMinX:"bbox",dataMaxX:"bbox",dataMinY:"bbox",dataMaxY:"bbox"}}},config:{store:null,series:null,field:null}}),Ext.define("Ext.chart.series.sprite.Cartesian",{extend:"Ext.chart.series.sprite.Series",inheritableStatics:{def:{processors:{labels:"default",labelOverflowPadding:"number",selectionTolerance:"number",flipXY:"bool",renderer:"default",visibleMinX:"number",visibleMinY:"number",visibleMaxX:"number",visibleMaxY:"number",innerWidth:"number",innerHeight:"number"},defaults:{labels:null,labelOverflowPadding:10,selectionTolerance:20,flipXY:!1,renderer:null,transformFillStroke:!1,visibleMinX:0,visibleMinY:0,visibleMaxX:1,visibleMaxY:1,innerWidth:1,innerHeight:1},triggers:{dataX:"dataX,bbox",dataY:"dataY,bbox",visibleMinX:"panzoom",visibleMinY:"panzoom",visibleMaxX:"panzoom",visibleMaxY:"panzoom",innerWidth:"panzoom",innerHeight:"panzoom"},updaters:{dataX:function(t){this.processDataX(),this.scheduleUpdater(t,"dataY",["dataY"])},dataY:function(){this.processDataY()},panzoom:function(t){var e=t.visibleMaxX-t.visibleMinX,r=t.visibleMaxY-t.visibleMinY,i=t.flipXY?t.innerHeight:t.innerWidth,n=t.flipXY?t.innerWidth:t.innerHeight,a=this.getSurface(),s=a?a.getInherited().rtl:!1;t.translationX=s&&!t.flipXY?i+t.visibleMinX*i/e:-t.visibleMinX*i/e,t.translationY=-t.visibleMinY*n/r,t.scalingX=(s&&!t.flipXY?-1:1)*i/e,t.scalingY=n/r,t.scalingCenterX=0,t.scalingCenterY=0,this.applyTransformations(!0)}}}},processDataY:Ext.emptyFn,processDataX:Ext.emptyFn,updatePlainBBox:function(t){var e=this.attr;t.x=e.dataMinX,t.y=e.dataMinY,t.width=e.dataMaxX-e.dataMinX,t.height=e.dataMaxY-e.dataMinY},binarySearch:function(t){var e=this.attr.dataX,r=0,i=e.length;if(t<=e[0])return r;if(t>=e[i-1])return i-1;for(;i>r+1;){var n=r+i>>1,a=e[n];if(a===t)return n;t>a?r=n:i=n}return r},render:function(t,e,r){var i=this,n=i.attr,a=n.inverseMatrix.clone();if(a.appendMatrix(t.inverseMatrix),null!==n.dataX&&void 0!==n.dataX&&null!==n.dataY&&void 0!==n.dataY){if(a.getXX()*a.getYX()||a.getXY()*a.getYY())return void console.log("Cartesian Series sprite does not support rotation/sheering");var s=a.transformList([[r[0]-1,r[3]+1],[r[0]+r[2]+1,-1]]);s=s[0].concat(s[1]),i.renderClipped(t,e,s,r)}},renderClipped:Ext.emptyFn,getIndexNearPoint:function(t,e){var r,i,n,a,s,o,l=this,h=l.attr.matrix,c=l.attr.dataX,u=l.attr.dataY,d=l.attr.selectionTolerance,g=-1,f=h.clone().prependMatrix(l.surfaceMatrix).inverse(),p=f.transformPoint([t,e]),m=f.transformPoint([t-d,e-d]),x=f.transformPoint([t+d,e+d]),y=Math.min(m[0],x[0]),b=Math.max(m[0],x[0]),v=Math.min(m[1],x[1]),E=Math.max(m[1],x[1]);for(s=0,o=c.length;o>s;s++)n=c[s],a=u[s],n>y&&b>n&&a>v&&E>a&&(-1===g||Math.abs(n-p[0])<r&&Math.abs(a-p[1])<i)&&(r=Math.abs(n-p[0]),i=Math.abs(a-p[1]),g=s);return g}}),Ext.define("Ext.chart.series.sprite.StackedCartesian",{extend:"Ext.chart.series.sprite.Cartesian",inheritableStatics:{def:{processors:{groupCount:"number",groupOffset:"number",dataStartY:"data"},defaults:{selectionTolerance:20,groupCount:1,groupOffset:0,dataStartY:null},triggers:{dataStartY:"dataY,bbox"}}},getIndexNearPoint:function(t,e){for(var r,i,n=this,a=n.attr.matrix,s=n.attr.dataX,o=n.attr.dataY,l=n.attr.dataStartY,h=n.attr.selectionTolerance,c=.5,u=1/0,d=-1,g=a.clone().prependMatrix(this.surfaceMatrix).inverse(),f=g.transformPoint([t,e]),p=g.transformPoint([t-h,e-h]),m=g.transformPoint([t+h,e+h]),x=Math.min(p[1],m[1]),y=Math.max(p[1],m[1]),b=0;b<s.length;b++)Math.min(l[b],o[b])<=y&&x<=Math.max(l[b],o[b])&&(r=Math.abs(s[b]-f[0]),i=Math.max(-Math.min(o[b]-f[1],f[1]-l[b]),0),c>r&&u>=i&&(c=r,u=i,d=b));return d}}),Ext.define("Ext.chart.series.sprite.Area",{alias:"sprite.areaSeries",extend:"Ext.chart.series.sprite.StackedCartesian",inheritableStatics:{def:{processors:{step:"bool"},defaults:{step:!1}}},renderClipped:function(t,e,r){var i,n,a,s,o,l,h,c,u=this,d=u.getStore(),g=u.getSeries(),f=u.attr,p=f.dataX,m=f.dataY,x=f.dataStartY,y=f.matrix,b=y.elements[0],v=y.elements[4],E=y.elements[3],S=y.elements[5],M=u.surfaceMatrix,C={},w=Math.min(r[0],r[2]),A=Math.max(r[0],r[2]),k=Math.max(0,this.binarySearch(w)),P=Math.min(p.length-1,this.binarySearch(A)+1),T=f.renderer,I={store:d};if(e.beginPath(),l=p[k]*b+v,h=m[k]*E+S,e.moveTo(l,h),f.step)for(o=h,a=k;P>=a;a++)i=p[a]*b+v,n=m[a]*E+S,e.lineTo(i,o),e.lineTo(i,o=n);else for(a=k;P>=a;a++)i=p[a]*b+v,n=m[a]*E+S,e.lineTo(i,n);if(x)if(f.step)for(s=p[P]*b+v,a=P;a>=k;a--)i=p[a]*b+v,n=x[a]*E+S,e.lineTo(s,n),e.lineTo(s=i,n);else for(a=P;a>=k;a--)i=p[a]*b+v,n=x[a]*E+S,e.lineTo(i,n);else e.lineTo(p[P]*b+v,n),e.lineTo(p[P]*b+v,S),e.lineTo(l,S),e.lineTo(l,m[a]*E+S);if(f.transformFillStroke&&f.matrix.toContext(e),e.fill(),f.transformFillStroke&&f.inverseMatrix.toContext(e),e.beginPath(),e.moveTo(l,h),f.step)for(a=k;P>=a;a++)i=p[a]*b+v,n=m[a]*E+S,e.lineTo(i,o),e.lineTo(i,o=n),C.translationX=M.x(i,n),C.translationY=M.y(i,n),T&&(c=Ext.callback(T,null,[u,C,I,a],0,g),Ext.apply(C,c)),u.putMarker("markers",C,a,!T);else for(a=k;P>=a;a++)i=p[a]*b+v,n=m[a]*E+S,e.lineTo(i,n),C.translationX=M.x(i,n),C.translationY=M.y(i,n),T&&(c=Ext.callback(T,null,[u,C,I,a],0,g),Ext.apply(C,c)),u.putMarker("markers",C,a,!T);f.transformFillStroke&&f.matrix.toContext(e),e.stroke()}}),Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.StackedCartesian",alias:"series.area",type:"area",seriesType:"areaSeries",requires:["Ext.chart.series.sprite.Area"],config:{splitStacks:!1}}),Ext.define("Ext.chart.series.sprite.Bar",{alias:"sprite.barSeries",extend:"Ext.chart.series.sprite.StackedCartesian",inheritableStatics:{def:{processors:{minBarWidth:"number",maxBarWidth:"number",minGapWidth:"number",radius:"number",inGroupGapWidth:"number"},defaults:{minBarWidth:2,maxBarWidth:100,minGapWidth:5,inGroupGapWidth:3,radius:0}}},drawLabel:function(t,e,r,i,n){var a,s,o,l,h,c,u,d=this,g=d.attr,f=d.getMarker("labels"),p=f.getTemplate(),m=d.labelCfg||(d.labelCfg={}),x=d.surfaceMatrix,y=g.labelOverflowPadding,b=p.attr.display,v=p.attr.orientation,E="horizontal"===v&&g.flipXY||"vertical"===v&&!g.flipXY||!v,S=p.getCalloutLine();switch(m.x=x.x(e,i),m.y=x.y(e,i),l=S?S.length:0,m.rotationRads=g.flipXY?0:.5*-Math.PI,m.calloutVertical=!g.flipXY,v){case"horizontal":m.rotationRads=0,m.calloutVertical=!1;break;case"vertical":m.rotationRads=.5*-Math.PI,m.calloutVertical=!0}m.text=t,p.attr.renderer&&(u=[t,f,m,{store:d.getStore()},n],h=Ext.callback(p.attr.renderer,null,u,0,d.getSeries()),"string"==typeof h?m.text=h:"object"==typeof h&&("text"in h&&(m.text=h.text),c=!0)),o=d.getMarkerBBox("labels",n,!0),o||(d.putMarker("labels",m,n),o=d.getMarkerBBox("labels",n,!0)),s=l>0?l:0===l?(E?o.width:o.height)/2:(E?o.width:o.height)/2+y,r>i&&(s=-s),a=E?"insideStart"===b?r+s:i-s:"insideStart"===b?r+2*y:i-2*y,m.x=x.x(e,a),m.y=x.y(e,a),a="insideStart"===b?r:i,m.calloutStartX=x.x(e,a),m.calloutStartY=x.y(e,a),a="insideStart"===b?r-s:i+s,m.calloutPlaceX=x.x(e,a),m.calloutPlaceY=x.y(e,a),m.calloutColor=S&&S.color||d.attr.fillStyle,S?S.width&&(m.calloutWidth=S.width):m.calloutColor="none",r>i&&(s=-s),m.callout=Math.abs(i-r)<=2*s||"outside"===b?1:0,c&&Ext.apply(m,h),d.putMarker("labels",m,n)},drawBar:function(t,e,r,i,n,a,s,o){var l,h=this,c={},u=h.attr.renderer;c.x=i,c.y=n,c.width=a-i,c.height=s-n,c.radius=h.attr.radius,u&&(l=Ext.callback(u,null,[h,c,{store:h.getStore()},o],0,h.getSeries()),Ext.apply(c,l)),h.putMarker("items",c,o,!u)},renderClipped:function(t,e,r){if(!this.cleanRedraw){var i,n,a,s,o,l,h,c,u=this,d=u.attr,g=d.dataX,f=d.dataY,p=d.labels,m=d.dataStartY,x=d.groupCount,y=d.groupOffset-.5*(x-1),b=d.inGroupGapWidth,v=e.lineWidth,E=d.matrix,S=E.elements[0],M=E.elements[3],C=E.elements[4],w=t.roundPixel(E.elements[5])-1,A=(0>S?-1:1)*S-d.minGapWidth,k=(Math.min(A,d.maxBarWidth)-b*(x-1))/x,P=t.roundPixel(Math.max(d.minBarWidth,k)),T=u.surfaceMatrix,I=.5*d.lineWidth,R=Math.min(r[0],r[2]),D=Math.max(r[0],r[2]),F=Math.max(0,Math.floor(R)),Y=Math.min(g.length-1,Math.ceil(D)),X=p&&u.getMarker("labels");for(o=F;Y>=o;o++)h=m?m[o]:0,c=f[o],l=g[o]*S+C+y*(P+b),i=t.roundPixel(l-P/2)+I,s=t.roundPixel(c*M+w+v),n=t.roundPixel(l+P/2)-I,a=t.roundPixel(h*M+w+v),u.drawBar(e,t,r,i,s-I,n,a-I,o),X&&null!=p[o]&&u.drawLabel(p[o],l,a,s,o),u.putMarker("markers",{translationX:T.x(l,s),translationY:T.y(l,s)},o,!0)}},getIndexNearPoint:function(t,e){var r,i,n,a,s=this,o=s.attr,l=o.dataX,h=s.getSurface(),c=h.getRect()||[0,0,0,0],u=c[3],d=-1;for(o.flipXY?(r=u-e,i=h.getInherited().rtl?c[2]-t:t):(r=t,i=u-e),n=0;n<l.length;n++)if(a=s.getMarkerBBox("items",n),Ext.draw.Draw.isPointInBBox(r,i,a)){d=n;break}return d}}),Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.StackedCartesian",alias:"series.bar",type:"bar",seriesType:"barSeries",isBar:!0,requires:["Ext.chart.series.sprite.Bar","Ext.draw.sprite.Rect"],config:{itemInstancing:{type:"rect",fx:{customDurations:{x:0,y:0,width:0,height:0,radius:0}}}},getItemForPoint:function(t,e){if(this.getSprites()){var r=this,i=r.getChart(),n=i.getInnerPadding(),a=i.getInherited().rtl;return arguments[0]=t+(a?n.right:-n.left),arguments[1]=e+n.bottom,r.callParent(arguments)}},updateXAxis:function(t){this.is3D||"category"===t.type||Ext.raise("'bar' series should be used with a 'category' axis. Please refer to the bar series docs."),t.setLabelInSpan(!0),this.callParent(arguments)},updateHidden:function(t){this.callParent(arguments),this.updateStacked()},updateStacked:function(t){var e,r=this,i=r.getSprites(),n=i.length,a=[],s={};for(e=0;n>e;e++)i[e].attr.hidden||a.push(i[e]);if(n=a.length,r.getStacked())for(s.groupCount=1,s.groupOffset=0,e=0;n>e;e++)a[e].setAttributes(s);else for(s.groupCount=a.length,e=0;n>e;e++)s.groupOffset=e,a[e].setAttributes(s);r.callParent(arguments)}}),Ext.define("Ext.chart.series.sprite.Bar3D",{extend:"Ext.chart.series.sprite.Bar",alias:"sprite.bar3dSeries",requires:["Ext.draw.gradient.Linear"],inheritableStatics:{def:{processors:{depthWidthRatio:"number",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},defaults:{depthWidthRatio:1/3,saturationFactor:1,brightnessFactor:1,colorSpread:1,transformFillStroke:!0},triggers:{groupCount:"panzoom"},updaters:{panzoom:function(t){var e=this,r=t.visibleMaxX-t.visibleMinX,i=t.visibleMaxY-t.visibleMinY,n=t.flipXY?t.innerHeight:t.innerWidth,a=t.flipXY?t.innerWidth:t.innerHeight,s=e.getSurface(),o=s?s.getInherited().rtl:!1;t.translationX=o&&!t.flipXY?n+t.visibleMinX*n/r:-t.visibleMinX*n/r,t.translationY=-t.visibleMinY*(a-e.depth)/i,t.scalingX=(o&&!t.flipXY?-1:1)*n/r,t.scalingY=(a-e.depth)/i,t.scalingCenterX=0,t.scalingCenterY=0,e.applyTransformations(!0)}}}},config:{showStroke:!1},depth:0,drawBar:function(t,e,r,i,n,a,s,o){var l,h,c,u,d=this,g=d.attr,f={},p=g.renderer;f.x=.5*(i+a),f.y=n,f.width=.75*(a-i),f.height=s-n,f.depth=h=f.width*g.depthWidthRatio,f.orientation=g.flipXY?"horizontal":"vertical",f.saturationFactor=g.saturationFactor,f.brightnessFactor=g.brightnessFactor,f.colorSpread=g.colorSpread,h!==d.depth&&(d.depth=h,c=d.getSeries(),c.fireEvent("depthchange",c,h)),p&&(u=[d,f,{store:d.getStore()},o],l=Ext.callback(p,null,u,0,d.getSeries()),Ext.apply(f,l)),d.putMarker("items",f,o,!p)}}),Ext.define("Ext.chart.series.sprite.Box",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.box",type:"box",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",depth:"number",orientation:"enums(vertical,horizontal)",showStroke:"bool",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},triggers:{x:"bbox",y:"bbox",width:"bbox",height:"bbox",depth:"bbox",orientation:"bbox"},defaults:{x:0,y:0,width:8,height:8,depth:8,orientation:"vertical",showStroke:!1,saturationFactor:1,brightnessFactor:1,colorSpread:1,lineJoin:"bevel"}}},constructor:function(t){this.callParent([t]),this.topGradient=new Ext.draw.gradient.Linear({}),this.rightGradient=new Ext.draw.gradient.Linear({}),this.frontGradient=new Ext.draw.gradient.Linear({})},updatePlainBBox:function(t){var e=this.attr,r=e.x,i=e.y,n=e.width,a=e.height,s=e.depth;t.x=r-.5*n,t.width=n+s,a>0?(t.y=i,t.height=a+s):(t.y=i+s,t.height=a-s)},render:function(t,e){var r,i,n,a=this,s=a.attr,o=s.x,l=s.y,h=l+s.height,c=h>l,u=.5*s.width,d=s.depth,g="horizontal"===s.orientation,f=s.globalAlpha<1,p=s.fillStyle,m=Ext.util.Color.create(p.isGradient?p.getStops()[0].color:p),x=s.saturationFactor,y=s.brightnessFactor,b=s.colorSpread,v=m.getHSV(),E={};s.showStroke||(e.strokeStyle=Ext.util.Color.RGBA_NONE),c&&(n=l,l=h,h=n),a.topGradient.setDegrees(g?0:80),a.topGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(v[0],Ext.Number.constrain(v[1]*x,0,1),Ext.Number.constrain((.5+.1*b)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(v[0],Ext.Number.constrain(v[1]*x,0,1),Ext.Number.constrain((.5-.11*b)*y,0,1))}]),a.rightGradient.setDegrees(g?45:90),a.rightGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(v[0],Ext.Number.constrain(v[1]*x,0,1),Ext.Number.constrain((.5-.14*b)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(v[0],Ext.Number.constrain(v[1]*(1+.4*b)*x,0,1),Ext.Number.constrain((.5-.32*b)*y,0,1))}]),g?a.frontGradient.setDegrees(0):a.frontGradient.setRadians(Math.atan2(l-h,2*u)),a.frontGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(v[0],Ext.Number.constrain(v[1]*(1-.1*b)*x,0,1),Ext.Number.constrain((.5+.1*b)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(v[0],Ext.Number.constrain(v[1]*(1+.1*b)*x,0,1),Ext.Number.constrain((.5-.23*b)*y,0,1))}]),(f||c)&&(e.beginPath(),e.moveTo(o-u,h),e.lineTo(o-u+d,h+d),e.lineTo(o+u+d,h+d),e.lineTo(o+u,h),e.closePath(),E.x=o-u,E.y=l,E.width=u+d,E.height=d,e.fillStyle=(g?a.rightGradient:a.topGradient).generateGradient(e,E),e.fillStroke(s)),f&&(e.beginPath(),e.moveTo(o-u,l),e.lineTo(o-u+d,l+d),e.lineTo(o-u+d,h+d),e.lineTo(o-u,h),e.closePath(),E.x=o+u,E.y=h,E.width=d,E.height=l+d-h,e.fillStyle=(g?a.topGradient:a.rightGradient).generateGradient(e,E),e.fillStroke(s)),i=t.roundPixel(l),e.beginPath(),e.moveTo(o-u,i),e.lineTo(o-u+d,l+d),e.lineTo(o+u+d,l+d),e.lineTo(o+u,i),e.closePath(),E.x=o-u,E.y=l,E.width=u+d,E.height=d,e.fillStyle=(g?a.rightGradient:a.topGradient).generateGradient(e,E),e.fillStroke(s),r=t.roundPixel(o+u),e.beginPath(),e.moveTo(r,t.roundPixel(l)),e.lineTo(o+u+d,l+d),e.lineTo(o+u+d,h+d),e.lineTo(r,h),e.closePath(),E.x=o+u,E.y=h,E.width=d,E.height=l+d-h,e.fillStyle=(g?a.topGradient:a.rightGradient).generateGradient(e,E),e.fillStroke(s),r=t.roundPixel(o+u),i=t.roundPixel(l),e.beginPath(),e.moveTo(o-u,h),e.lineTo(o-u,i),e.lineTo(r,i),e.lineTo(r,h),e.closePath(),E.x=o-u,E.y=h,E.width=2*u,E.height=l-h,e.fillStyle=a.frontGradient.generateGradient(e,E),e.fillStroke(s)}}),Ext.define("Ext.chart.series.Bar3D",{extend:"Ext.chart.series.Bar",requires:["Ext.chart.series.sprite.Bar3D","Ext.chart.series.sprite.Box"],alias:"series.bar3d",type:"bar3d",seriesType:"bar3dSeries",is3D:!0,config:{itemInstancing:{type:"box",fx:{customDurations:{x:0,y:0,width:0,height:0,depth:0}}},highlightCfg:{opacity:.8}},updateXAxis:function(t,e){"category3d"!==t.type&&Ext.raise("'bar3d' series should be used with a 'category3d' axis. Please refer to the 'bar3d' series docs."),this.callParent([t,e])},getSprites:function(){var t,e,r,i=this.callParent(arguments);for(r=0;r<i.length;r++)t=i[r],e=t.attr.zIndex,0>e&&t.setAttributes({zIndex:-e}),t.setSeries&&t.setSeries(this);return i},getDepth:function(){var t=this.getSprites()[0];return t?t.depth||0:0},getItemForPoint:function(t,e){if(this.getSprites()){var r,i,n,a,s,o=this,l=o.getItemInstancing(),h=o.getSprites(),c=o.getStore(),u=o.getHidden(),d=o.getChart(),g=d.getInnerPadding(),f=d.getInherited().rtl;for(t+=f?g.right:-g.left,e+=g.bottom,r=h.length-1;r>=0;r--)if(!u[r]&&(i=h[r],a=i.getIndexNearPoint(t,e),-1!==a))return s=o.getYField(),n={series:o,index:a,category:l?"items":"markers",record:c.getData().items[a],field:"string"==typeof s?s:s[r],sprite:i};return null}}}),Ext.define("Ext.draw.LimitedCache",{config:{limit:40,feeder:function(){return 0},scope:null},cache:null,constructor:function(t){this.cache={},this.cache.list=[],this.cache.tail=0,this.initConfig(t)},get:function(t){var e=this.cache,r=this.getLimit(),i=this.getFeeder(),n=this.getScope()||this;return e[t]?e[t].value:(e.list[e.tail]&&delete e[e.list[e.tail].cacheId],e[t]=e.list[e.tail]={value:i.apply(n,Array.prototype.slice.call(arguments,1)),cacheId:t},e.tail++,e.tail===r&&(e.tail=0),e[t].value)},clear:function(){this.cache={},this.cache.list=[],this.cache.tail=0}}),Ext.define("Ext.draw.SegmentTree",{config:{strategy:"double"},time:function(t,e,r,i,n,a,s){var o,l,h,c,u,d,g=0,f=new Date(r[t.startIdx[0]]),p=new Date(r[t.endIdx[e-1]]),m=Ext.Date,x=[[m.MILLI,1,"ms1",null],[m.MILLI,2,"ms2","ms1"],[m.MILLI,5,"ms5","ms1"],[m.MILLI,10,"ms10","ms5"],[m.MILLI,50,"ms50","ms10"],[m.MILLI,100,"ms100","ms50"],[m.MILLI,500,"ms500","ms100"],[m.SECOND,1,"s1","ms500"],[m.SECOND,10,"s10","s1"],[m.SECOND,30,"s30","s10"],[m.MINUTE,1,"mi1","s10"],[m.MINUTE,5,"mi5","mi1"],[m.MINUTE,10,"mi10","mi5"],[m.MINUTE,30,"mi30","mi10"],[m.HOUR,1,"h1","mi30"],[m.HOUR,6,"h6","h1"],[m.HOUR,12,"h12","h6"],[m.DAY,1,"d1","h12"],[m.DAY,7,"d7","d1"],[m.MONTH,1,"mo1","d1"],[m.MONTH,3,"mo3","mo1"],[m.MONTH,6,"mo6","mo3"],[m.YEAR,1,"y1","mo3"],[m.YEAR,5,"y5","y1"],[m.YEAR,10,"y10","y5"],[m.YEAR,100,"y100","y10"]],y=g,b=e,v=!1,E=t.startIdx,S=t.endIdx,M=t.minIdx,C=t.maxIdx,w=t.open,A=t.close,k=t.minX,P=t.minY,T=t.maxX,I=t.maxY;for(h=0;e>g+1&&h<x.length;h++)if(f=new Date(r[E[0]]),c=x[h],f=m.align(f,c[0],c[1]),!(m.diff(f,p,c[0])>2*r.length*c[1])){for(c[3]&&t.map["time_"+c[3]]?(o=t.map["time_"+c[3]][0],l=t.map["time_"+c[3]][1]):(o=y,l=b),g=e,d=f,v=!0,E[e]=E[o],S[e]=S[o],M[e]=M[o],C[e]=C[o],w[e]=w[o],A[e]=A[o],k[e]=k[o],P[e]=P[o],T[e]=T[o],I[e]=I[o],d=Ext.Date.add(d,c[0],c[1]),u=o+1;l>u;u++)r[S[u]]<+d?(S[e]=S[u],A[e]=A[u],I[u]>I[e]&&(I[e]=I[u],T[e]=T[u],C[e]=C[u]),P[u]<P[e]&&(P[e]=P[u],k[e]=k[u],M[e]=M[u])):(e++,E[e]=E[u],S[e]=S[u],M[e]=M[u],C[e]=C[u],w[e]=w[u],A[e]=A[u],k[e]=k[u],P[e]=P[u],T[e]=T[u],I[e]=I[u],d=Ext.Date.add(d,c[0],c[1]));e>g&&(t.map["time_"+c[2]]=[g,e])}},"double":function(t,e,r,i,n,a,s){for(var o,l,h,c,u,d,g,f,p,m,x,y,b=0,v=1;e>b+1;){for(o=b,b=e,v+=v,l=o;b>l;l+=2)l===b-1?(h=t.startIdx[l],c=t.endIdx[l],u=t.minIdx[l],d=t.maxIdx[l],g=t.open[l],f=t.close[l],p=t.minX[l],m=t.minY[l],x=t.maxX[l],y=t.maxY[l]):(h=t.startIdx[l],c=t.endIdx[l+1],g=t.open[l],f=t.close[l],t.minY[l]<=t.minY[l+1]?(u=t.minIdx[l],p=t.minX[l],m=t.minY[l]):(u=t.minIdx[l+1],p=t.minX[l+1],m=t.minY[l+1]),t.maxY[l]>=t.maxY[l+1]?(d=t.maxIdx[l],x=t.maxX[l],y=t.maxY[l]):(d=t.maxIdx[l+1],x=t.maxX[l+1],y=t.maxY[l+1])),t.startIdx[e]=h,t.endIdx[e]=c,t.minIdx[e]=u,t.maxIdx[e]=d,t.open[e]=g,t.close[e]=f,t.minX[e]=p,t.minY[e]=m,t.maxX[e]=x,t.maxY[e]=y,e++;t.map["double_"+v]=[b,e]}},none:Ext.emptyFn,aggregateData:function(t,e,r,i,n){var a,s=t.length,o=[],l=[],h=[],c=[],u=[],d=[],g=[],f=[],p=[],m=[],x={startIdx:o,endIdx:l,minIdx:h,maxIdx:c,open:u,minX:d,minY:g,maxX:f,maxY:p,close:m};for(a=0;s>a;a++)o[a]=a,l[a]=a,h[a]=a,c[a]=a,u[a]=e[a],d[a]=t[a],g[a]=i[a],f[a]=t[a],p[a]=r[a],m[a]=n[a];return x.map={original:[0,s]},s&&this[this.getStrategy()](x,s,t,e,r,i,n),x},binarySearchMin:function(t,e,r,i){var n=this.dataX;if(i<=n[t.startIdx[0]])return e;if(i>=n[t.startIdx[r-1]])return r-1;for(;r>e+1;){var a=e+r>>1,s=n[t.startIdx[a]];if(s===i)return a;i>s?e=a:r=a}return e},binarySearchMax:function(t,e,r,i){var n=this.dataX;if(i<=n[t.endIdx[0]])return e;if(i>=n[t.endIdx[r-1]])return r-1;for(;r>e+1;){var a=e+r>>1,s=n[t.endIdx[a]];if(s===i)return a;i>s?e=a:r=a}return r},constructor:function(t){this.initConfig(t)},setData:function(t,e,r,i,n){r||(n=i=r=e),this.dataX=t,this.dataOpen=e,this.dataHigh=r,this.dataLow=i,this.dataClose=n,t.length===r.length&&t.length===i.length&&(this.cache=this.aggregateData(t,e,r,i,n))},getAggregation:function(t,e,r){if(!this.cache)return null;var i,n,a,s,o,l,h=1/0,c=this.dataX[this.dataX.length-1]-this.dataX[0],u=this.cache.map,d=u.original;for(i in u)n=u[i],a=n[1]-n[0]-1,s=c/a,s>=r&&h>s&&(d=n,h=s);return o=Math.max(this.binarySearchMin(this.cache,d[0],d[1],t),d[0]),l=Math.min(this.binarySearchMax(this.cache,d[0],d[1],e)+1,d[1]),{data:this.cache,start:o,end:l}}}),Ext.define("Ext.chart.series.sprite.Aggregative",{extend:"Ext.chart.series.sprite.Cartesian",requires:["Ext.draw.LimitedCache","Ext.draw.SegmentTree"],inheritableStatics:{def:{processors:{dataHigh:"data",dataLow:"data",dataClose:"data"},aliases:{dataOpen:"dataY"},defaults:{dataHigh:null,dataLow:null,dataClose:null}}},config:{aggregator:{}},applyAggregator:function(t,e){return Ext.factory(t,Ext.draw.SegmentTree,e)},constructor:function(){this.callParent(arguments)},processDataY:function(){var t,e=this,r=e.attr,i=r.dataHigh,n=r.dataLow,a=r.dataClose,s=r.dataY;e.callParent(arguments),r.dataX&&s&&s.length>0&&(t=e.getAggregator(),i?t.setData(r.dataX,r.dataY,i,n,a):t.setData(r.dataX,r.dataY))},getGapWidth:function(){return 1},renderClipped:function(t,e,r,i){var n=this,a=Math.min(r[0],r[2]),s=Math.max(r[0],r[2]),o=n.getAggregator(),l=o&&o.getAggregation(a,s,(s-a)/i[2]*n.getGapWidth());l&&(n.dataStart=l.data.startIdx[l.start],n.dataEnd=l.data.endIdx[l.end-1],n.renderAggregates(l.data,l.start,l.end,t,e,r,i))}}),Ext.define("Ext.chart.series.sprite.CandleStick",{alias:"sprite.candlestickSeries",extend:"Ext.chart.series.sprite.Aggregative",inheritableStatics:{def:{processors:{raiseStyle:function(t,e){return Ext.merge({},e||{},t)},dropStyle:function(t,e){return Ext.merge({},e||{},t)},barWidth:"number",padding:"number",ohlcType:"enums(candlestick,ohlc)"},defaults:{raiseStyle:{strokeStyle:"green",fillStyle:"green"},dropStyle:{strokeStyle:"red",fillStyle:"red"},planar:!1,barWidth:15,padding:3,lineJoin:"miter",miterLimit:5,ohlcType:"candlestick"},triggers:{raiseStyle:"raiseStyle",dropStyle:"dropStyle"},updaters:{raiseStyle:function(){this.raiseTemplate&&this.raiseTemplate.setAttributes(this.attr.raiseStyle)},dropStyle:function(){this.dropTemplate&&this.dropTemplate.setAttributes(this.attr.dropStyle)}}}},candlestick:function(t,e,r,i,n,a,s){var o=Math.min(e,n),l=Math.max(e,n);t.moveTo(a,i),t.lineTo(a,l),t.moveTo(a+s,l),t.lineTo(a+s,o),t.lineTo(a-s,o),t.lineTo(a-s,l),t.closePath(),t.moveTo(a,r),t.lineTo(a,o)},ohlc:function(t,e,r,i,n,a,s){t.moveTo(a,r),t.lineTo(a,i),t.moveTo(a,e),t.lineTo(a-s,e),t.moveTo(a,n),t.lineTo(a+s,n)},constructor:function(){this.callParent(arguments),this.raiseTemplate=new Ext.draw.sprite.Rect({parent:this}),this.dropTemplate=new Ext.draw.sprite.Rect({parent:this})},getGapWidth:function(){var t=this.attr,e=t.barWidth,r=t.padding;return e+r},renderAggregates:function(t,e,r,i,n,a){var s,o,l,h,c,u,d,g=this,f=this.attr,p=f.dataX,m=f.matrix,x=m.getXX(),y=m.getYY(),b=m.getDX(),v=m.getDY(),E=f.barWidth/x,S=f.ohlcType,M=Math.round(.5*E*x),C=t.open,w=t.close,A=t.maxY,k=t.minY,P=t.startIdx,T=f.lineWidth*i.devicePixelRatio/2;for(T-=Math.floor(T),n.save(),s=this.raiseTemplate,s.useAttributes(n,a),n.beginPath(),d=e;r>d;d++)C[d]<=w[d]&&(o=Math.round(C[d]*y+v)+T,l=Math.round(A[d]*y+v)+T,h=Math.round(k[d]*y+v)+T,c=Math.round(w[d]*y+v)+T,u=Math.round(p[P[d]]*x+b)+T,g[S](n,o,l,h,c,u,M));for(n.fillStroke(s.attr),n.restore(),n.save(),s=this.dropTemplate,s.useAttributes(n,a),n.beginPath(),d=e;r>d;d++)C[d]>w[d]&&(o=Math.round(C[d]*y+v)+T,l=Math.round(A[d]*y+v)+T,h=Math.round(k[d]*y+v)+T,c=Math.round(w[d]*y+v)+T,u=Math.round(p[P[d]]*x+b)+T,g[S](n,o,l,h,c,u,M));n.fillStroke(s.attr),n.restore()}}),Ext.define("Ext.chart.series.CandleStick",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.series.sprite.CandleStick"],alias:"series.candlestick",type:"candlestick",seriesType:"candlestickSeries",config:{openField:null,highField:null,lowField:null,closeField:null},fieldCategoryY:["Open","High","Low","Close"],themeColorCount:function(){return 2}}),Ext.define("Ext.chart.series.Polar",{extend:"Ext.chart.series.Series",config:{rotation:0,radius:null,center:[0,0],offsetX:0,offsetY:0,showInLegend:!0,xField:null,yField:null,angleField:null,radiusField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],deprecatedConfigs:{field:"angleField",lengthField:"radiusField"},constructor:function(t){var e,r=this,i=r.self.getConfigurator(),n=i.configs;if(t)for(e in r.deprecatedConfigs)e in t&&!(t in n)&&Ext.raise("'"+e+"' config has been deprecated. Please use the '"+r.deprecatedConfigs[e]+"' config instead.");r.callParent([t])},getXField:function(){return this.getAngleField()},updateXField:function(t){this.setAngleField(t)},getYField:function(){return this.getRadiusField()},updateYField:function(t){this.setRadiusField(t)},applyXAxis:function(t,e){return this.getChart().getAxis(t)||e},applyYAxis:function(t,e){return this.getChart().getAxis(t)||e},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]},themeColorCount:function(){var t=this,e=t.getStore(),r=e&&e.getCount()||0;return r},isStoreDependantColorCount:!0,getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer(),centerX:0,centerY:0,rotationCenterX:0,rotationCenterY:0}},applyRotation:function(t){return Ext.draw.sprite.AttributeParser.angle(Ext.draw.Draw.rad(t))},updateRotation:function(t){var e=this.getSprites();e&&e[0]&&e[0].setAttributes({baseRotation:t})}}),Ext.define("Ext.chart.series.Gauge",{alias:"series.gauge",extend:"Ext.chart.series.Polar",type:"gauge",seriesType:"pieslice",requires:["Ext.draw.sprite.Sector"],config:{needle:!1,needleLength:90,needleWidth:4,donut:30,showInLegend:!1,value:null,colors:null,sectors:null,minimum:0,maximum:100,rotation:0,totalAngle:Math.PI/2,rect:[0,0,1,1],center:[.5,.75],radius:.5,wholeDisk:!1},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateNeedle:function(t){var e=this,r=e.getSprites(),i=e.valueToAngle(e.getValue());r&&r.length&&(r[0].setAttributes({startAngle:t?i:0,endAngle:i,strokeOpacity:t?1:0,lineWidth:t?e.getNeedleWidth():0}),e.doUpdateStyles())},themeColorCount:function(){var t=this,e=t.getStore(),r=e&&e.getCount()||0;return r+(t.getNeedle()?0:1)},updateColors:function(t,e){var r,i=this,n=i.getSectors(),a=n&&n.length,s=i.getSprites(),o=Ext.Array.clone(t),l=t&&t.length;if(l&&t[0]){for(r=0;a>r;r++)o[r+1]=n[r].color||o[r+1]||t[r%l];s.length&&s[0].setAttributes({strokeStyle:o[0]}),this.setSubStyle({fillStyle:o,strokeStyle:o}),this.doUpdateStyles()}},updateRect:function(t){var e,r,i,n=this.getWholeDisk(),a=n?Math.PI:this.getTotalAngle()/2,s=this.getDonut()/100;a<=Math.PI/2?(e=2*Math.sin(a),r=1-s*Math.cos(a)):(e=2,
r=1-Math.cos(a)),i=Math.min(t[2]/e,t[3]/r),this.setRadius(i),this.setCenter([t[2]/2,i+(t[3]-r*i)/2])},updateCenter:function(t){this.setStyle({centerX:t[0],centerY:t[1],rotationCenterX:t[0],rotationCenterY:t[1]}),this.doUpdateStyles()},updateRotation:function(t){this.setStyle({rotationRads:t-(this.getTotalAngle()+Math.PI)/2}),this.doUpdateStyles()},doUpdateShape:function(t,e){var r,i=this.getSectors(),n=i&&i.length||0,a=this.getNeedleLength()/100;for(r=[t*a,t];n--;)r.push(t);this.setSubStyle({endRho:r,startRho:t/100*e}),this.doUpdateStyles()},updateRadius:function(t){var e=this.getDonut();this.doUpdateShape(t,e)},updateDonut:function(t){var e=this.getRadius();this.doUpdateShape(e,t)},valueToAngle:function(t){return t=this.applyValue(t),this.getTotalAngle()*(t-this.getMinimum())/(this.getMaximum()-this.getMinimum())},applyValue:function(t){return Math.min(this.getMaximum(),Math.max(t,this.getMinimum()))},updateValue:function(t){var e=this,r=e.getNeedle(),i=e.valueToAngle(t),n=e.getSprites();n[0].getRendererData().value=t,n[0].setAttributes({startAngle:r?i:0,endAngle:i}),e.doUpdateStyles()},processData:function(){var t,e,r,i,n,a,s,o=this,l=o.getStore(),h=l&&l.first();h&&(a=o.getXField(),a&&(s=h.get(a))),(t=o.getXAxis())&&(e=t.getMinimum(),r=t.getMaximum(),i=t.getSprites()[0].fx,n=i.getDuration(),i.setDuration(0),Ext.isNumber(e)?o.setMinimum(e):t.setMinimum(o.getMinimum()),Ext.isNumber(r)?o.setMaximum(r):t.setMaximum(o.getMaximum()),i.setDuration(n)),Ext.isNumber(s)||(s=o.getMinimum()),o.setValue(s)},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer(),fx:{customDurations:{translationX:0,translationY:0,rotationCenterX:0,rotationCenterY:0,centerX:0,centerY:0,startRho:0,endRho:0,baseRotation:0}}}},normalizeSectors:function(t){var e,r,i,n,a=this,s=t&&t.length||0;if(s)for(e=0;s>e;e++)r=t[e],"number"==typeof r?(t[e]={start:e>0?t[e-1].end:a.getMinimum(),end:Math.min(r,a.getMaximum())},e==s-1&&t[e].end<a.getMaximum()&&(t[e+1]={start:t[e].end,end:a.getMaximum()})):(i="number"==typeof r.start?Math.max(r.start,a.getMinimum()):e>0?t[e-1].end:a.getMinimum(),n="number"==typeof r.end?Math.min(r.end,a.getMaximum()):a.getMaximum(),t[e].start=i,t[e].end=n);else t=[{start:a.getMinimum(),end:a.getMaximum()}];return t},getSprites:function(){var t,e,r=this,i=r.getStore(),n=r.getValue();if(!i&&!Ext.isNumber(n))return[];var a,s,o,l,h=r.getChart(),c=r.getAnimation()||h&&h.getAnimation(),u=r.sprites,d=0,g=[];if(u&&u.length)return u[0].setAnimation(c),u;for(l={store:i,field:r.getXField(),angleField:r.getXField(),value:n,series:r},a=r.createSprite(),a.setAttributes({zIndex:10},!0),a.setRendererData(l),a.setRendererIndex(d++),g.push(r.getNeedleWidth()),r.getLabel().getTemplate().setField(!0),s=r.normalizeSectors(r.getSectors()),t=0,e=s.length;e>t;t++)o={startAngle:r.valueToAngle(s[t].start),endAngle:r.valueToAngle(s[t].end),label:s[t].label,fillStyle:s[t].color,strokeOpacity:0,doCallout:!1,labelOverflowPadding:-1},Ext.apply(o,s[t].style),a=r.createSprite(),a.setRendererData(l),a.setRendererIndex(d++),a.setAttributes(o,!0),g.push(o.lineWidth);return r.setSubStyle({lineWidth:g}),r.doUpdateStyles(),u}}),Ext.define("Ext.chart.series.sprite.Line",{alias:"sprite.lineSeries",extend:"Ext.chart.series.sprite.Aggregative",inheritableStatics:{def:{processors:{smooth:"bool",fillArea:"bool",step:"bool",nullStyle:"enums(gap,connect,origin)",preciseStroke:"bool",xAxis:"default",yCap:"default"},defaults:{smooth:!1,nullStyle:"connect",fillArea:!1,step:!1,preciseStroke:!0,xAxis:null,yCap:Math.pow(2,20),yJump:50},triggers:{dataX:"dataX,bbox,smooth",dataY:"dataY,bbox,smooth",smooth:"smooth"},updaters:{smooth:function(t){var e=t.dataX,r=t.dataY;t.smooth&&e&&r&&e.length>2&&r.length>2?(this.smoothX=Ext.draw.Draw.spline(e),this.smoothY=Ext.draw.Draw.spline(r)):(delete this.smoothX,delete this.smoothY)}}}},list:null,updatePlainBBox:function(t){var e=this.attr,r=Math.min(0,e.dataMinY),i=Math.max(0,e.dataMaxY);t.x=e.dataMinX,t.y=r,t.width=e.dataMaxX-e.dataMinX,t.height=i-r},drawStrip:function(t,e){t.moveTo(e[0],e[1]);for(var r=2,i=e.length;i>r;r+=2)t.lineTo(e[r],e[r+1])},drawStraightStroke:function(t,e,r,i,n,a){var s,o,l,h,c,u,d,g,f,p,m,x,y,b,v,E,S,M,C,w,A=this,k=A.attr,P=k.nullStyle,T="connect"===P,I="origin"===P,R=k.renderer,D=k.step,F=!0,Y=n.length,X={type:"line",smooth:!1,step:D},B=[];for(e.beginPath(),w=3;Y>w;w+=3)E=n[w-3],S=n[w-2],b=n[w],v=n[w+1],M=n[w+3],C=n[w+4],h=Ext.isNumber(E),c=Ext.isNumber(b),u=Ext.isNumber(M),d=h&&Ext.isNumber(S),g=c&&Ext.isNumber(v),f=u&&Ext.isNumber(C),I&&(!d&&h&&(S=a,d=!0),!g&&c&&(v=a,g=!0),!f&&u&&(C=a,f=!0)),R&&(X.x=b,X.y=v,X.x0=E,X.y0=S,o=[A,X,A.rendererData,r+w/3],s=Ext.callback(R,null,o,0,A.getSeries())),p&&T&&d&&m&&(x=m[0],y=m[1],F&&(e.beginPath(),e.moveTo(x,y),B.push(x,y),l=x,F=!1),D&&(e.lineTo(E,y),B.push(E,y)),e.lineTo(E,S),B.push(E,S),m=[E,S],p=!1),T&&m&&g&&!d&&(E=m[0],S=m[1],d=!0),g&&(m=[b,v]),d&&g?(F&&(e.beginPath(),e.moveTo(E,S),B.push(E,S),l=E,F=!1),D&&(e.lineTo(b,S),B.push(b,S)),e.lineTo(b,v),B.push(b,v),(s||!f)&&(e.save(),Ext.apply(e,s),s=null,k.fillArea&&(e.lineTo(b,a),e.lineTo(l,a),e.closePath(),e.fill()),e.beginPath(),A.drawStrip(e,B),B=[],e.stroke(),e.restore(),e.beginPath(),F=!0)):p=!0},calculateScale:function(t,e){for(var r=0,i=t;e>i&&t>0;)r++,i+=t>>r;return Math.pow(2,r>0?r-1:r)},drawSmoothStroke:function(t,e,r,i,n,a){var s,o,l,h,c,u,d,g,f,p,m,x,y=this,b=y.attr,v=b.step,E=b.matrix,S=b.renderer,M=E.getXX(),C=E.getYY(),w=E.getDX(),A=E.getDY(),k=y.smoothX,P=y.smoothY,T=y.calculateScale(b.dataX.length,i),I={type:"line",smooth:!0,step:v};for(e.beginPath(),e.moveTo(k[3*r]*M+w,P[3*r]*C+A),f=0,p=3*r+1;f<n.length-3;f+=3,p+=3*T)s=k[p]*M+w,o=P[p]*C+A,l=k[p+1]*M+w,h=P[p+1]*C+A,c=t.roundPixel(n[f+3]),u=n[f+4],d=t.roundPixel(n[f]),g=n[f+1],S&&(I.x0=d,I.y0=g,I.cx1=s,I.cy1=o,I.cx2=l,I.cy2=h,I.x=c,I.y=u,x=[y,I,y.rendererData,r+f/3+1],m=Ext.callback(S,null,x,0,y.getSeries()),e.save(),Ext.apply(e,m)),b.fillArea&&(e.moveTo(d,g),e.bezierCurveTo(s,o,l,h,c,u),e.lineTo(c,a),e.lineTo(d,a),e.lineTo(d,g),e.closePath(),e.fill(),e.beginPath()),e.moveTo(d,g),e.bezierCurveTo(s,o,l,h,c,u),e.stroke(),e.moveTo(d,g),e.closePath(),S&&e.restore(),e.beginPath(),e.moveTo(c,u);e.beginPath()},drawLabel:function(t,e,r,i,n){var a,s,o,l,h,c,u,d=this,g=d.attr,f=d.getMarker("labels"),p=f.getTemplate(),m=d.labelCfg||(d.labelCfg={}),x=d.surfaceMatrix,y=g.labelOverflowPadding;switch(m.x=x.x(e,r),m.y=x.y(e,r),m.rotationRads=g.flipXY?.5*Math.PI:0,m.text=t,p.attr.renderer&&(c=[t,f,m,d.rendererData,i],h=Ext.callback(p.attr.renderer,null,c,0,d.getSeries()),"string"==typeof h?m.text=h:"object"==typeof h&&("text"in h&&(m.text=h.text),u=!0)),l=d.getMarkerBBox("labels",i,!0),l||(d.putMarker("labels",m,i),l=d.getMarkerBBox("labels",i,!0)),o=l.height/2,a=e,p.attr.display){case"under":s=r-o-y;break;case"rotate":a+=y,s=r-y,m.rotationRads=-Math.PI/4;break;default:s=r+o+y}m.x=x.x(a,s),m.y=x.y(a,s),u&&Ext.apply(m,h),d.putMarker("labels",m,i)},drawMarker:function(t,e,r){var i,n,a=this,s=a.attr,o=s.renderer,l=a.surfaceMatrix,h={};o&&a.getMarker("markers")&&(h.type="marker",h.x=t,h.y=e,n=[a,h,a.rendererData,r],i=Ext.callback(o,null,n,0,a.getSeries()),i&&Ext.apply(h,i)),h.translationX=l.x(t,e),h.translationY=l.y(t,e),delete h.x,delete h.y,a.putMarker("markers",h,r,!o)},drawStroke:function(t,e,r,i,n,a){var s=this,o=s.attr.smooth&&s.smoothX&&s.smoothY;o?s.drawSmoothStroke(t,e,r,i,n,a):s.drawStraightStroke(t,e,r,i,n,a)},renderAggregates:function(t,e,r,i,n,a,s){var o,l,h,c,u,d,g,f,p,m,x=this,y=x.attr,b=y.dataX,v=y.dataY,E=y.labels,S=y.xAxis,M=y.yCap,C=y.smooth&&x.smoothX&&x.smoothY,w=E&&x.getMarker("labels"),A=x.getMarker("markers"),k=y.matrix,P=i.devicePixelRatio,T=k.getXX(),I=k.getYY(),R=k.getDX(),D=k.getDY(),F=x.list||(x.list=[]),Y=t.minX,X=t.maxX,B=t.minY,L=t.maxY,O=t.startIdx,z=!0;for(x.rendererData={store:x.getStore()},F.length=0,p=e;r>p;p++){var G=Y[p],_=X[p],N=B[p],H=L[p];o=Ext.isNumber(G),h=Ext.isNumber(N),l=Ext.isNumber(_),c=Ext.isNumber(H),_>G?(F.push(o?G*T+R:null,h?N*I+D:null,O[p]),F.push(l?_*T+R:null,c?H*I+D:null,O[p])):G>_?(F.push(l?_*T+R:null,c?H*I+D:null,O[p]),F.push(o?G*T+R:null,h?N*I+D:null,O[p])):F.push(l?_*T+R:null,c?H*I+D:null,O[p])}if(F.length){for(p=0;p<F.length;p+=3)g=F[p],f=F[p+1],Ext.isNumber(g)&&Ext.isNumber(f)?(f>M?f=M:-M>f&&(f=-M),F[p+1]=f,m=F[p+2],A&&x.drawMarker(g,f,m),w&&E[m]&&x.drawLabel(E[m],g,f,m,s)):z=!1;if(x.isContinuousLine=z,C&&!z&&Ext.raise("Line smoothing in only supported for gapless data, where all data points are finite numbers."),S?(d="vertical"===S.getAlignment(),u=Ext.isNumber(S.floatingAtCoord)?(d?s[2]:s[3])-S.floatingAtCoord:d?s[0]:s[1]):u=y.flipXY?s[0]:s[1],y.preciseStroke)y.fillArea&&n.fill(),y.transformFillStroke&&y.inverseMatrix.toContext(n),x.drawStroke(i,n,e,r,F,u),y.transformFillStroke&&y.matrix.toContext(n),n.stroke();else{if(x.drawStroke(i,n,e,r,F,u),z&&C&&y.fillArea&&!y.renderer){var U=b[b.length-1]*T+R+P,W=v[v.length-1]*I+D,q=b[0]*T+R-P,j=v[0]*I+D;n.lineTo(U,W),n.lineTo(U,u-y.lineWidth),n.lineTo(q,u-y.lineWidth),n.lineTo(q,j)}y.transformFillStroke&&y.matrix.toContext(n),y.fillArea?n.fillStroke(y,!0):n.stroke(!0)}}}}),Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alias:"series.line",type:"line",seriesType:"lineSeries",requires:["Ext.chart.series.sprite.Line"],config:{selectionTolerance:20,smooth:!1,step:!1,nullStyle:"gap",fill:void 0,aggregator:{strategy:"double"}},defaultSmoothness:3,overflowBuffer:1,themeMarkerCount:function(){return 1},getDefaultSpriteConfig:function(){var t,e=this,r=e.callParent(arguments),i=Ext.apply({},e.getStyle()),n=!1;return"undefined"!=typeof e.config.fill?e.config.fill&&(n=!0,"undefined"==typeof i.fillStyle&&("undefined"==typeof i.strokeStyle?(t=e.getStyleWithTheme(),i.fillStyle=t.fillStyle,i.strokeStyle=t.strokeStyle):i.fillStyle=i.strokeStyle)):i.fillStyle&&(n=!0),n||delete i.fillStyle,i=Ext.apply(r||{},i),Ext.apply(i,{fillArea:n,step:e.config.step,smooth:e.config.smooth,selectionTolerance:e.config.selectionTolerance})},updateStep:function(t){var e=this.getSprites()[0];e&&e.attr.step!==t&&e.setAttributes({step:t})},updateFill:function(t){var e=this.getSprites()[0];e&&e.attr.fillArea!==t&&e.setAttributes({fillArea:t})},updateSmooth:function(t){var e=this.getSprites()[0];e&&e.attr.smooth!==t&&e.setAttributes({smooth:t})},updateNullStyle:function(t){var e=this.getSprites()[0];e&&e.attr.nullStyle!==t&&e.setAttributes({nullStyle:t})}}),Ext.define("Ext.chart.series.sprite.PieSlice",{extend:"Ext.draw.sprite.Sector",mixins:{markerHolder:"Ext.chart.MarkerHolder"},alias:"sprite.pieslice",inheritableStatics:{def:{processors:{doCallout:"bool",label:"string",rotateLabels:"bool",labelOverflowPadding:"number",renderer:"default"},defaults:{doCallout:!0,rotateLabels:!0,label:"",labelOverflowPadding:10,renderer:null}}},config:{rendererData:null,rendererIndex:0,series:null},setGradientBBox:function(t,e){var r=this,i=r.attr,n=i.fillStyle&&i.fillStyle.isGradient||i.strokeStyle&&i.strokeStyle.isGradient;if(n&&!i.constrainGradients){var a=r.getMidAngle(),s=i.margin,o=i.centerX,l=i.centerY,h=i.endRho,c=i.matrix,u=c.getScaleX(),d=c.getScaleY(),g=u*h,f=d*h,p={width:g+g,height:f+f};s&&(o+=s*Math.cos(a),l+=s*Math.sin(a)),p.x=c.x(o,l)-g,p.y=c.y(o,l)-f,t.setGradientBBox(p)}else r.callParent([t,e])},render:function(t,e,r){var i,n=this,a=n.attr,s={};a.renderer&&(s={type:"sector",text:a.text,centerX:a.centerX,centerY:a.centerY,margin:a.margin,startAngle:Math.min(a.startAngle,a.endAngle),endAngle:Math.max(a.startAngle,a.endAngle),startRho:Math.min(a.startRho,a.endRho),endRho:Math.max(a.startRho,a.endRho)},i=Ext.callback(a.renderer,null,[n,s,n.getRendererData(),n.getRendererIndex()],0,n.getSeries()),n.setAttributes(i),n.useAttributes(e,r)),n.callParent([t,e,r]),a.label&&n.getMarker("labels")&&n.placeLabel()},placeLabel:function(){var t,e,r,i,n,a,s=this,o=s.attr,l=o.attributeId,h=Math.min(o.startAngle,o.endAngle),c=Math.max(o.startAngle,o.endAngle),u=.5*(h+c),d=o.margin,g=o.centerX,f=o.centerY,p=Math.sin(u),m=Math.cos(u),x=Math.min(o.startRho,o.endRho)+d,y=Math.max(o.startRho,o.endRho)+d,b=.5*(x+y),v=s.surfaceMatrix,E=s.labelCfg||(s.labelCfg={}),S=s.getMarker("labels"),M=S.getTemplate(),C=M.getCalloutLine();if(a=C?C.length||40:0,v.appendMatrix(o.matrix),E.text=o.label,e=g+m*b,r=f+p*b,E.x=v.x(e,r),E.y=v.y(e,r),e=g+m*y,r=f+p*y,E.calloutStartX=v.x(e,r),E.calloutStartY=v.y(e,r),e=g+m*(y+a),r=f+p*(y+a),E.calloutPlaceX=v.x(e,r),E.calloutPlaceY=v.y(e,r),o.rotateLabels)switch(M.attr.orientation){case"horizontal":E.rotationRads=u+Math.atan2(v.y(1,0)-v.y(0,0),v.x(1,0)-v.x(0,0))+Math.PI/2;break;case"vertical":E.rotationRads=u+Math.atan2(v.y(1,0)-v.y(0,0),v.x(1,0)-v.x(0,0))}else E.rotationRads=0,Ext.log.warn("'series.style.rotateLabels' config is deprecated. Use 'series.label.orientation' config instead.");E.calloutColor=C&&C.color||s.attr.fillStyle,C?C.width&&(E.calloutWidth=C.width):E.calloutColor="none",E.globalAlpha=o.globalAlpha*o.fillOpacity,"none"!==M.display&&(E.hidden=o.startAngle==o.endAngle),M.attr.renderer&&(n=[s.attr.label,S,E,s.getRendererData(),s.getRendererIndex()],i=Ext.callback(M.attr.renderer,null,n,0,s.getSeries()),"string"==typeof i?E.text=i:Ext.apply(E,i)),s.putMarker("labels",E,l),t=s.getMarkerBBox("labels",l,!0),t&&(o.doCallout?"outside"===M.attr.display?s.putMarker("labels",{callout:1},l):"inside"===M.attr.display?s.putMarker("labels",{callout:0},l):s.putMarker("labels",{callout:1-s.sliceContainsLabel(o,t)},l):s.putMarker("labels",{globalAlpha:s.sliceContainsLabel(o,t)},l))},sliceContainsLabel:function(t,e){var r,i,n,a,s=t.labelOverflowPadding,o=(t.endRho+t.startRho)/2,l=o+(e.width+s)/2,h=o-(e.width+s)/2;return 0>s?1:e.width+2*s>t.endRho-t.startRho?0:(i=Math.sqrt(t.endRho*t.endRho-l*l),n=Math.sqrt(t.endRho*t.endRho-h*h),r=Math.abs(t.endAngle-t.startAngle),a=r>Math.PI/2?h:Math.abs(Math.tan(r/2))*h,e.height+2*s>2*Math.min(i,n,a)?0:1)}}),Ext.define("Ext.chart.series.Pie",{extend:"Ext.chart.series.Polar",requires:["Ext.chart.series.sprite.PieSlice"],type:"pie",alias:"series.pie",seriesType:"pieslice",isPie:!0,config:{donut:0,rotation:0,clockwise:!0,totalAngle:2*Math.PI,hidden:[],radiusFactor:100,highlightCfg:{margin:20},style:{}},directions:["X"],applyLabel:function(t,e){return Ext.isObject(t)&&!Ext.isString(t.orientation)&&Ext.apply(t=Ext.Object.chain(t),{orientation:"vertical"}),this.callParent([t,e])},updateLabelData:function(){var t,e,r,i,n=this,a=n.getStore(),s=a.getData().items,o=n.getSprites(),l=n.getLabel().getTemplate().getField(),h=n.getHidden();if(o.length&&l){for(r=[],t=0,e=s.length;e>t;t++)r.push(s[t].get(l));for(t=0,e=o.length;e>t;t++)i=o[t],i.setAttributes({label:r[t]}),i.putMarker("labels",{hidden:h[t]},i.attr.attributeId)}},coordinateX:function(){var t,e,r,i,n,a,s=this,o=s.getStore(),l=o.getData().items,h=l.length,c=s.getXField(),u=s.getYField(),d=0,g=0,f=s.getHidden(),p=[],m=0,x=s.getTotalAngle(),y=s.getClockwise()?1:-1,b=s.getSprites();if(b){for(i=0;h>i;i++)t=Math.abs(Number(l[i].get(c)))||0,r=u&&Math.abs(Number(l[i].get(u)))||0,f[i]||(d+=t,r>g&&(g=r)),p[i]=d,i>=f.length&&(f[i]=!1);for(f.length=h,s.maxY=g,0!==d&&(e=x/d),i=0;h>i;i++)b[i].setAttributes({startAngle:m,endAngle:m=e?y*p[i]*e:0,globalAlpha:1});if(h<s.sprites.length){for(i=h;i<s.sprites.length;i++)a=s.sprites[i],a.getMarker("labels").clear(a.getId()),a.releaseMarker("labels"),a.destroy();s.sprites.length=h}for(i=h;i<s.sprites.length;i++)b[i].setAttributes({startAngle:x,endAngle:x,globalAlpha:0});n=s.getChart(),n.isConfiguring||n.refreshLegendStore()}},updateCenter:function(t){this.setStyle({translationX:t[0]+this.getOffsetX(),translationY:t[1]+this.getOffsetY()}),this.doUpdateStyles()},updateRadius:function(t){this.setStyle({startRho:t*this.getDonut()*.01,endRho:t*this.getRadiusFactor()*.01}),this.doUpdateStyles()},getStyleByIndex:function(t){var e,r,i,n=this,a=n.getStore(),s=a.getAt(t),o=n.getYField(),l=n.getRadius(),h={};return s&&(i=o&&Math.abs(Number(s.get(o)))||0,e=l*n.getDonut()*.01,r=l*n.getRadiusFactor()*.01,h=n.callParent([t]),h.startRho=e,h.endRho=n.maxY?e+(r-e)*i/n.maxY:r),h},updateDonut:function(t){var e=this.getRadius();this.setStyle({startRho:e*t*.01,endRho:e*this.getRadiusFactor()*.01}),this.doUpdateStyles()},rotationOffset:-Math.PI/2,updateRotation:function(t){this.setStyle({rotationRads:t+this.rotationOffset}),this.doUpdateStyles()},updateTotalAngle:function(t){this.processData()},getSprites:function(){var t=this,e=t.getChart(),r=t.getStore();if(!e||!r)return[];t.getColors(),t.getSubStyle();var i,n,a,s=r.getData().items,o=s.length,l=t.getAnimation()||e&&e.getAnimation(),h=t.sprites,c=!1,u=0,d=t.getLabel(),g=d.getTemplate();for(a={store:r,field:t.getXField(),angleField:t.getXField(),radiusField:t.getYField(),series:t},n=0;o>n;n++)i=h[n],i||(i=t.createSprite(),t.getHighlight()&&(i.config.highlight=t.getHighlight(),i.addModifier("highlight",!0)),g.getField()&&(g.setAttributes({labelOverflowPadding:t.getLabelOverflowPadding()}),g.fx.setCustomDurations({callout:200})),i.setAttributes(t.getStyleByIndex(n)),i.setRendererData(a),c=!0),i.setRendererIndex(u++),i.setAnimation(l);return c&&t.doUpdateStyles(),t.sprites},betweenAngle:function(t,e,r){var i=2*Math.PI,n=this.rotationOffset;return e===r?!1:(this.getClockwise()?(e+=n,r+=n):(t*=-1,e*=-1,r*=-1,e-=n,r-=n),t-=e,r-=e,t%=i,r%=i,t+=i,r+=i,t%=i,r%=i,r>t||Ext.Number.isEqual(r,0,1e-8))},getItemByIndex:function(t,e){return e=e||"sprites",this.callParent([t,e])},getItemForAngle:function(t){var e,r=this,i=r.getSprites();for(t%=2*Math.PI;0>t;)t+=2*Math.PI;if(i)for(var n=r.getStore(),a=n.getData().items,s=r.getHidden(),o=0,l=n.getCount();l>o;o++)if(!s[o]&&(e=i[o].attr,e.startAngle<=t&&e.endAngle>=t))return{series:r,sprite:i[o],index:o,record:a[o],field:r.getXField()};return null},getItemForPoint:function(t,e){var r=this,i=r.getSprites();if(i){var n,a,s,o=r.getCenter(),l=r.getOffsetX(),h=r.getOffsetY(),c=t-o[0]+l,u=e-o[1]+h,d=r.getStore(),g=r.getDonut(),f=d.getData().items,p=Math.atan2(u,c)-r.getRotation(),m=Math.sqrt(c*c+u*u),x=r.getRadius()*g*.01,y=r.getHidden();for(n=0,a=f.length;a>n;n++)if(!y[n]&&(s=i[n].attr,m>=x+s.margin&&m<=s.endRho+s.margin&&r.betweenAngle(p,s.startAngle,s.endAngle)))return{series:r,sprite:i[n],index:n,record:f[n],field:r.getXField()};return null}},provideLegendInfo:function(t){var e=this,r=e.getStore();if(r){var i,n,a,s=r.getData().items,o=e.getLabel().getTemplate().getField(),l=e.getXField(),h=e.getHidden();for(i=0;i<s.length;i++)n=e.getStyleByIndex(i),a=n.fillStyle,Ext.isObject(a)&&(a=a.stops&&a.stops[0].color),t.push({name:o?String(s[i].get(o)):l+" "+i,mark:a||n.strokeStyle||"black",disabled:h[i],series:e.getId(),index:i})}}}),Ext.define("Ext.chart.series.sprite.Pie3DPart",{extend:"Ext.draw.sprite.Path",mixins:{markerHolder:"Ext.chart.MarkerHolder"},alias:"sprite.pie3dPart",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number",thickness:"number",bevelWidth:"number",distortion:"number",baseColor:"color",colorSpread:"number",baseRotation:"number",part:"enums(top,bottom,start,end,innerFront,innerBack,outerFront,outerBack)",label:"string"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,partZIndex",endAngle:"path,partZIndex",startRho:"path",endRho:"path,bbox",margin:"path,bbox",thickness:"path",distortion:"path",baseRotation:"path,partZIndex",baseColor:"partZIndex,partColor",colorSpread:"partColor",part:"path,partZIndex",globalAlpha:"canvas,alpha",fillOpacity:"canvas,alpha"},defaults:{centerX:0,centerY:0,startAngle:2*Math.PI,endAngle:2*Math.PI,startRho:0,endRho:150,margin:0,thickness:35,distortion:.5,baseRotation:0,baseColor:"white",colorSpread:1,miterLimit:1,bevelWidth:5,strokeOpacity:0,part:"top",label:""},updaters:{alpha:"alphaUpdater",partColor:"partColorUpdater",partZIndex:"partZIndexUpdater"}}},bevelParams:[],constructor:function(t){this.callParent([t]),this.bevelGradient=new Ext.draw.gradient.Linear({stops:[{offset:0,color:"rgba(255,255,255,0)"},{offset:.7,color:"rgba(255,255,255,0.6)"},{offset:1,color:"rgba(255,255,255,0)"}]})},alphaUpdater:function(t){var e=this,r=t.globalAlpha,i=t.fillOpacity,n=e.oldOpacity,a=e.oldFillOpacity;(r!==n&&(1===r||1===n)||i!==a&&(1===i||1===a))&&(e.scheduleUpdater(t,"path",["globalAlpha"]),e.oldOpacity=r,e.oldFillOpacity=i)},partColorUpdater:function(t){var e,r=Ext.util.Color.fly(t.baseColor),i=r.toString(),n=t.colorSpread;switch(t.part){case"top":e=new Ext.draw.gradient.Radial({start:{x:0,y:0,r:0},end:{x:0,y:0,r:1},stops:[{offset:0,color:r.createLighter(.1*n)},{offset:1,color:r.createDarker(.1*n)}]});break;case"bottom":e=new Ext.draw.gradient.Radial({start:{x:0,y:0,r:0},end:{x:0,y:0,r:1},stops:[{offset:0,color:r.createDarker(.2*n)},{offset:1,color:r.toString()}]});break;case"outerFront":case"outerBack":e=new Ext.draw.gradient.Linear({stops:[{offset:0,color:r.createDarker(.15*n).toString()},{offset:.3,color:i},{offset:.8,color:r.createLighter(.2*n).toString()},{offset:1,color:r.createDarker(.25*n).toString()}]});break;case"start":e=new Ext.draw.gradient.Linear({stops:[{offset:0,color:r.createDarker(.1*n).toString()},{offset:1,color:r.createLighter(.2*n).toString()}]});break;case"end":e=new Ext.draw.gradient.Linear({stops:[{offset:0,color:r.createDarker(.1*n).toString()},{offset:1,color:r.createLighter(.2*n).toString()}]});break;case"innerFront":case"innerBack":e=new Ext.draw.gradient.Linear({stops:[{offset:0,color:r.createDarker(.1*n).toString()},{offset:.2,color:r.createLighter(.2*n).toString()},{offset:.7,color:i},{offset:1,color:r.createDarker(.1*n).toString()}]})}t.fillStyle=e,t.canvasAttributes.fillStyle=e},partZIndexUpdater:function(t){var e,r=Ext.draw.sprite.AttributeParser.angle,i=t.baseRotation,n=t.startAngle,a=t.endAngle;switch(t.part){case"top":t.zIndex=6;break;case"outerFront":n=r(n+i),a=r(a+i),e=n>=0&&0>a?Math.sin(n):0>=n&&a>0?Math.sin(a):n>=0&&a>0?n>a?0:Math.max(Math.sin(n),Math.sin(a)):1,t.zIndex=4+e;break;case"outerBack":t.zIndex=1;break;case"start":t.zIndex=4+Math.sin(r(n+i));break;case"end":t.zIndex=4+Math.sin(r(a+i));break;case"innerFront":t.zIndex=2;break;case"innerBack":t.zIndex=4+Math.sin(r((n+a)/2+i));break;case"bottom":t.zIndex=0}t.dirtyZIndex=!0},updatePlainBBox:function(t){var e,r,i,n,a,s,o=this.attr,l=o.part,h=o.baseRotation,c=o.centerX,u=o.centerY;return"start"===l?r=o.startAngle+h:"end"===l&&(r=o.endAngle+h),Ext.isNumber(r)?(a=Math.sin(r),s=Math.cos(r),i=Math.min(c+s*o.startRho,c+s*o.endRho),n=u+a*o.startRho*o.distortion,t.x=i,t.y=n,t.width=s*(o.endRho-o.startRho),void(t.height=o.thickness+a*(o.endRho-o.startRho)*2)):(e="innerFront"===l||"innerBack"===l?o.startRho:o.endRho,t.width=2*e,t.height=e*o.distortion*2+o.thickness,t.x=o.centerX-e,void(t.y=o.centerY-e*o.distortion))},updateTransformedBBox:function(t){return"start"===this.attr.part||"end"===this.attr.part?this.callParent(arguments):this.updatePlainBBox(t)},updatePath:function(t){this.attr.globalAlpha&&(this.attr.endAngle<this.attr.startAngle||this[this.attr.part+"Renderer"](t))},render:function(t,e){var r=this,i=r.attr;i.globalAlpha&&!Ext.Number.isEqual(i.startAngle,i.endAngle,1e-8)&&(r.callParent([t,e]),r.bevelRenderer(t,e),i.label&&r.getMarker("labels")&&r.placeLabel())},placeLabel:function(){var t,e,r=this,i=r.attr,n=i.attributeId,a=i.margin,s=i.distortion,o=i.centerX,l=i.centerY,h=i.baseRotation,c=i.startAngle+h,u=i.endAngle+h,d=(c+u)/2,g=i.startRho+a,f=i.endRho+a,p=(g+f)/2,m=Math.sin(d),x=Math.cos(d),y=r.surfaceMatrix,b=r.getMarker("labels"),v=b.getTemplate(),E=v.getCalloutLine(),S=E&&E.length||40,M={};y.appendMatrix(i.matrix),M.text=i.label,t=o+x*p,e=l+m*p*s,M.x=y.x(t,e),M.y=y.y(t,e),t=o+x*f,e=l+m*f*s,M.calloutStartX=y.x(t,e),M.calloutStartY=y.y(t,e),t=o+x*(f+S),e=l+m*(f+S)*s,M.calloutPlaceX=y.x(t,e),M.calloutPlaceY=y.y(t,e),M.calloutWidth=2,r.putMarker("labels",M,n),r.putMarker("labels",{callout:1},n)},bevelRenderer:function(t,e){var r,i=this,n=i.attr,a=n.bevelWidth,s=i.bevelParams;for(r=0;r<s.length;r++)e.beginPath(),e.ellipse.apply(e,s[r]),e.save(),e.lineWidth=a,e.strokeOpacity=a?1:0,e.strokeGradient=i.bevelGradient,e.stroke(n),e.restore()},lidRenderer:function(t,e){var r=this.attr,i=r.margin,n=r.distortion,a=r.centerX,s=r.centerY,o=r.baseRotation,l=r.startAngle+o,h=r.endAngle+o,c=(l+h)/2,u=r.startRho,d=r.endRho,g=Math.sin(h),f=Math.cos(h);a+=Math.cos(c)*i,s+=Math.sin(c)*i*n,t.ellipse(a,s+e,u,u*n,0,l,h,!1),t.lineTo(a+f*d,s+e+g*d*n),t.ellipse(a,s+e,d,d*n,0,h,l,!0),t.closePath()},topRenderer:function(t){this.lidRenderer(t,0)},bottomRenderer:function(t){var e=this.attr,r=Ext.util.Color.RGBA_NONE;(e.globalAlpha<1||e.fillOpacity<1||e.shadowColor!==r)&&this.lidRenderer(t,e.thickness)},sideRenderer:function(t,e){var r,i=this.attr,n=i.margin,a=i.centerX,s=i.centerY,o=i.distortion,l=i.baseRotation,h=i.startAngle+l,c=i.endAngle+l,u=!i.startAngle&&Ext.Number.isEqual(2*Math.PI,i.endAngle,1e-7),d=i.thickness,g=i.startRho,f=i.endRho,p="start"===e&&h||"end"===e&&c,m=Math.sin(p),x=Math.cos(p),y=i.globalAlpha<1,b="start"===e&&0>x||"end"===e&&x>0||y;b&&!u&&(r=(h+c)/2,a+=Math.cos(r)*n,s+=Math.sin(r)*n*o,t.moveTo(a+x*g,s+m*g*o),t.lineTo(a+x*f,s+m*f*o),t.lineTo(a+x*f,s+m*f*o+d),t.lineTo(a+x*g,s+m*g*o+d),t.closePath())},startRenderer:function(t){this.sideRenderer(t,"start")},endRenderer:function(t){this.sideRenderer(t,"end")},rimRenderer:function(t,e,r,i){function n(){t.ellipse(f,p+S,e,e*m,0,Math.PI,b,!0),t.lineTo(f+Math.cos(b)*e,p+Math.sin(b)*e*m),c=[f,p,e,e*m,0,b,Math.PI,!1],r||u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()}function a(){t.ellipse(f,p+S,e,e*m,0,0,v,!1),t.lineTo(f+Math.cos(v)*e,p+Math.sin(v)*e*m),c=[f,p,e,e*m,0,v,0,!0],r||u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()}function s(){t.ellipse(f,p+S,e,e*m,0,Math.PI,v,!1),t.lineTo(f+Math.cos(v)*e,p+Math.sin(v)*e*m),c=[f,p,e,e*m,0,v,Math.PI,!0],r&&u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()}function o(){t.ellipse(f,p+S,e,e*m,0,b,0,!1),t.lineTo(f+e,p),c=[f,p,e,e*m,0,0,b,!0],r&&u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()}var l,h,c,u=this,d=u.attr,g=d.margin,f=d.centerX,p=d.centerY,m=d.distortion,x=d.baseRotation,y=Ext.draw.sprite.AttributeParser.angle,b=d.startAngle+x,v=d.endAngle+x,E=y((b+v)/2),S=d.thickness,M=d.globalAlpha<1;u.bevelParams=[],b=y(b),v=y(v),f+=Math.cos(E)*g,p+=Math.sin(E)*g*m,l=b>=0&&v>=0,h=0>=b&&0>=v,i?(!r||M)&&(b>=0&&0>v?n():0>=b&&v>0?a():0>=b&&0>v?b>v&&(t.ellipse(f,p+S,e,e*m,0,0,Math.PI,!1),t.lineTo(f-e,p),c=[f,p,e,e*m,0,Math.PI,0,!0],r||u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()):b>v?(n(),a()):(c=[f,p,e,e*m,0,b,v,!1],(l&&!r||h&&r)&&u.bevelParams.push(c),t.ellipse.apply(t,c),t.lineTo(f+Math.cos(v)*e,p+Math.sin(v)*e*m+S),t.ellipse(f,p+S,e,e*m,0,v,b,!0),t.closePath())):(r||M)&&(b>=0&&0>v?s():0>=b&&v>0?o():0>=b&&0>v?b>v?(s(),o()):(t.ellipse(f,p+S,e,e*m,0,b,v,!1),t.lineTo(f+Math.cos(v)*e,p+Math.sin(v)*e*m),c=[f,p,e,e*m,0,v,b,!0],r&&u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()):b>v&&(t.ellipse(f,p+S,e,e*m,0,-Math.PI,0,!1),t.lineTo(f+e,p),c=[f,p,e,e*m,0,0,-Math.PI,!0],r&&u.bevelParams.push(c),t.ellipse.apply(t,c),t.closePath()))},innerFrontRenderer:function(t){this.rimRenderer(t,this.attr.startRho,!0,!0)},innerBackRenderer:function(t){this.rimRenderer(t,this.attr.startRho,!0,!1)},outerFrontRenderer:function(t){this.rimRenderer(t,this.attr.endRho,!1,!0)},outerBackRenderer:function(t){this.rimRenderer(t,this.attr.endRho,!1,!1)}}),Ext.define("Ext.chart.series.Pie3D",{extend:"Ext.chart.series.Polar",requires:["Ext.chart.series.sprite.Pie3DPart","Ext.draw.PathUtil"],type:"pie3d",seriesType:"pie3d",alias:"series.pie3d",is3D:!0,config:{rect:[0,0,0,0],thickness:35,distortion:.5,donut:!1,hidden:[],highlightCfg:{margin:20},shadow:!1},rotationOffset:-Math.PI/2,setField:function(t){return this.setXField(t)},getField:function(){return this.getXField()},updateRotation:function(t){this.setStyle({baseRotation:t+this.rotationOffset}),this.doUpdateStyles()},updateDistortion:function(){this.setRadius()},updateThickness:function(){this.setRadius()},updateColors:function(t){this.setSubStyle({baseColor:t})},applyShadow:function(t){return t===!0?t={shadowColor:"rgba(0,0,0,0.8)",shadowBlur:30}:Ext.isObject(t)||(t={shadowColor:Ext.util.Color.RGBA_NONE}),t},updateShadow:function(t){var e,r,i=this,n=i.getSprites(),a=i.spritesPerSlice,s=n&&n.length;for(e=1;s>e;e+=a)r=n[e],(r.attr.part="bottom")&&r.setAttributes(t)},getStyleByIndex:function(t){var e=this.callParent([t]),r=this.getStyle(),i=e.fillStyle||e.fill||e.color,n=r.strokeStyle||r.stroke;return i&&(e.baseColor=i,delete e.fillStyle,delete e.fill,delete e.color),n&&(e.strokeStyle=n),e},doUpdateStyles:function(){for(var t,e,r=this,i=r.getSprites(),n=r.spritesPerSlice,a=i&&i.length,s=0,o=0;a>s;s+=n,o++)for(e=r.getStyleByIndex(o),t=0;n>t;t++)i[s+t].setAttributes(e)},coordinateX:function(){var t,e,r,i,n=this,a=n.getChart(),s=a&&a.getAnimation(),o=n.getStore(),l=o.getData().items,h=l.length,c=n.getXField(),u=n.getRotation(),d=n.getHidden(),g=0,f=[],p=n.getSprites(),m=p.length,x=n.spritesPerSlice,y=0,b=2*Math.PI,v=1e-10;for(r=0;h>r;r++)t=Math.abs(Number(l[r].get(c)))||0,d[r]||(g+=t),f[r]=g,r>=d.length&&(d[r]=!1);if(d.length=h,0!==g){for(e=2*Math.PI/g,r=0;h>r;r++)f[r]*=e;for(r=0;m>r;r++)p[r].setAnimation(s);for(r=0;h>r;r++){for(i=0;x>i;i++)p[r*x+i].setAttributes({startAngle:y,endAngle:f[r]-v,globalAlpha:1,baseRotation:u});y=f[r]}for(r*=x;m>r;r++)p[r].setAnimation(s),p[r].setAttributes({startAngle:b,endAngle:b,globalAlpha:0,baseRotation:u})}},updateLabelData:function(){var t,e,r,i,n,a=this,s=a.getStore(),o=s.getData().items,l=a.getSprites(),h=a.getLabel().getTemplate().getField(),c=a.getHidden(),u=a.spritesPerSlice;if(l.length&&h){for(i=[],t=0,r=o.length;r>t;t++)i.push(o[t].get(h));for(t=0,e=0,r=l.length;r>t;t+=u,e++)n=l[t],n.setAttributes({label:i[e]}),n.putMarker("labels",{hidden:c[e]},n.attr.attributeId)}},applyRadius:function(){var t=this,e=t.getChart(),r=e.getInnerPadding(),i=e.getMainRect()||[0,0,1,1],n=i[2]-2*r,a=i[3]-2*r-t.getThickness(),s=n/2,o=s*t.getDistortion();return o>a/2?a/(2*t.getDistortion()):s},getSprites:function(){var t=this,e=t.getStore();if(!e)return[];var r,i,n,a,s,o=t.getChart(),l=t.getSurface(),h=e.getData().items,c=t.spritesPerSlice,u=h.length,d=t.getAnimation()||o&&o.getAnimation(),g=t.getCenter(),f=t.getOffsetX(),p=t.getOffsetY(),m=t.getRadius(),x=t.getRotation(),y=t.getHighlight(),b={centerX:g[0]+f,centerY:g[1]+p-t.getThickness()/2,endRho:m,startRho:m*t.getDonut()/100,thickness:t.getThickness(),distortion:t.getDistortion()},v=t.sprites,E=t.getLabel(),S=E.getTemplate();for(a=0;u>a;a++)if(i=Ext.apply({},this.getStyleByIndex(a),b),v[a*c])for(r=v.slice(a*c,(a+1)*c),s=0;s<r.length;s++)n=r[s],d&&n.setAnimation(d),n.setAttributes(i);else for(s=0;s<t.partNames.length;s++)n=l.add({type:"pie3dPart",part:t.partNames[s]}),0===s&&S.getField()&&n.bindMarker("labels",E),n.fx.setDurationOn("baseRotation",x),y&&(n.config.highlight=y,n.addModifier("highlight",!0)),n.setAttributes(i),v.push(n);return v},betweenAngle:function(t,e,r){var i=2*Math.PI,n=this.rotationOffset;return e+=n,r+=n,t-=e,r-=e,t%=i,r%=i,t+=i,r+=i,t%=i,r%=i,r>t||0===r},getItemForPoint:function(t,e){var r=this,i=r.getSprites();if(i){var n,a,s,o,l=r.getStore(),h=l.getData().items,c=r.spritesPerSlice,u=r.getHidden();for(n=0,a=h.length;a>n;n++)if(!u[n]&&(o=n*c,s=i[o],s.hitTest([t,e])))return{series:r,sprite:i.slice(o,o+c),index:n,record:h[n],category:"sprites",field:r.getXField()};return null}},provideLegendInfo:function(t){var e=this,r=e.getStore();if(r){var i,n,a,s=r.getData().items,o=e.getLabel().getTemplate().getField(),l=e.getField(),h=e.getHidden();for(i=0;i<s.length;i++)n=e.getStyleByIndex(i),a=n.baseColor,t.push({name:o?String(s[i].get(o)):l+" "+i,mark:a||"black",disabled:h[i],series:e.getId(),index:i})}}},function(){var t=this.prototype,e=Ext.chart.series.sprite.Pie3DPart.def.getInitialConfig().processors.part;t.partNames=e.replace(/^enums\(|\)/g,"").split(","),t.spritesPerSlice=t.partNames.length}),Ext.define("Ext.chart.series.sprite.Polar",{extend:"Ext.chart.series.sprite.Series",
inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",baseRotation:"number",labels:"default",labelOverflowPadding:"number"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:Math.PI,startRho:0,endRho:150,baseRotation:0,labels:null,labelOverflowPadding:10},triggers:{centerX:"bbox",centerY:"bbox",startAngle:"bbox",endAngle:"bbox",startRho:"bbox",endRho:"bbox",baseRotation:"bbox"}}},updatePlainBBox:function(t){var e=this.attr;t.x=e.centerX-e.endRho,t.y=e.centerY+e.endRho,t.width=2*e.endRho,t.height=2*e.endRho}}),Ext.define("Ext.chart.series.sprite.Radar",{alias:"sprite.radar",extend:"Ext.chart.series.sprite.Polar",getDataPointXY:function(t){var e,r,i,n,a,s,o,l=this,h=l.attr,c=h.centerX,u=h.centerY,d=h.matrix,g=h.dataMinX,f=h.dataMaxX,p=h.dataX,m=h.dataY,x=h.endRho,y=h.startRho,b=h.baseRotation;return o=h.rangeY?h.rangeY[1]:h.dataMaxY,n=(p[t]-g)/(f-g+1)*2*Math.PI+b,i=m[t]/o*(x-y)+y,a=c+Math.cos(n)*i,s=u+Math.sin(n)*i,e=d.x(a,s),r=d.y(a,s),[e,r]},render:function(t,e){var r,i,n,a,s=this,o=s.attr,l=o.dataX,h=l.length,c=s.surfaceMatrix,u={};for(e.beginPath(),r=0;h>r;r++)a=s.getDataPointXY(r),i=a[0],n=a[1],0===r&&e.moveTo(i,n),e.lineTo(i,n),u.translationX=c.x(i,n),u.translationY=c.y(i,n),s.putMarker("markers",u,r,!0);e.closePath(),e.fillStroke(o)}}),Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Polar",type:"radar",seriesType:"radar",alias:"series.radar",requires:["Ext.chart.series.sprite.Radar"],themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 1},updateAngularAxis:function(t){t.processData(this)},updateRadialAxis:function(t){t.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateCenter:function(t){this.setStyle({translationX:t[0]+this.getOffsetX(),translationY:t[1]+this.getOffsetY()}),this.doUpdateStyles()},updateRadius:function(t){this.setStyle({endRho:t}),this.doUpdateStyles()},updateRotation:function(t){var e,r,i,n=this,a=n.getChart(),s=a.getAxes();for(e=0,r=s.length;r>e;e++)i=s[e],i.setRotation(t);this.setStyle({rotationRads:t}),this.doUpdateStyles()},updateTotalAngle:function(t){this.processData()},getItemForPoint:function(t,e){var r,i,n,a,s,o,l=this,h=l.sprites&&l.sprites[0],c=h.attr,u=c.dataX,d=u.length,g=l.getStore(),f=l.getMarker();if(l.getHidden())return null;if(h&&f)for(o=h.getMarker("markers"),a=0;d>a;a++)if(s=o.getBBoxFor(a),r=.25*(s.width+s.height),n=h.getDataPointXY(a),Math.abs(n[0]-t)<r&&Math.abs(n[1]-e)<r)return i={series:l,sprite:h,index:a,category:"markers",record:g.getData().items[a],field:l.getYField()};return l.callParent(arguments)},getDefaultSpriteConfig:function(){var t=this.callParent(),e={customDurations:{translationX:0,translationY:0,rotationRads:0,dataMinX:0,dataMaxX:0}};return t.fx?Ext.apply(t.fx,e):t.fx=e,t},getSprites:function(){var t,e=this,r=e.getChart(),i=e.getAnimation()||r&&r.getAnimation(),n=e.sprites[0];return r?(n||(n=e.createSprite()),i&&(t=n.getMarker("markers"),t&&t.getTemplate().setAnimation(i),n.setAnimation(i)),e.sprites):[]},provideLegendInfo:function(t){var e=this,r=e.getSubStyleWithTheme(),i=r.fillStyle;Ext.isArray(i)&&(i=i[0]),t.push({name:e.getTitle()||e.getYField()||e.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||r.strokeStyle||"black",disabled:e.getHidden(),series:e.getId(),index:0})}}),Ext.define("Ext.chart.series.sprite.Scatter",{alias:"sprite.scatterSeries",extend:"Ext.chart.series.sprite.Cartesian",renderClipped:function(t,e,r,i){if(!this.cleanRedraw){var n,a,s,o,l,h,c,u,d,g=this,f=g.attr,p=f.dataX,m=f.dataY,x=f.labels,y=g.getSeries(),b=x&&g.getMarker("labels"),v=g.attr.matrix,E=v.getXX(),S=v.getYY(),M=v.getDX(),C=v.getDY(),w={},A=t.getInherited().rtl&&!f.flipXY?-1:1;for(f.flipXY?(s=i[1]-E*A,o=i[1]+i[3]+E*A,l=i[0]-S,h=i[0]+i[2]+S):(s=i[0]-E*A,o=i[0]+i[2]+E*A,l=i[1]-S,h=i[1]+i[3]+S),d=0;d<p.length;d++)c=p[d],u=m[d],c=c*E+M,u=u*S+C,c>=s&&o>=c&&u>=l&&h>=u&&(f.renderer?(w={type:"items",translationX:c,translationY:u},a=[g,w,{store:g.getStore()},d],n=Ext.callback(f.renderer,null,a,0,y),w=Ext.apply(w,n)):(w.translationX=c,w.translationY=u),g.putMarker("items",w,d,!f.renderer),b&&x[d]&&g.drawLabel(x[d],c,u,d,i))}},drawLabel:function(t,e,r,i,n){var a,s,o,l,h,c,u=this,d=u.attr,g=u.getMarker("labels"),f=g.getTemplate(),p=u.labelCfg||(u.labelCfg={}),m=u.surfaceMatrix,x=d.labelOverflowPadding,y=d.flipXY;switch(p.text=t,l=u.getMarkerBBox("labels",i,!0),l||(u.putMarker("labels",p,i),l=u.getMarkerBBox("labels",i,!0)),p.rotationRads=y?.5*Math.PI:0,o=l.height/2,a=e,f.attr.display){case"under":s=r-o-x;break;case"rotate":a+=x,s=r-x,p.rotationRads=-Math.PI/4;break;default:s=r+o+x}p.x=m.x(a,s),p.y=m.y(a,s),f.attr.renderer&&(c=[t,g,p,{store:u.getStore()},i],h=Ext.callback(f.attr.renderer,null,c,0,u.getSeries()),"string"==typeof h?p.text=h:Ext.apply(p,h)),u.putMarker("labels",p,i)}}),Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",alias:"series.scatter",type:"scatter",seriesType:"scatterSeries",requires:["Ext.chart.series.sprite.Scatter"],config:{itemInstancing:{fx:{customDurations:{translationX:0,translationY:0}}}},themeMarkerCount:function(){return 1},applyMarker:function(t,e){return this.getItemInstancing(),this.setItemInstancing(t),this.callParent(arguments)},provideLegendInfo:function(t){var e=this,r=e.getMarkerStyleByIndex(0),i=r.fillStyle;t.push({name:e.getTitle()||e.getYField()||e.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||r.strokeStyle||"black",disabled:e.getHidden(),series:e.getId(),index:0})}}),Ext.define("Ext.chart.theme.Blue",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.blue","chart.theme.Blue"],config:{baseColor:"#4d7fe6"}}),Ext.define("Ext.chart.theme.BlueGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.blue-gradients","chart.theme.Blue:gradients"],config:{baseColor:"#4d7fe6",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category1",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category1","chart.theme.Category1"],config:{colors:["#f0a50a","#c20024","#2044ba","#810065","#7eae29"]}}),Ext.define("Ext.chart.theme.Category1Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category1-gradients","chart.theme.Category1:gradients"],config:{colors:["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category2",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category2","chart.theme.Category2"],config:{colors:["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"]}}),Ext.define("Ext.chart.theme.Category2Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category2-gradients","chart.theme.Category2:gradients"],config:{colors:["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category3",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category3","chart.theme.Category3"],config:{colors:["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"]}}),Ext.define("Ext.chart.theme.Category3Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category3-gradients","chart.theme.Category3:gradients"],config:{colors:["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category4",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category4","chart.theme.Category4"],config:{colors:["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"]}}),Ext.define("Ext.chart.theme.Category4Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category4-gradients","chart.theme.Category4:gradients"],config:{colors:["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category5",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category5","chart.theme.Category5"],config:{colors:["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"]}}),Ext.define("Ext.chart.theme.Category5Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category5-gradients","chart.theme.Category5:gradients"],config:{colors:["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category6",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category6","chart.theme.Category6"],config:{colors:["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]}}),Ext.define("Ext.chart.theme.Category6Gradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.category6-gradients","chart.theme.Category6:gradients"],config:{colors:["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.DefaultGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.default-gradients","chart.theme.Base:gradients"],config:{gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Green",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.green","chart.theme.Green"],config:{baseColor:"#b1da5a"}}),Ext.define("Ext.chart.theme.GreenGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.green-gradients","chart.theme.Green:gradients"],config:{baseColor:"#b1da5a",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Midnight",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.midnight","chart.theme.Midnight"],config:{colors:["#A837FF","#4AC0F2","#FF4D35","#FF8809","#61C102","#FF37EA"],chart:{defaults:{background:"rgb(52, 52, 53)"}},axis:{defaults:{style:{strokeStyle:"rgb(224, 224, 227)"},label:{fillStyle:"rgb(224, 224, 227)"},title:{fillStyle:"rgb(224, 224, 227)"},grid:{strokeStyle:"rgb(112, 112, 115)"}}},series:{defaults:{label:{fillStyle:"rgb(224, 224, 227)"}}},sprites:{text:{fillStyle:"rgb(224, 224, 227)"}},legend:{label:{fillStyle:"white"},border:{lineWidth:2,fillStyle:"rgba(255, 255, 255, 0.3)",strokeStyle:"rgb(150, 150, 150)"},background:"rgb(52, 52, 53)"}}}),Ext.define("Ext.chart.theme.Muted",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.muted","chart.theme.Muted"],config:{colors:["#8ca640","#974144","#4091ba","#8e658e","#3b8d8b","#b86465","#d2af69","#6e8852","#3dcc7e","#a6bed1","#cbaa4b","#998baa"]}}),Ext.define("Ext.chart.theme.Purple",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.purple","chart.theme.Purple"],config:{baseColor:"#da5abd"}}),Ext.define("Ext.chart.theme.PurpleGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.purple-gradients","chart.theme.Purple:gradients"],config:{baseColor:"#da5abd",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Red",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.red","chart.theme.Red"],config:{baseColor:"#e84b67"}}),Ext.define("Ext.chart.theme.RedGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.red-gradients","chart.theme.Red:gradients"],config:{baseColor:"#e84b67",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Sky",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.sky","chart.theme.Sky"],config:{baseColor:"#4ce0e7"}}),Ext.define("Ext.chart.theme.SkyGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.sky-gradients","chart.theme.Sky:gradients"],config:{baseColor:"#4ce0e7",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Yellow",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.yellow","chart.theme.Yellow"],config:{baseColor:"#fec935"}}),Ext.define("Ext.chart.theme.YellowGradients",{extend:"Ext.chart.theme.Base",singleton:!0,alias:["chart.theme.yellow-gradients","chart.theme.Yellow:gradients"],config:{baseColor:"#fec935",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.draw.Point",{requires:["Ext.draw.Draw","Ext.draw.Matrix"],isPoint:!0,x:0,y:0,length:0,angle:0,angleUnits:"degrees",statics:{fly:function(){var t=null;return function(e,r){return t||(t=new Ext.draw.Point),t.constructor(e,r),t}}()},constructor:function(t,e){var r=this;"number"==typeof t?(r.x=t,r.y="number"==typeof e?e:t):Ext.isArray(t)?(r.x=t[0],r.y=t[1]):t&&(r.x=t.x,r.y=t.y),r.calculatePolar()},calculateCartesian:function(){var t=this,e=t.length,r=t.angle;"degrees"===t.angleUnits&&(r=Ext.draw.Draw.rad(r)),t.x=Math.cos(r)*e,t.y=Math.sin(r)*e},calculatePolar:function(){var t=this,e=t.x,r=t.y;t.length=Math.sqrt(e*e+r*r),t.angle=Math.atan2(r,e),"degrees"===t.angleUnits&&(t.angle=Ext.draw.Draw.degrees(t.angle))},setX:function(t){this.x=t,this.calculatePolar()},setY:function(t){this.y=t,this.calculatePolar()},set:function(t,e){this.constructor(t,e)},setAngle:function(t){this.angle=t,this.calculateCartesian()},setLength:function(t){this.length=t,this.calculateCartesian()},setPolar:function(t,e){this.angle=t,this.length=e,this.calculateCartesian()},clone:function(){return new Ext.draw.Point(this.x,this.y)},add:function(t,e){var r=Ext.draw.Point.fly(t,e);return new Ext.draw.Point(this.x+r.x,this.y+r.y)},sub:function(t,e){var r=Ext.draw.Point.fly(t,e);return new Ext.draw.Point(this.x-r.x,this.y-r.y)},mul:function(t){return new Ext.draw.Point(this.x*t,this.y*t)},div:function(t){return new Ext.draw.Point(this.x/t,this.y/t)},dot:function(t,e){var r=Ext.draw.Point.fly(t,e);return this.x*r.x+this.y*r.y},equals:function(t,e){var r=Ext.draw.Point.fly(t,e);return this.x===r.x&&this.y===r.y},rotate:function(t,e){var r,i,n,a,s;return"degrees"===this.angleUnits&&(t=Ext.draw.Draw.rad(t),r=Math.sin(t),i=Math.cos(t)),e?(n=e.x,a=e.y):(n=0,a=0),s=Ext.draw.Matrix.fly([i,r,-r,i,n-i*n+a*r,a-i*a+n*-r]).transformPoint(this),new Ext.draw.Point(s)},transform:function(t){return t&&t.isMatrix?new Ext.draw.Point(t.transformPoint(this)):6===arguments.length?new Ext.draw.Point(Ext.draw.Matrix.fly(arguments).transformPoint(this)):void Ext.raise("Invalid parameters.")},round:function(){return new Ext.draw.Point(Math.round(this.x),Math.round(this.y))},ceil:function(){return new Ext.draw.Point(Math.ceil(this.x),Math.ceil(this.y))},floor:function(){return new Ext.draw.Point(Math.floor(this.x),Math.floor(this.y))},abs:function(t,e){return new Ext.draw.Point(Math.abs(this.x),Math.abs(this.y))},normalize:function(t){var e=this.x,r=this.y,i=(t||1)/Math.sqrt(e*e+r*r);return new Ext.draw.Point(e*i,r*i)},getDistanceToLine:function(t,e){4===arguments.length&&(t=new Ext.draw.Point(arguments[0],arguments[1]),e=new Ext.draw.Point(arguments[2],arguments[3]));var r=e.sub(t).normalize(),i=t.sub(this);return i.sub(r.mul(i.dot(r)))},isZero:function(){return 0===this.x&&0===this.y},isNumber:function(){return Ext.isNumber(this.x)&&Ext.isNumber(this.y)}}),Ext.define("Ext.draw.plugin.SpriteEvents",{extend:"Ext.plugin.Abstract",alias:"plugin.spriteevents",requires:["Ext.draw.overrides.hittest.All"],mouseMoveEvents:{mousemove:!0,mouseover:!0,mouseout:!0},spriteMouseMoveEvents:{spritemousemove:!0,spritemouseover:!0,spritemouseout:!0},init:function(t){var e="handleEvent";this.drawContainer=t,t.addElementListener({click:e,dblclick:e,mousedown:e,mousemove:e,mouseup:e,mouseover:e,mouseout:e,priority:1001,scope:this})},hasSpriteMouseMoveListeners:function(){var t,e=this.drawContainer.hasListeners;for(t in this.spriteMouseMoveEvents)if(t in e)return!0;return!1},hitTestEvent:function(t){var e,r,i,n=this.drawContainer.getItems();for(i=n.length-1;i>=0;i--)if(e=n.get(i),r=e.hitTestEvent(t))return r;return null},handleEvent:function(t){var e,r=this,i=r.drawContainer,n=t.type in r.mouseMoveEvents,a=r.lastSprite;(!n||r.hasSpriteMouseMoveListeners())&&(e=r.hitTestEvent(t),n&&!Ext.Object.equals(e,a)&&(a&&i.fireEvent("spritemouseout",a,t),e&&i.fireEvent("spritemouseover",e,t)),e&&i.fireEvent("sprite"+t.type,e,t),r.lastSprite=e)}}),Ext.define("Ext.chart.interactions.ItemInfo",{extend:"Ext.chart.interactions.Abstract",type:"iteminfo",alias:"interaction.iteminfo",config:{extjsGestures:{start:{event:"click",handler:"onInfoGesture"},move:{event:"mousemove",handler:"onInfoGesture"},end:{event:"mouseleave",handler:"onInfoGesture"}}},item:null,onInfoGesture:function(t,e){var r=this,i=r.getItemForEvent(t),n=i&&i.series.tooltip;return n&&n.onMouseMove.call(n,t),i!==r.item&&(i?i.series.showTip(i):r.item.series.hideTip(r.item),r.item=i),!1}});